/*! For license information please see conseiljs.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.conseiljs=t():e.conseiljs=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=44)}([function(e,t,r){"use strict";(function(e){var n=r(46),o=r(47),s=r(31);function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):f(e,t);if("Buffer"===t.type&&s(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return w(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,o){var s,i=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,u/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*i}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var p=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){p=!1;break}if(p)return s}return-1}function P(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(isNaN(a))return i;e[r+i]=a}return i}function $(e,t,r,n){return W(B(t,e.length-r),e,r,n)}function v(e,t,r,n){return W(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return v(e,t,r,n)}function A(e,t,r,n){return W(L(t),e,r,n)}function T(e,t,r,n){return W(function(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,o=r%256,s.push(o),s.push(n);return s}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[o+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(u=(15&c)<<12|(63&s)<<6|63&i)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return p(null,e)},u.allocUnsafeSlow=function(e){return p(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),a=Math.min(s,i),c=this.slice(n,o),l=e.slice(t,r),p=0;p<a;++p)if(c[p]!==l[p]){s=c[p],i=l[p];break}return s<i?-1:i<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return P(this,e,t,r);case"utf8":case"utf-8":return $(this,e,t,r);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function E(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function w(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=t;s<r;++s)o+=z(e[s]);return o}function R(e,t,r){for(var n=e.slice(t,r),o="",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,o,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,s=Math.min(e.length-r,2);o<s;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,s=Math.min(e.length-r,4);o<s;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function M(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,s){return s||M(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,s){return s||M(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;r=new u(o,void 0);for(var s=0;s<o;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,s=n-r;if(this===e&&r<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var i=u.isBuffer(e)?e:B(new u(e,n).toString()),a=i.length;for(s=0;s<r-t;++s)this[s+t]=i[s%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function L(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(13))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SeedNonceRevelation="seed_nonce_revelation",e.Delegation="delegation",e.Transaction="transaction",e.AccountActivation="activate_account",e.Origination="origination",e.Reveal="reveal",e.Endorsement="endorsement",e.Ballot="ballot",e.DoubleEndorsementEvidence="double_endorsement_evidence",e.DoubleBakingEvidence="double_baking_evidence",e.Proposal="proposals"}(t.OperationKindType||(t.OperationKindType={})),function(e){e.Michelson="michelson",e.Micheline="micheline",e.MichelsonLambda="michelsonlambda"}(t.TezosParameterFormat||(t.TezosParameterFormat={}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=r(78),a=r(8),u=o(r(15)),c=o(r(11)).default.log,l=u.default.fetch;!function(e){function t(e,t){const r=`${e}/${t}`;return l(r,{method:"get"}).then(n=>{if(!n.ok)throw c.error(`TezosNodeReader.performGetRequest error: ${n.status} for ${t} on ${e}`),new i.TezosRequestError(n.status,n.statusText,r,null);return n}).then(r=>{const n=r.json();return c.debug(`TezosNodeReader.performGetRequest response: ${n} for ${t} on ${e}`),n})}function r(e,r="head",n="main"){return t(e,`chains/${n}/blocks/${r}`).then(e=>e)}function o(e,r,n,o="main"){return t(e,`chains/${o}/blocks/${r}/context/contracts/${n}`).then(e=>e)}function u(e,r,o,s="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${s}/blocks/${r}/context/contracts/${o}/manager_key`);return n?n.toString():""}))}e.getDelegate=function(e,t){return n(this,void 0,void 0,(function*(){return(yield o(e,"head",t)).delegate}))},e.getBlock=r,e.getBlockHead=function(e){return r(e)},e.getBlockAtOffset=function(e,o,s="main"){return n(this,void 0,void 0,(function*(){if(o<=0)return r(e);const n=yield r(e);return t(e,`chains/${s}/blocks/${Number(n.header.level)-o}`).then(e=>e)}))},e.getAccountForBlock=o,e.getCounterForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/blocks/head/context/contracts/${r}/counter`).then(e=>e.toString());return parseInt(n.toString(),10)}))},e.getSpendableBalanceForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/blocks/head/context/contracts/${r}`).then(e=>e);return parseInt(n.balance.toString(),10)}))},e.getAccountManagerForBlock=u,e.isImplicitAndEmpty=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield o(e,"head",t),n=t.toLowerCase().startsWith("tz"),s=0===Number(r.balance);return n&&s}))},e.isManagerKeyRevealedForAccount=function(e,t){return n(this,void 0,void 0,(function*(){return(yield u(e,"head",t)).length>0}))},e.getContractStorage=function(e,r,n="head",o="main"){return t(e,`chains/${o}/blocks/${n}/context/contracts/${r}/storage`)},e.getValueForBigMapKey=function(e,r,n,o="head",s="main"){return t(e,`chains/${s}/blocks/${o}/context/big_maps/${r}/${n}`)},e.getMempoolOperation=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/mempool/pending_operations`).catch(()=>{});return s.JSONPath({path:`$.applied[?(@.hash=='${r}')]`,json:n})[0]}))},e.estimateBranchTimeout=function(e,t,o="main"){return n(this,void 0,void 0,(function*(){const n=r(e,t,o),s=r(e,"head",o);var i=yield Promise.all([n,s]).then(e=>Number(e[1].header.level)-Number(e[0].header.level));return a.TezosConstants.MaxBranchOffset-i}))},e.getMempoolOperationsForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){return(yield t(e,`chains/${o}/mempool/pending_operations`).catch(()=>{})).applied.filter(e=>e.contents.some(e=>e.source===r||e.destination===r)).map(e=>(e.contents=e.contents.filter(e=>e.source===r||e.destination===r),e))}))},e.getChainId=function(e,r="main"){return n(this,void 0,void 0,(function*(){return t(e,`chains/${r}/chain_id`).then(e=>e.toString())}))}}(t.TezosNodeReader||(t.TezosNodeReader={}))},function(e,t,r){"use strict";(function(e){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(49)),i=n(r(40)),a=o(r(17)),u=r(10),c=r(2),l=r(42);!function(t){function r(t){if(t<0)throw new Error("Use writeSignedInt to encode negative numbers");return e.from(e.from(function(e){if(e<128)return("0"+e.toString(16)).slice(-2);let t="";if(e>2147483648){let r=i.default(e);for(;r.greater(0);)t=("0"+r.and(127).toString(16)).slice(-2)+t,r=r.shiftRight(7)}else{let r=e;for(;r>0;)t=("0"+(127&r).toString(16)).slice(-2)+t,r>>=7}return t}(t),"hex").map((e,t)=>0===t?e:128^e).reverse()).toString("hex")}function n(e){if(0===e||"0"===e)return"00";let t=i.default(e).abs();const r=t.bitLength().toJSNumber();let n=[];for(let o=0;o<r;o+=7){let s=i.default.zero;0===o?(s=t.and(63),t=t.shiftRight(6)):(s=t.and(127),t=t.shiftRight(7)),e<0&&0===o&&(s=s.or(64)),o+7<r&&(s=s.or(128)),n.push(s.toJSNumber())}return r%7==0&&(n[n.length-1]=128|n[n.length-1],n.push(1)),n.map(e=>("0"+e.toString(16)).slice(-2)).join("")}function o(t){return function(e){if(2===e.length)return parseInt(e,16);if(e.length<=8){let t=parseInt(e.slice(-2),16);for(let r=1;r<e.length/2;r++)t+=parseInt(e.slice(-2*r-2,-2*r),16)<<7*r;return t}let t=i.default(parseInt(e.slice(-2),16));for(let r=1;r<e.length/2;r++)t=t.add(i.default(parseInt(e.slice(-2*r-2,-2*r),16)).shiftLeft(7*r));return t.toJSNumber()}(e.from(e.from(t,"hex").reverse().map((e,t)=>0===t?e:127&e)).toString("hex"))}function p(t){const r=!(64&e.from(t.slice(0,2),"hex")[0]),n=e.from(t,"hex").map((e,t)=>0===t?63&e:127&e);let o=i.default.zero;for(let e=n.length-1;e>=0;e--)o=0===e?o.or(n[e]):o.or(i.default(n[e]).shiftLeft(7*e-1));return r?o.toJSNumber():o.negate().toJSNumber()}function f(e){return P(e.length)+e.split("").map(e=>e.charCodeAt(0).toString(16)).join("")}function h(e){if(0===parseInt(e.substring(0,8),16))return"";const t=e.slice(8);let r="";for(let e=0;e<t.length;e+=2)r+=String.fromCharCode(parseInt(t.substring(e,e+2),16));return r}function d(t){if(44!==t.length&&42!==t.length)throw new Error("Incorrect hex length to parse an address");let r=44===t.length?t.substring(0,4):"00"+t.substring(0,2),n=44===t.length?4:2;if("0000"===r)return s.default.encode(e.from("06a19f"+t.substring(n),"hex"));if("0001"===r)return s.default.encode(e.from("06a1a1"+t.substring(n),"hex"));if("0002"===r)return s.default.encode(e.from("06a1a4"+t.substring(n),"hex"));if("01"===t.substring(0,2)&&44===t.length)return s.default.encode(e.from("025a79"+t.substring(2,42),"hex"));throw new Error("Unrecognized address type")}function g(t,r){const n=t instanceof e?t:e.from(t);if("tz1"===r)return d("0000"+n.toString("hex"));if("tz2"===r)return d("0001"+n.toString("hex"));if("tz3"===r)return d("0002"+n.toString("hex"));if("kt1"===r)return d(`01${n.toString("hex")}00`);throw new Error(`Unrecognized address hint, '${r}'`)}function m(e){const t=s.default.decode(e).slice(3).toString("hex");if(e.startsWith("tz1"))return"0000"+t;if(e.startsWith("tz2"))return"0001"+t;if(e.startsWith("tz3"))return"0002"+t;if(e.startsWith("KT1"))return"01"+t+"00";throw new Error("Unrecognized address prefix: "+e.substring(0,3))}function y(t){if(66!==t.length&&68!==t.length)throw new Error(`Incorrect hex length, ${t.length} to parse a key`);let r=t.substring(0,2);if("00"===r)return s.default.encode(e.from("0d0f25d9"+t.substring(2),"hex"));if("01"===r&&68===t.length)return s.default.encode(e.from("03fee256"+t.substring(2),"hex"));if("02"===r&&68===t.length)return s.default.encode(e.from("03b28b7f"+t.substring(2),"hex"));throw new Error("Unrecognized key type")}function b(t,r){const n=t instanceof e?t:e.from(t);if("op"===r)return s.default.encode(e.from("0574"+n.toString("hex"),"hex"));if("p"===r)return s.default.encode(e.from("02aa"+n.toString("hex"),"hex"));if("expr"===r)return s.default.encode(e.from("0d2c401b"+n.toString("hex"),"hex"));if(""===r)return s.default.encode(n);throw new Error(`Unsupported hint, '${r}'`)}function P(e){return("0000000"+e.toString(16)).slice(-8)}function $(t,r){return e.from(a.blake2b(t,null,r))}t.writeBoolean=function(e){return e?"ff":"00"},t.readBoolean=function(e){return parseInt(e,16)>0},t.writeInt=r,t.writeSignedInt=n,t.readInt=o,t.readSignedInt=p,t.findInt=function(e,t,r=!1){let n="",s=0;for(;t+2*s<e.length;){let r=t+2*s,o=r+2,i=e.substring(r,o);if(n+=i,s+=1,parseInt(i,16)<128)break}return r?{value:p(n),length:2*s}:{value:o(n),length:2*s}},t.writeString=f,t.readString=h,t.readAddress=d,t.readAddressWithHint=g,t.writeAddress=m,t.readBranch=function(t){if(64!==t.length)throw new Error("Incorrect hex length to parse a branch hash");return s.default.encode(e.from("0134"+t,"hex"))},t.writeBranch=function(e){return s.default.decode(e).slice(2).toString("hex")},t.readPublicKey=y,t.writePublicKey=function(e){if(e.startsWith("edpk"))return"00"+s.default.decode(e).slice(4).toString("hex");if(e.startsWith("sppk"))return"01"+s.default.decode(e).slice(4).toString("hex");if(e.startsWith("p2pk"))return"02"+s.default.decode(e).slice(4).toString("hex");throw new Error("Unrecognized key type")},t.readKeyWithHint=function(t,r){const n=t instanceof e?t:e.from(t);if("edsk"===r)return s.default.encode(e.from("2bf64e07"+n.toString("hex"),"hex"));if("edpk"===r)return y("00"+n.toString("hex"));if("sppk"===r)return y("01"+n.toString("hex"));if("p2pk"===r)return y("02"+n.toString("hex"));throw new Error(`Unrecognized key hint, '${r}'`)},t.writeKeyWithHint=function(e,t){if("edsk"===t||"edpk"===t||"sppk"===t||"p2pk"===t)return s.default.decode(e).slice(4);throw new Error(`Unrecognized key hint, '${t}'`)},t.readSignatureWithHint=function(t,r){const n=t instanceof e?t:e.from(t);if("edsig"===r||r===l.SignerCurve.ED25519)return s.default.encode(e.from("09f5cd8612"+n.toString("hex"),"hex"));if("spsig"===r||r===l.SignerCurve.SECP256K1)return s.default.encode(e.from("0d7365133f"+n.toString("hex"),"hex"));if("p2sig"===r||r===l.SignerCurve.SECP256R1)return s.default.encode(e.from("36f02c34"+n.toString("hex"),"hex"));throw new Error(`Unrecognized signature hint, '${r}'`)},t.writeSignatureWithHint=function(e,t){if("edsig"===t||t===l.SignerCurve.ED25519)return s.default.decode(e).slice("edsig".length);if("spsig"===t||t===l.SignerCurve.SECP256K1)return s.default.decode(e).slice("spsig".length);if("p2sig"===t||t===l.SignerCurve.SECP256R1)return s.default.decode(e).slice("p2sig".length);throw new Error(`Unrecognized key hint, '${t}'`)},t.readBufferWithHint=b,t.writeBufferWithHint=function(e){return s.default.decode(e)},t.computeOperationHash=function(e){return b($(e.bytes,32),"op")},t.computeKeyHash=function(e,t="tz1"){return g($(e,20),t)},t.writePackedData=function(e,t,o=c.TezosParameterFormat.Micheline){switch(t){case"int":return"0500"+n(e);case"nat":return"0500"+r(e);case"string":return"0501"+f(e);case"key_hash":{const t=m(e).slice(2);return`050a${P(t.length/2)}${t}`}case"address":{const t=m(e);return`050a${P(t.length/2)}${t}`}case"bytes":{const t=e.toString("hex");return`050a${P(t.length/2)}${t}`}default:try{if(o===c.TezosParameterFormat.Micheline)return"05"+u.TezosLanguageUtil.translateMichelineToHex(e);if(o===c.TezosParameterFormat.Michelson){const t=u.TezosLanguageUtil.translateMichelsonToMicheline(e);return"05"+u.TezosLanguageUtil.translateMichelineToHex(t)}throw new Error(`Unsupported format, ${o}, provided`)}catch(e){throw new Error(`Unrecognized data type or format: '${t}', '${o}': ${e}`)}}},t.readPackedData=function(e,t){switch(t){case"int":return p(e.slice(4));case"nat":return o(e.slice(4));case"string":return h(e.slice(4));case"key_hash":return d("00"+e.slice(12));case"address":return d(e.slice(12));case"bytes":return e.slice(12);case"michelson":return u.TezosLanguageUtil.normalizeMichelsonWhiteSpace(u.TezosLanguageUtil.hexToMichelson(e.slice(2)).code);default:return u.TezosLanguageUtil.hexToMicheline(e.slice(2)).code}},t.encodeBigMapKey=function(e){return b($(e,32),"expr")},t.simpleHash=$,t.calculateContractAddress=function(e,t){const r=s.default.decode(e).slice(2);let n=[];for(let e=0;e<r.length;e++)n.push(r[e]);n=n.concat([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]);const o=a.blake2b(new Uint8Array(n),null,20),i=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(new Uint8Array([2,90,121]),o);return s.default.encode(i)}}(t.TezosMessageUtils||(t.TezosMessageUtils={}))}).call(this,r(0).Buffer)},function(e,t,r){var n=r(0),o=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=i),s(o,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,r){return(a=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&s(o,r.prototype),o}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.r(t),r.d(t,"JSONPath",(function(){return y}));var h=Object.prototype.hasOwnProperty;function d(e,t){return(e=e.slice()).push(t),e}function g(e,t){return(t=t.slice()).unshift(e),t}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,r,n=(t=a,r=i(),function(){var e,n=o(t);if(r){var s=o(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return c(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,t.value=e,t.name="NewError",t}return a}(u(Error));function y(e,t,r,o,s){if(!(this instanceof y))try{return new y(e,t,r,o,s)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(s=o,o=r,r=t,t=e,e=null);var i=e&&"object"===n(e);if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!h.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||o||null,this.otherTypeCallback=e.otherTypeCallback||s||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){var a={path:i?e.path:t};i?"json"in e&&(a.json=e.json):a.json=r;var u=this.evaluate(a);if(!u||"object"!==n(u))throw new m(u);return u}}y.prototype.evaluate=function(e,t,r,o){var s=this,i=this.parent,a=this.parentProperty,u=this.flatten,c=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=o||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===n(e)&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!h.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');t=e.json,u=h.call(e,"flatten")?e.flatten:u,this.currResultType=h.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=h.call(e,"sandbox")?e.sandbox:this.currSandbox,c=h.call(e,"wrap")?e.wrap:c,this.currPreventEval=h.call(e,"preventEval")?e.preventEval:this.currPreventEval,r=h.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=h.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=h.call(e,"parent")?e.parent:i,a=h.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(i=i||null,a=a||null,Array.isArray(e)&&(e=y.toPathString(e)),(e||""===e)&&t){var l=y.toPathArray(e);"$"===l[0]&&l.length>1&&l.shift(),this._hasParentSelector=null;var p=this._trace(l,t,["$"],i,a,r).filter((function(e){return e&&!e.isParentSelector}));return p.length?c||1!==p.length||p[0].hasArrExpr?p.reduce((function(e,t){var r=s._getPreferredOutput(t);return u&&Array.isArray(r)?e=e.concat(r):e.push(r),e}),[]):this._getPreferredOutput(p[0]):c?[]:void 0}},y.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":var r=Array.isArray(e.path)?e.path:y.toPathArray(e.path);return e.pointer=y.toPointer(r),e.path="string"==typeof e.path?e.path:y.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return y.toPathString(e[t]);case"pointer":return y.toPointer(e.path);default:throw new TypeError("Unknown result type")}},y.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:y.toPathString(e.path),t(n,r,e)}},y.prototype._trace=function(e,t,r,o,s,i,a,u){var c,l=this;if(!e.length)return c={path:r,value:t,parent:o,parentProperty:s,hasArrExpr:a},this._handleCallback(c,i,"value"),c;var f=e[0],m=e.slice(1),y=[];function b(e){Array.isArray(e)?e.forEach((function(e){y.push(e)})):y.push(e)}if(("string"!=typeof f||u)&&t&&h.call(t,f))b(this._trace(m,t[f],d(r,f),t,f,i,a));else if("*"===f)this._walk(f,m,t,r,o,s,i,(function(e,t,r,n,o,s,i,a){b(l._trace(g(e,r),n,o,s,i,a,!0,!0))}));else if(".."===f)b(this._trace(m,t,r,o,s,i,a)),this._walk(f,m,t,r,o,s,i,(function(e,t,r,o,s,i,a,u){"object"===n(o[e])&&b(l._trace(g(t,r),o[e],d(s,e),o,e,u,!0))}));else{if("^"===f)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:m,isParentSelector:!0};if("~"===f)return c={path:d(r,f),value:s,parent:o,parentProperty:null},this._handleCallback(c,i,"property"),c;if("$"===f)b(this._trace(m,t,r,null,null,i,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(f))b(this._slice(f,m,t,r,o,s,i));else if(0===f.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(f,m,t,r,o,s,i,(function(e,t,r,n,o,s,i,a){l._eval(t.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),n[e],e,o,s,i)&&b(l._trace(g(e,r),n,o,s,i,a,!0))}))}else if("("===f[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");b(this._trace(g(this._eval(f,t,r[r.length-1],r.slice(0,-1),o,s),m),t,r,o,s,i,a))}else if("@"===f[0]){var P=!1,$=f.slice(1,-2);switch($){case"scalar":t&&["object","function"].includes(n(t))||(P=!0);break;case"boolean":case"string":case"undefined":case"function":n(t)===$&&(P=!0);break;case"integer":!Number.isFinite(t)||t%1||(P=!0);break;case"number":Number.isFinite(t)&&(P=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(P=!0);break;case"object":t&&n(t)===$&&(P=!0);break;case"array":Array.isArray(t)&&(P=!0);break;case"other":P=this.currOtherTypeCallback(t,r,o,s);break;case"null":null===t&&(P=!0);break;default:throw new TypeError("Unknown value type "+$)}if(P)return c={path:r,value:t,parent:o,parentProperty:s},this._handleCallback(c,i,"value"),c}else if("`"===f[0]&&t&&h.call(t,f.slice(1))){var v=f.slice(1);b(this._trace(m,t[v],d(r,v),t,v,i,a,!0))}else if(f.includes(",")){var _,A=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}(f.split(","));try{for(A.s();!(_=A.n()).done;){var T=_.value;b(this._trace(g(T,m),t,r,o,s,i,!0))}}catch(e){A.e(e)}finally{A.f()}}else!u&&t&&h.call(t,f)&&b(this._trace(m,t[f],d(r,f),t,f,i,a,!0))}if(this._hasParentSelector)for(var I=0;I<y.length;I++){var S=y[I];if(S&&S.isParentSelector){var D=this._trace(S.expr,t,S.path,o,s,i,a);if(Array.isArray(D)){y[I]=D[0];for(var E=D.length,w=1;w<E;w++)I++,y.splice(I,0,D[w])}else y[I]=D}}return y},y.prototype._walk=function(e,t,r,o,s,i,a,u){if(Array.isArray(r))for(var c=r.length,l=0;l<c;l++)u(l,e,t,r,o,s,i,a);else r&&"object"===n(r)&&Object.keys(r).forEach((function(n){u(n,e,t,r,o,s,i,a)}))},y.prototype._slice=function(e,t,r,n,o,s,i){if(Array.isArray(r)){var a=r.length,u=e.split(":"),c=u[2]&&Number.parseInt(u[2])||1,l=u[0]&&Number.parseInt(u[0])||0,p=u[1]&&Number.parseInt(u[1])||a;l=l<0?Math.max(0,l+a):Math.min(a,l),p=p<0?Math.max(0,p+a):Math.min(a,p);for(var f=[],h=l;h<p;h+=c){this._trace(g(h,t),r,n,o,s,i,!0).forEach((function(e){f.push(e)}))}return f}},y.prototype._eval=function(e,t,r,n,o,s){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=s,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=o,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=r,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=y.toPathString(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},y.cache={},y.toPathString=function(e){for(var t=e,r=t.length,n="$",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+=/^[\*0-9]+$/.test(t[o])?"["+t[o]+"]":"['"+t[o]+"']");return n},y.toPointer=function(e){for(var t=e,r=t.length,n="",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+="/"+t[o].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n},y.toPathArray=function(e){var t=y.cache;if(t[e])return t[e].concat();var r=[],n=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(e,t){return"[#"+(r.push(t)-1)+"]"})).replace(/\['((?:(?!['\]])[\s\S])*)'\]/g,(function(e,t){return"['"+t.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/'?\.'?(?!(?:(?!\[)[\s\S])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?r[t[1]]:e}));return t[e]=n,t[e].concat()};y.prototype.vm={runInNewContext:function(e,t){var r=Object.keys(t),n=[];!function(e,t,r){for(var n=e.length,o=0;o<n;o++){r(e[o])&&t.push(e.splice(o--,1)[0])}}(r,n,(function(e){return"function"==typeof t[e]}));var o=r.map((function(e,r){return t[e]})),s=n.reduce((function(e,r){var n=t[r].toString();return/function/.test(n)||(n="function "+n),"var "+r+"="+n+";"+e}),"");/(["'])use strict\1/.test(e=s+e)||r.includes("arguments")||(e="var arguments = undefined;"+e);var i=(e=e.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),u=i>-1?e.slice(0,i+1)+" return "+e.slice(i+1):" return "+e;return a(Function,l(r).concat([u])).apply(void 0,l(o))}}},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(r(17)),a=o(r(2)),u=r(8),c=r(22),l=r(3),p=r(79),f=r(4),h=r(10),d=r(80),g=s(r(15)).default.fetch,m=s(r(11)).default.log,y=new RegExp(/.*Counter [0-9]{1,} already used for contract.*/,"gm");let b={};!function(t){function r(e,t,r={}){const n=`${e}/${t}`,o=JSON.stringify(r);return m.debug(`TezosNodeWriter.performPostRequest sending ${o}\n->\n${n}`),g(n,{method:"post",body:o,headers:{"Content-Type":"application/json"}})}function o(e,t){m.debug("TezosNodeWriter.forgeOperations: "+JSON.stringify(t));let r=f.TezosMessageUtils.writeBranch(e);return t.forEach(e=>r+=p.TezosMessageCodec.encodeOperation(e)),m.debug("TezosNodeWriter.forgeOperations: "+r),r}function s(e,t,o,s,i,a="main"){return n(this,void 0,void 0,(function*(){const n=[{protocol:o,branch:t,contents:s,signature:i.signature}],u=yield r(e,`chains/${a}/blocks/head/helpers/preapply/operations`,n),c=yield u.text();let l;try{m.debug("TezosNodeWriter.preapplyOperation received "+c),l=JSON.parse(c)}catch(e){throw m.error("TezosNodeWriter.preapplyOperation failed to parse response"),new Error(`Could not parse JSON from response of chains/${a}/blocks/head/helpers/preapply/operation: '${c}' for ${n}`)}return R(c),l}))}function P(e,t,o="main"){return n(this,void 0,void 0,(function*(){const n=yield r(e,"injection/operation?chain="+o,t.bytes.toString("hex")),s=yield n.text();return R(s),s}))}function $(t,r,i,a=u.TezosConstants.HeadBranchOffset){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeReader.getBlockAtOffset(t,a),c=n.hash.slice(0,51),p=o(c,r),h=yield i.signOperation(e.from(u.TezosConstants.OperationGroupWatermark+p,"hex")),d={bytes:e.concat([e.from(p,"hex"),h]),signature:f.TezosMessageUtils.readSignatureWithHint(h,i.getSignerCurve())},g=yield s(t,c,n.protocol,r,d),m=yield P(t,d);return{results:g[0],operationGroupID:m}}))}function v(e,t,r,o,s){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeReader.isManagerKeyRevealedForAccount(e,r),i=o+1;if(n)return s.map((e,t)=>Object.assign(Object.assign({},e),{counter:""+(i+t)}));{const e={kind:"reveal",source:r,fee:u.TezosConstants.DefaultKeyRevealFee.toString(),counter:i.toString(),gas_limit:u.TezosConstants.DefaultKeyRevealGasLimit.toString(),storage_limit:u.TezosConstants.DefaultKeyRevealStorageLimit.toString(),public_key:t};return s.forEach((e,t)=>{const r=o+2+t;e.counter=r.toString()}),[e,...s]}}))}function _(e,t,r,o,s=u.TezosConstants.DefaultDelegationFee,i=u.TezosConstants.HeadBranchOffset,a=!1){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c={kind:"delegation",source:r.publicKeyHash,fee:s.toString(),counter:n.toString(),storage_limit:u.TezosConstants.DefaultDelegationStorageLimit.toString(),gas_limit:u.TezosConstants.DefaultDelegationGasLimit.toString(),delegate:o},p=yield w(e,r,n,c,a);return $(e,p,t,i)}))}function A(e,t,r,n,o,s,i,u,c,l){let p=void 0,f=void 0;return c===a.TezosParameterFormat.Michelson?(p=JSON.parse(h.TezosLanguageUtil.translateMichelsonToMicheline(i)),m.debug(`TezosNodeWriter.constructContractOriginationOperation code translation:\n${i}\n->\n${JSON.stringify(p)}`),f=JSON.parse(h.TezosLanguageUtil.translateMichelsonToMicheline(u)),m.debug(`TezosNodeWriter.constructContractOriginationOperation storage translation:\n${u}\n->\n${JSON.stringify(f)}`)):c===a.TezosParameterFormat.Micheline&&(p=JSON.parse(i),f=JSON.parse(u)),{kind:"origination",source:e.publicKeyHash,fee:n.toString(),counter:l.toString(),gas_limit:s.toString(),storage_limit:o.toString(),balance:t.toString(),delegate:r,script:{code:p,storage:f}}}function T(e,t,r,o,s,i,c,p,f,h,d=a.TezosParameterFormat.Micheline,g=u.TezosConstants.HeadBranchOffset,m=!1){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,a=I(r.publicKeyHash,n,o,s,i,c,p,f,h,d),u=yield w(e,r,n,a,m);return $(e,u,t,g)}))}function I(e,t,r,n,o,s,i,u,c,l=a.TezosParameterFormat.Micheline){let p={destination:r,amount:n.toString(),storage_limit:s.toString(),gas_limit:i.toString(),counter:t.toString(),fee:o.toString(),source:e,kind:"transaction"};if(void 0!==c){if(l===a.TezosParameterFormat.Michelson){const e=h.TezosLanguageUtil.translateParameterMichelsonToMicheline(c);p.parameters={entrypoint:u||"default",value:JSON.parse(e)}}else if(l===a.TezosParameterFormat.Micheline)p.parameters={entrypoint:u||"default",value:JSON.parse(c)};else if(l===a.TezosParameterFormat.MichelsonLambda){const e=h.TezosLanguageUtil.translateMichelsonToMicheline("code "+c);p.parameters={entrypoint:u||"default",value:JSON.parse(e)}}}else void 0!==u&&(p.parameters={entrypoint:u,value:[]});return p}function S(e,t,r){return n(this,void 0,void 0,(function*(){let n=[];for(let o=0;o<r.length;o++){r[o];let s={gas:0,storageCost:0};if(o>0){const n=r.slice(0,o);s=yield D(e,t,...n)}const i=r.slice(0,o+1),a=yield D(e,t,...i),c=a.gas-s.gas,l=a.storageCost-s.storageCost;n.push({gas:c+u.TezosConstants.GasLimitPadding,storageCost:l+u.TezosConstants.StorageLimitPadding})}const s=1===r.filter(e=>"reveal"===e.kind).length?1270:0,i=n.map(e=>e.gas).reduce((e,t)=>e+t,0),a=n.map(e=>e.storageCost).reduce((e,t)=>e+t,0),c=o("BMLxA4tQjiu1PT2x3dMiijgvMTQo8AVxkPBPpdtM8hCfiyiC1jz",r).length/2+64;let l=s+Math.ceil(i/10)+u.TezosConstants.BaseOperationFee+c+u.TezosConstants.DefaultBakerVig;const p=Math.ceil(a*u.TezosConstants.StorageRate);return Number(r[0].fee)<l&&(l+=16),m.debug("group estimate",n,l,p),{operationResources:n,estimatedFee:l,estimatedStorageBurn:p}}))}function D(e,t,...r){return n(this,void 0,void 0,(function*(){const n=Math.floor(u.TezosConstants.BlockGasCap/r.length).toString(),s=[...r].map(e=>Object.assign({gas_limit:n,storage_limit:u.TezosConstants.OperationStorageCap.toString()},e)),i=yield E(e,t,...s);let a=0,c=0,l=0;for(let e of i.contents){try{a+=parseInt(e.metadata.operation_result.consumed_gas)||0,c+=parseInt(e.metadata.operation_result.paid_storage_size_diff)||0,"origination"===e.kind||e.metadata.operation_result.allocated_destination_contract?c+=u.TezosConstants.EmptyAccountStorageBurn:"reveal"===e.kind&&(l+=1270)}catch(e){}const t=e.metadata.internal_operation_results;if(void 0!==t)for(const e of t){const t=e.result;a+=parseInt(t.consumed_gas)||0,c+=parseInt(t.paid_storage_size_diff)||0,"origination"===e.kind&&(c+=u.TezosConstants.EmptyAccountStorageBurn)}}const p=o("BMLxA4tQjiu1PT2x3dMiijgvMTQo8AVxkPBPpdtM8hCfiyiC1jz",r).length/2+64,f=l+Math.ceil(a/10)+u.TezosConstants.BaseOperationFee+p+u.TezosConstants.DefaultBakerVig,h=Math.ceil(c*u.TezosConstants.StorageRate);return m.debug(`TezosNodeWriter.estimateOperation; gas: ${a}, storage: ${c}, fee estimate: ${f}, burn estimate: ${h}`),{gas:a,storageCost:c,estimatedFee:f,estimatedStorageBurn:h}}))}function E(e,t,...o){return n(this,void 0,void 0,(function*(){const n=yield r(e,`chains/${t}/blocks/head/helpers/scripts/run_operation`,{chain_id:"NetXdQprcVkpaWU",operation:{branch:"BL94i2ShahPx3BoNs6tJdXDdGeoJ9ukwujUA2P8WJwULYNdimmq",contents:o,signature:"edsigu6xFLH2NpJ1VcYshpjW99Yc1TAL1m2XBqJyXrxcZQgBMo8sszw2zm626yjpA3pWMhjpsahLrWdmvX9cqhd4ZEUchuBuFYy"}}),s=yield n.text();R(s);return JSON.parse(s)}))}function w(e,t,r,o,s=!1){return n(this,void 0,void 0,(function*(){const n=yield v(e,t.publicKey,t.publicKeyHash,r-1,[o]);if(s){const t=yield S(e,"main",n);n[0].fee=t.estimatedFee.toString();for(let e=0;e<n.length;e++)n[e].gas_limit=t.operationResources[e].gas.toString(),n[e].storage_limit=t.operationResources[e].storageCost.toString()}return n}))}function R(e){let t="";try{const r=JSON.parse(e),n=Array.isArray(r)?r:[r];"kind"in n[0]?t=n.map(e=>e.msg?y.test(e.msg)?`(${e.kind}: ${e.id}, counter already used)`:`(${e.kind}: ${e.id}, ${e.msg})`:`(${e.kind}: ${e.id})`).join(", "):1===n.length&&1===n[0].contents.length&&"activate_account"===n[0].contents[0].kind||(t=n.map(e=>e.contents).map(e=>e.map(e=>e.metadata.operation_result).concat(e.flatMap(e=>e.metadata.internal_operation_results).filter(e=>!!e).map(e=>e.result)).map(e=>function(e){if("applied"!==e.status){let t=e.status;if(e.errors&&e.errors.length>0)try{t+=e.errors.map(e=>`(${e.kind}: ${e.id})`).join(", ")}catch(t){m.error(`failed to parse errors from '${e}'\n, PLEASE report this to the maintainers`)}return t}return""}(e)).filter(e=>e.length>0).join(", ")).join(", "))}catch(r){if(e.startsWith("Failed to parse the request body: "))t=e.slice(34);else{const t=e.replace(/\"/g,"").replace(/\n/,"");51===t.length&&"o"===t.charAt(0)||m.error(`failed to parse errors: '${r}' from '${e}'\n, PLEASE report this to the maintainers`)}}if(t.length>0){m.debug("errors found in response:\n"+e);let r=new c.ServiceResponseError(200,"","","",e);throw r.message=t,r}}t.forgeOperations=o,t.forgeOperationsRemotely=function(e,t,o,s="main"){return n(this,void 0,void 0,(function*(){m.debug("TezosNodeWriter.forgeOperations:"),m.debug(JSON.stringify(o)),m.warn("forgeOperationsRemotely() is not intrinsically trustless");const n=yield r(e,`chains/${s}/blocks/head/helpers/forge/operations`,{branch:t,contents:o}),i=(yield n.text()).replace(/\n/g,"").replace(/['"]+/g,"");let a=Array.from(o.map(e=>e.kind)),u=!1;for(let e of a)if(u=["reveal","transaction","delegation","origination"].includes(e),u)break;if(u){const e=p.TezosMessageCodec.parseOperationGroup(i);for(let t=0;t<o.length;t++){const r=o[t],n=e[t];if("transaction"===r.kind){if(n.kind!==r.kind||n.fee!==r.fee||n.amount!==r.amount||n.destination!==r.destination)throw new Error("Forged transaction failed validation.")}else if("delegation"===r.kind){if(n.kind!==r.kind||n.fee!==r.fee||n.delegate!==r.delegate)throw new Error("Forged delegation failed validation.")}else if("origination"===r.kind&&(n.kind!==r.kind||n.fee!==r.fee||n.balance!==r.balance||n.spendable!==r.spendable||n.delegatable!==r.delegatable||n.delegate!==r.delegate||void 0!==n.script))throw new Error("Forged origination failed validation.")}}return i}))},t.packDataRemotely=function(e,t,o,s=u.TezosConstants.OperationGasCap,i="main"){return n(this,void 0,void 0,(function*(){m.debug("TezosNodeWriter.packDataRemotely:"),m.debug(JSON.stringify(t)),m.warn("packDataRemotely() is not intrinsically trustless");const n=yield r(e,`chains/${i}/blocks/head/helpers/scripts/pack_data`,{data:t,type:o,gas:""+s}),a=yield n.json();try{return a.packed}catch(e){throw new Error(`Could not pack ${t} as ${o}; error ${e}`)}}))},t.preapplyOperation=s,t.injectOperation=P,t.sendOperation=$,t.queueOperation=function(e,t,r,n,o=25){const s=i.blake2s(`${e}${n.publicKeyHash}`,null,16);b[s]||(b[s]=d.TezosOperationQueue.createQueue(e,r,n,o)),b[s].addOperations(...t)},t.getQueueStatus=function(e,t){const r=i.blake2s(`${e}${t.publicKeyHash}`,null,16);return b[r]?b[r].getStatus():-1},t.appendRevealOperation=v,t.sendTransactionOperation=function(e,t,r,o,s,i=u.TezosConstants.DefaultSimpleTransactionFee,a=u.TezosConstants.HeadBranchOffset,c=!1){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,p={destination:o,amount:s.toString(),storage_limit:u.TezosConstants.DefaultTransactionStorageLimit+"",gas_limit:u.TezosConstants.DefaultTransactionGasLimit+"",counter:n.toString(),fee:i.toString(),source:r.publicKeyHash,kind:"transaction"},f=yield w(e,r,n,p,c);return $(e,f,t,a)}))},t.sendDelegationOperation=_,t.sendUndelegationOperation=function(e,t,r,o=u.TezosConstants.DefaultDelegationFee,s=u.TezosConstants.HeadBranchOffset,i=!1){return n(this,void 0,void 0,(function*(){return _(e,t,r,void 0,o,s,i)}))},t.sendContractOriginationOperation=function(e,t,r,o,s,i,c,p,f,h,d=a.TezosParameterFormat.Micheline,g=u.TezosConstants.HeadBranchOffset,m=!1){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,a=A(r,o,s,i,c,p,f,h,d,n),u=yield w(e,r,n,a,m);return $(e,u,t,g)}))},t.constructContractOriginationOperation=A,t.sendContractInvocationOperation=T,t.constructContractInvocationOperation=I,t.sendContractPing=function(e,t,r,o,s,i,a,u){return n(this,void 0,void 0,(function*(){return T(e,t,r,o,0,s,i,a,u,void 0)}))},t.sendKeyRevealOperation=function(e,t,r,o=u.TezosConstants.DefaultKeyRevealFee,s=u.TezosConstants.HeadBranchOffset){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,i={kind:"reveal",source:r.publicKeyHash,fee:o+"",counter:n.toString(),gas_limit:"10000",storage_limit:"0",public_key:r.publicKey};return $(e,[i],t,s)}))},t.sendIdentityActivationOperation=function(e,t,r,n){return $(e,[{kind:"activate_account",pkh:r.publicKeyHash,secret:n}],t)},t.testContractInvocationOperation=function(e,t,r,o,s,i,u,c,p,f,h=a.TezosParameterFormat.Micheline){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,a=I(r.publicKeyHash,n,o,s,i,u,c,p,f,h);return D(e,t,a)}))},t.testContractDeployOperation=function(e,t,r,o,s,i,u,c,p,f,h=a.TezosParameterFormat.Micheline){return n(this,void 0,void 0,(function*(){const n=(yield l.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,a=A(r,o,s,i,u,c,p,f,h,n);return D(e,t,a)}))},t.estimateOperationGroup=S,t.estimateOperation=D,t.dryRunOperation=E,t.prepareOperationGroup=function(e,t,r,o,s=!1){return n(this,void 0,void 0,(function*(){const n=yield v(e,t.publicKey,t.publicKeyHash,r,o);if(s){const t=yield S(e,"main",n);n[0].fee=t.estimatedFee.toString();for(let e=0;e<n.length;e++)n[e].gas_limit=t.operationResources[e].gas.toString(),n[e].storage_limit=t.operationResources[e].storageCost.toString()}return n}))},t.parseRPCError=R}(t.TezosNodeWriter||(t.TezosNodeWriter={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OperationGroupWatermark="03",e.DefaultSimpleTransactionFee=1420,e.DefaultTransactionStorageLimit=496,e.DefaultTransactionGasLimit=10600,e.DefaultDelegationFee=1258,e.DefaultDelegationStorageLimit=0,e.DefaultDelegationGasLimit=1100,e.DefaultAccountOriginationFee=1266,e.DefaultAccountOriginationStorageLimit=496,e.DefaultAccountOriginationGasLimit=10600,e.DefaultKeyRevealFee=1270,e.DefaultKeyRevealStorageLimit=0,e.DefaultKeyRevealGasLimit=1100,e.P005ManagerContractWithdrawalGasLimit=26283,e.P005ManagerContractDepositGasLimit=15285,e.P005ManagerContractWithdrawalStorageLimit=496,e.P001StorageRate=1e3,e.P007StorageRate=250,e.StorageRate=e.P007StorageRate,e.BaseOperationFee=100,e.P009BlockGasCap=104e5,e.P010BlockGasCap=52e5,e.P007OperationGasCap=104e4,e.OperationGasCap=e.P007OperationGasCap,e.BlockGasCap=e.P010BlockGasCap,e.P010OperationStorageCap=6e4,e.P011OperationStorageCap=32768,e.OperationStorageCap=e.P011OperationStorageCap,e.EmptyAccountStorageBurn=257,e.DefaultBakerVig=200,e.GasLimitPadding=1e3,e.StorageLimitPadding=25,e.HeadBranchOffset=54,e.MaxBranchOffset=64,e.DefaultBatchDelay=25,e.DefaultBlockTime=60}(t.TezosConstants||(t.TezosConstants={}))},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(17)),i=r(10),a=r(3);!function(t){t.verifyDestination=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=yield a.TezosNodeReader.getAccountForBlock(t,"head",r);if(!n.script)throw new Error("No code found at "+r);const i=e.from(s.blake2s(JSON.stringify(n.script.code),null,16)).toString("hex");if(i!==o)throw new Error(`Contract code hash "${i}" doesn't match expected ${o}`);return!0}))},t.verifyScript=function(t,r){const n=e.from(s.blake2s(i.TezosLanguageUtil.preProcessMichelsonScript(t).join("\n"),null,16)).toString("hex");if(n!==r)throw new Error(`Contract code hash "${n}" doesn't match expected ${r}`);return!0},t.clearRPCOperationGroupHash=function(e){return e.replace(/\"/g,"").replace(/\n/,"")}}(t.TezosContractUtils||(t.TezosContractUtils={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(48)),s=n(r(76)),i=n(r(43)),a=r(4),u=["prim","args","annots"];!function(t){function r(e){const t=new i.Parser(i.Grammar.fromCompiled(s.default));return d(e).forEach(e=>{t.feed(e)}),t.results[0]}function n(e,t){let r=e;e.script&&(r=e.script);for(let e=0;e<r.length;e++)if(r[e].prim===t)return JSON.stringify(r[e],null,1);throw new Error(t+" key was not found")}function c(e){const t=new i.Parser(i.Grammar.fromCompiled(o.default));return t.feed(g(e)),t.results.join("")}function l(t){let r=0;const n=parseInt(t.substring(r,r+8),16);r+=8;const o=e.from(t.substring(r,r+2*n),"hex").toString();return r+=2*n,{code:o,consumed:r}}function p(e,t){return o.getKeywordForCode(parseInt(e.substring(t,t+2),16))}function f(e,t){return p(e,t).slice(1,-1)}function h(e,t=!0){const r=l(e);return{code:t?r.code.split(" ").map(e=>`"${e}"`).join(", "):r.code,consumed:r.consumed}}function d(e){let t=new Map;t.parameter=e.search(/(^|\s+)parameter/m),t.storage=e.search(/(^|\s+)storage/m),t.code=e.search(/(^|\s+)code/m);const r=Object.values(t).sort((e,t)=>Number(e)-Number(t));t[Object.keys(t).find(e=>t[e]===r[0])+""]=e.substring(r[0],r[1]),t[Object.keys(t).find(e=>t[e]===r[1])+""]=e.substring(r[1],r[2]),t[Object.keys(t).find(e=>t[e]===r[2])+""]=e.substring(r[2]);return[t.parameter,t.storage,t.code].map(e=>e.trim().split("\n").map(e=>e.replace(/\#[\s\S]+$/,"").trim()).filter(e=>e.length>0).join(" "))}function g(e){return e.replace(/\n/g," ").replace(/ +/g," ").replace(/\[{/g,"[ {").replace(/}\]/g,"} ]").replace(/},{/g,"}, {").replace(/\]}/g,"] }").replace(/":"/g,'": "').replace(/":\[/g,'": [').replace(/{"/g,'{ "').replace(/"}/g,'" }').replace(/,"/g,', "').replace(/","/g,'", "').replace(/\[\[/g,"[ [").replace(/\]\]/g,"] ]").replace(/\["/g,'[ "').replace(/"\]/g,'" ]').replace(/\[ +\]/g,"[]").trim()}t.hexToMicheline=function e(t){if(t.length<2)throw new Error(`Malformed Micheline fragment '${t}'`);let r="",n=0,o=t.substring(n,n+2);n+=2;try{switch(o){case"00":{const e=a.TezosMessageUtils.findInt(t.substring(n),0,!0);r+=`{ "int": "${e.value}" }`,n+=e.length;break}case"01":{const e=l(t.substring(n));r+=`{ "string": "${e.code}" }`,n+=e.consumed;break}case"02":{const o=parseInt(t.substring(n,n+8),16);n+=8;let s=[],i=0;for(;i<o;){let r=e(t.substring(n));s.push(r.code),i+=r.consumed/2,n+=r.consumed}r+=0===o?"[]":`[ ${s.join(", ")} ]`;break}case"03":r+=`{ "prim": ${p(t,n)} }`,n+=2;break;case"04":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const e=h(t.substring(n));r+=`"annots": [ ${e.code} ] }`,n+=e.consumed;break}case"05":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));r+=`"args": [ ${o.code} ] }`,n+=o.consumed;break}case"06":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));r+=`"args": [ ${o.code} ], `,n+=o.consumed;const s=h(t.substring(n));r+=`"annots": [ ${s.code} ] }`,n+=s.consumed;break}case"07":{r+=`{ "prim": ${p(t,n)}, `,n+=2;let o=[],s=e(t.substring(n));o.push(s.code),n+=s.consumed,s=e(t.substring(n)),o.push(s.code),n+=s.consumed,r+=`"args": [ ${o.join(", ")} ] }`;break}case"08":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));n+=o.consumed;const s=e(t.substring(n));n+=s.consumed,r+=`"args": [ ${o.code}, ${s.code} ], `;const i=h(t.substring(n));r+=`"annots": [ ${i.code} ] }`,n+=i.consumed;break}case"09":{r+=`{ "prim": ${p(t,n)}, `,n+=2;let o=e("02"+t.substring(n));if(r+='"args": '+o.code,n+=o.consumed-2,"00000000"!==t.substring(n,n+8)){const e=h(t.substring(n));e.code.length>2&&(r+=`, "annots": [ ${e.code} ] }`),n+=e.consumed}else r+=" }",n+=8;break}case"0a":{const e=parseInt(t.substring(n,n+8),16);n+=8,r+=`{ "bytes": "${t.substring(n,n+2*e)}" }`,n+=2*e;break}default:throw new Error(`Unknown Micheline field type '${o}' at offset ${n} of '${t}'`)}}catch(e){const o=`Nested hex parsing error (${e.message}) after: ${t}, ${n}, ${r}`;throw new Error(o)}return{code:r,consumed:n}},t.hexToMichelson=function e(t){if(t.length<2)throw new Error(`Malformed Michelson fragment '${t}'`);let r="",n=0,o=t.substring(n,n+2);n+=2;try{switch(o){case"00":{const e=a.TezosMessageUtils.findInt(t.substring(n),0,!0);r+=""+e.value,n+=e.length;break}case"01":{const e=l(t.substring(n));r+=`"${e.code}"`,n+=e.consumed;break}case"02":{const o=parseInt(t.substring(n,n+8),16);n+=8;let s=[],i=0;for(;i<o;){let r=e(t.substring(n));s.push(r.code),i+=r.consumed/2,n+=r.consumed}r+=0===o?"[]":`[ ${s.join(" ")} ]`;break}case"03":r+=`( ${f(t,n)} )`,n+=2;break;case"04":{r+=`( ${f(t,n)} `,n+=2;const e=h(t.substring(n),!1);r+=` ${e.code} )`,n+=e.consumed;break}case"05":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));r+=` ${o.code} )`,n+=o.consumed;break}case"06":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));r+=` ${o.code} `,n+=o.consumed;const s=h(t.substring(n),!1);r+=` ${s.code} )`,n+=s.consumed;break}case"07":{r+=`( ${f(t,n)} `,n+=2;let o=[],s=e(t.substring(n));o.push(s.code),n+=s.consumed,s=e(t.substring(n)),o.push(s.code),n+=s.consumed,r+=` ${o.join(" ")} )`;break}case"08":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));n+=o.consumed;const s=e(t.substring(n));n+=s.consumed,r+=` ${o.code} ${s.code} `;const i=h(t.substring(n),!1);r+=` ${i.code} )`,n+=i.consumed;break}case"09":{r+=`( ${f(t,n)} `,n+=2;let o=e("02"+t.substring(n));if(r+='"args": '+o.code,n+=o.consumed-2,"00000000"!==t.substring(n,n+8)){const e=h(t.substring(n),!1);e.code.length>2&&(r+=` ${e.code} )`),n+=e.consumed}else r+=" )",n+=8;break}case"0a":{const e=parseInt(t.substring(n,n+8),16);n+=8,r+="0x"+t.substring(n,n+2*e),n+=2*e;break}default:throw new Error(`Unknown Michelson field type '${o}' at offset ${n} of '${t}'`)}}catch(e){const o=`Nested hex parsing error (${e.message}) after: ${t}, ${n}, ${r}`;throw new Error(o)}return{code:r,consumed:n}},t.translateMichelsonToMicheline=r,t.translateParameterMichelsonToMicheline=function(e){return r(e)},t.translateMichelsonToHex=function(e){return function(e){const t=JSON.parse(e);let r=[];return r.push(n(t,"code")),r.push(n(t,"storage")),r}(r(e)).map(e=>g(e)).map(e=>c(e)).reduce((e,t)=>e+("0000000"+(t.length/2).toString(16)).slice(-8)+t,"")},t.translateMichelineToHex=c,t.overrideKeywordList=function(e){o.setKeywordList(e)},t.restoreKeywordList=function(){o.setKeywordList(o.DefaultMichelsonKeywords)},t.preProcessMichelsonScript=d,t.normalizePrimitiveRecordOrder=function e(t){return Array.isArray(t)?t.map(e):"object"==typeof t?Object.keys(t).sort((e,t)=>u.indexOf(e)-u.indexOf(t)).reduce((r,n)=>Object.assign(Object.assign({},r),{[n]:e(t[n])}),{}):t},t.normalizeMichelineWhiteSpace=g,t.normalizeMichelsonWhiteSpace=function(e){return e.replace(/\s{2,}/g," ").replace(/\( /g,"(").replace(/ \)/g,")")},t.stripComments=function(e){return e.trim().split("\n").map(e=>e.replace(/\#[\s\S]+$/,"").trim()).filter(e=>e.length>0).join(" ")}}(t.TezosLanguageUtil||(t.TezosLanguageUtil={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static setLogger(e){Object.assign(this.log,e)}}t.default=n,n.log={}},function(e,t,r){"use strict";var n=r(21),o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=p;var s=r(16);s.inherits=r(1);var i=r(34),a=r(26);s.inherits(p,i);for(var u=o(a.prototype),c=0;c<u.length;c++){var l=u[c];p.prototype[l]||(p.prototype[l]=a.prototype[l])}function p(e){if(!(this instanceof p))return new p(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(5).Buffer;function o(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,o=this._blockSize,s=e.length,i=this._len,a=0;a<s;){for(var u=i%o,c=Math.min(s-a,o-u),l=0;l<c;l++)r[u+l]=e[a+l];a+=c,(i+=c)%o==0&&this._update(r)}return this._len+=s,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static setFetch(e){this.actualFetch=e}}t.default=n,n.fetch=(e,t)=>n.actualFetch(e,t),n.Referrer="conseiljs://5.0.9-beta.5",n.UserAgent="ConseilJS/5.0.9-beta.5"},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(0).Buffer)},function(e,t,r){var n=r(74),o=r(75);e.exports={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:o.blake2s,blake2sHex:o.blake2sHex,blake2sInit:o.blake2sInit,blake2sUpdate:o.blake2sUpdate,blake2sFinal:o.blake2sFinal}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(19),i=o(r(11)),a=r(29),u=r(23),c=i.default.log;!function(e){function t(e,t,r,o){return n(this,void 0,void 0,(function*(){return a.ConseilDataClient.executeEntityQuery(e,"tezos",t,r,o)}))}function r(e,r){return n(this,void 0,void 0,(function*(){const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addOrdering(u.ConseilQueryBuilder.blankQuery(),"level",s.ConseilSortDirection.DESC),1);return(yield t(e,r,"blocks",n))[0]}))}function o(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"blocks",o)}))}function i(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"operations",o)}))}function l(e,t,o,a,l=60){return n(this,void 0,void 0,(function*(){if(a<=0)throw new Error("Invalid duration");const n=(yield r(e,t)).level,p=(new Date).getTime()-18e4,f=p+18e4+a*l*1e3;c.debug(`TezosConseilClient.awaitOperationConfirmation looking for ${o} since ${n} at ${new Date(p).toUTCString()}, +${a}`);let h=n,d=u.ConseilQueryBuilder.blankQuery();for(d=u.ConseilQueryBuilder.addPredicate(d,"operation_group_hash",s.ConseilOperator.EQ,[o],!1),d=u.ConseilQueryBuilder.addPredicate(d,"timestamp",s.ConseilOperator.AFTER,[p],!1),d=u.ConseilQueryBuilder.setLimit(d,1);n+a>h;){const o=yield i(e,t,d);if(o.length>0)return o[0];if(h=(yield r(e,t)).level,n+a<h)break;if((new Date).getTime()>f)break;yield new Promise(e=>setTimeout(e,1e3*l))}throw new Error(`Did not observe ${o} on ${t} in ${a} block${a>1?"s":""} since ${n}`)}))}e.getTezosEntityData=t,e.getBlockHead=r,e.getBlock=function(e,o,i){return n(this,void 0,void 0,(function*(){if("head"===i)return r(e,o);const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"hash",s.ConseilOperator.EQ,[i],!1),1);return(yield t(e,o,"blocks",n))[0]}))},e.getBlockByLevel=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"level",s.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"blocks",n))[0]}))},e.getAccount=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"account_id",s.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"accounts",n))[0]}))},e.getOperationGroup=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"hash",s.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"operation_groups",n))[0]}))},e.getOperation=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"operation_group_hash",s.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"operations",n))[0]}))},e.getBlocks=o,e.getAccounts=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"accounts",o)}))},e.getOperationGroups=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"operation_groups",o)}))},e.getOperations=i,e.getFeeStatistics=function(e,r,o){return n(this,void 0,void 0,(function*(){let n=u.ConseilQueryBuilder.blankQuery();return n=u.ConseilQueryBuilder.addPredicate(n,"kind",s.ConseilOperator.EQ,[o]),n=u.ConseilQueryBuilder.addOrdering(n,"timestamp",s.ConseilSortDirection.DESC),n=u.ConseilQueryBuilder.setLimit(n,1),t(e,r,"fees",n)}))},e.getProposals=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"proposals",o)}))},e.getBakers=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"bakers",o)}))},e.getBallots=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"ballots",o)}))},e.awaitOperationConfirmation=l,e.awaitOperationForkConfirmation=function(e,t,i,a,c){return n(this,void 0,void 0,(function*(){const n=yield l(e,t,i,a),p=n.block_level,f=n.block_hash;let h=p;for(yield new Promise(e=>setTimeout(e,50*c*1e3));h<p+c;){if(h=(yield r(e,t)).level,h>=p+c)break;yield new Promise(e=>setTimeout(e,6e4))}let d=u.ConseilQueryBuilder.blankQuery();d=u.ConseilQueryBuilder.addFields(d,"level","hash","predecessor"),d=u.ConseilQueryBuilder.addPredicate(d,"level",s.ConseilOperator.BETWEEN,[p-1,p+c]),d=u.ConseilQueryBuilder.setLimit(d,2*c);const g=yield o(e,t,d);return g.length===c+2?function(e,t,r){try{return e.sort((e,t)=>parseInt(e.level)-parseInt(t.level)).reduce((n,o,s)=>{if(!n)throw new Error("Block sequence mismatch");return s>1?o.predecessor===e[s-1].hash:1===s?n&&o.level===t&&o.hash===r&&o.predecessor===e[s-1].hash:0===s||void 0},!0)}catch(e){return!1}}(g,p,f):function(e,t,r,n){throw new Error("Not implemented")}()}))},e.getBigMapData=function(e,r){return n(this,void 0,void 0,(function*(){if(!r.startsWith("KT1"))throw new Error("Invalid address");const n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addFields(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"account_id",s.ConseilOperator.EQ,[r],!1),"big_map_id"),100),o=yield t(e,e.network,"originated_account_maps",n);if(o.length<1)return;const i=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"big_map_id",o.length>1?s.ConseilOperator.IN:s.ConseilOperator.EQ,o.map(e=>e.big_map_id),!1),100),a=yield t(e,e.network,"big_maps",i),c=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.addFields(u.ConseilQueryBuilder.addPredicate(u.ConseilQueryBuilder.blankQuery(),"big_map_id",o.length>1?s.ConseilOperator.IN:s.ConseilOperator.EQ,o.map(e=>e.big_map_id),!1),"big_map_id","key","value"),1e3),l=yield t(e,e.network,"big_map_contents",c);let p=[];for(const e of a){const t={index:Number(e.big_map_id),key:e.key_type,value:e.value_type};let r=[];for(const e of l.filter(e=>e.big_map_id===t.index))r.push({key:JSON.stringify(e.key),value:JSON.stringify(e.value)});p.push({definition:t,content:r})}return{contract:r,maps:p}}))},e.getBigMapValueForKey=function(e,r,o="",i=-1){return n(this,void 0,void 0,(function*(){if(!o.startsWith("KT1"))throw new Error("Invalid address");if(r.length<1)throw new Error("Invalid key");if(i<0&&0===o.length)throw new Error("One of contract or mapIndex must be specified");if(i<0&&o.length>0){let r=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.blankQuery(),1);r=u.ConseilQueryBuilder.addFields(r,"big_map_id"),r=u.ConseilQueryBuilder.addPredicate(r,"account_id",s.ConseilOperator.EQ,[o],!1),r=u.ConseilQueryBuilder.addOrdering(r,"big_map_id",s.ConseilSortDirection.DESC);const n=yield t(e,e.network,"originated_account_maps",r);if(n.length<1)throw new Error("Could not find any maps for "+o);i=n[0]}let n=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.blankQuery(),1);n=u.ConseilQueryBuilder.addFields(n,"value"),n=u.ConseilQueryBuilder.addPredicate(n,"key",s.ConseilOperator.EQ,[r],!1),n=u.ConseilQueryBuilder.addPredicate(n,"big_map_id",s.ConseilOperator.EQ,[i],!1);const a=yield t(e,e.network,"big_map_contents",n);if(a.length<1)throw new Error(`Could not a value for key ${r} in map ${i}`);return a[0]}))},e.getEntityQueryForId=function(e){let t=u.ConseilQueryBuilder.setLimit(u.ConseilQueryBuilder.blankQuery(),1);if("number"==typeof e){if(Number(e)<0)throw new Error("Invalid numeric id parameter");return{entity:"blocks",query:u.ConseilQueryBuilder.addPredicate(t,"level",s.ConseilOperator.EQ,[e],!1)}}if("string"==typeof e){const r=String(e);if(r.startsWith("tz1")||r.startsWith("tz2")||r.startsWith("tz3")||r.startsWith("KT1"))return{entity:"accounts",query:u.ConseilQueryBuilder.addPredicate(t,"account_id",s.ConseilOperator.EQ,[e],!1)};if(r.startsWith("B"))return{entity:"blocks",query:u.ConseilQueryBuilder.addPredicate(t,"hash",s.ConseilOperator.EQ,[e],!1)};if(r.startsWith("o"))return t=u.ConseilQueryBuilder.setLimit(t,1e3),t=u.ConseilQueryBuilder.addPredicate(t,"operation_group_hash",s.ConseilOperator.EQ,[e],!1),t=u.ConseilQueryBuilder.addOrdering(t,"nonce",s.ConseilSortDirection.DESC),{entity:"operations",query:t}}throw new Error("Invalid id parameter")},e.countKeysInMap=function(e,t){return n(this,void 0,void 0,(function*(){let r=u.ConseilQueryBuilder.blankQuery();r=u.ConseilQueryBuilder.addFields(r,"key"),r=u.ConseilQueryBuilder.addPredicate(r,"big_map_id",s.ConseilOperator.EQ,[t]),r=u.ConseilQueryBuilder.addAggregationFunction(r,"key",s.ConseilFunction.count),r=u.ConseilQueryBuilder.setLimit(r,1);const n=yield a.ConseilDataClient.executeEntityQuery(e,"tezos",e.network,"big_map_contents",r);try{return n[0].count_key}catch(e){return-1}}))}}(t.TezosConseilClient||(t.TezosConseilClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ASC="asc",e.DESC="desc"}(t.ConseilSortDirection||(t.ConseilSortDirection={})),function(e){e.BETWEEN="between",e.EQ="eq",e.IN="in",e.LIKE="like",e.LT="lt",e.BEFORE="before",e.GT="gt",e.AFTER="after",e.STARTSWITH="startsWith",e.ENDSWITH="endsWith",e.ISNULL="isnull"}(t.ConseilOperator||(t.ConseilOperator={})),function(e){e.avg="avg",e.count="count",e.max="max",e.min="min",e.sum="sum"}(t.ConseilFunction||(t.ConseilFunction={})),function(e){e.csv="csv",e.json="json"}(t.ConseilOutput||(t.ConseilOutput={}))},function(e,t){var r,n,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],l=!1,p=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,i,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,o)}));default:for(s=new Array(a-1),i=0;i<s.length;)s[i++]=arguments[i];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this,r(20))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t,r,n){super(),this.httpStatus=e,this.httpMessage=t,this.serverURL=r,this.request=n}}t.ServiceRequestError=n;class o extends Error{constructor(e,t,r,n,o){super(),this.httpStatus=e,this.httpMessage=t,this.serverURL=r,this.request=n,this.response=o}}t.ServiceResponseError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(19);!function(e){e.blankQuery=function(){return{fields:[],predicates:[],orderBy:[],aggregation:[],limit:100}},e.addFields=function(e,...t){let r=Object.assign({},e),n=new Set(e.fields);return t.forEach(e=>n.add(e)),r.fields=Array.from(n.values()),r},e.addPredicate=function(e,t,r,o,s=!1,i){if(r===n.ConseilOperator.BETWEEN&&2!==o.length)throw new Error("BETWEEN operation requires a list of two values.");if(r===n.ConseilOperator.IN&&o.length<2)throw new Error("IN operation requires a list of two or more values.");if(1!==o.length&&r!==n.ConseilOperator.IN&&r!==n.ConseilOperator.BETWEEN&&r!==n.ConseilOperator.ISNULL)throw new Error(`invalid values list for ${r}.`);let a=Object.assign({},e);return a.predicates.push({field:t,operation:r,set:o,inverse:s,group:i}),a},e.addOrdering=function(e,t,r=n.ConseilSortDirection.ASC){let o=Object.assign({},e);return o.orderBy.push({field:t,direction:r}),o},e.setLimit=function(e,t){if(t<1)throw new Error("Limit cannot be less than one.");let r=Object.assign({},e);return r.limit=t,r},e.setOutputType=function(e,t){let r=Object.assign({},e);return r.output=t,r},e.addAggregationFunction=function(e,t,r){if(!e.fields.includes(t))throw new Error("Cannot apply an aggregation function on a field not being returned.");let n=Object.assign({},e);return n.aggregation.push({field:t,function:r}),n},e.addExtendedParameter=function(e,t,r){return e[t]=r,e},e.removeParameter=function(e,t){return e.hasOwnProperty(t)&&delete e[t],e}}(t.ConseilQueryBuilder||(t.ConseilQueryBuilder={}))},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==s&&e.removeListener("error",s),r([].slice.call(arguments))}var s;"error"!==t&&(s=function(r){e.removeListener(t,o),n(r)},e.once("error",s)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var o,s,i,a;if(c(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),i=s[t]),void 0===i)i=s[t]=r,++e._eventsCount;else if("function"==typeof i?i=s[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(o=l(e))>0&&i.length>o&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,a=u,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):m(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)s(u,this,t);else{var c=u.length,l=m(u,c);for(r=0;r<c;++r)s(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,s,i;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){i=r[s].listener,o=s;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(o=s[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){(t=e.exports=r(34)).Stream=t,t.Readable=t,t.Writable=r(26),t.Duplex=r(12),t.Transform=r(37),t.PassThrough=r(58)},function(e,t,r){"use strict";(function(t,n,o){var s=r(21);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var a,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:s.nextTick;b.WritableState=y;var c=r(16);c.inherits=r(1);var l={deprecate:r(57)},p=r(35),f=r(5).Buffer,h=o.Uint8Array||function(){};var d,g=r(36);function m(){}function y(e,t){a=a||r(12),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===e.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(s.nextTick(o,n),s.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),T(e,t))}(e,r,n,t,o);else{var i=_(r);i||r.corked||r.bufferProcessing||!r.bufferedRequest||v(e,r),n?u($,e,r,i,o):$(e,r,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function b(e){if(a=a||r(12),!(d.call(b,this)||this instanceof a))return new b(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function P(e,t,r,n,o,s,i){t.writelen=n,t.writecb=i,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,s,t.onwrite),t.sync=!1}function $(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),T(e,t)}function v(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,p=r.callback;if(P(e,t,!1,t.objectMode?1:c.length,c,l,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var r=_(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(A,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(b,p),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===b&&(e&&e._writableState instanceof y)}})):d=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,r){var n,o=this._writableState,i=!1,a=!o.objectMode&&(n=e,f.isBuffer(n)||n instanceof h);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=m),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),s.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o=!0,i=!1;return null===r?i=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),s.nextTick(n,i),o=!1),o}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,r,n,o,s){if(!r){var i=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,o);n!==i&&(r=!0,o="buffer",n=i)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,a,n,o,s);return u}(this,o,a,e,t,r)),i},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?s.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(20),r(55).setImmediate,r(13))},function(e,t,r){"use strict";var n=r(5).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=p,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=i(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=i(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=i(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){var n,o,s;o=[],void 0===(s="function"==typeof(n=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function n(e){return e&&"[object RegExp]"===t.call(e)}function o(e){return e&&"object"==typeof e&&!n(e)&&!Array.isArray(e)}function s(e){return"("+e+")"}function i(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function a(e){if("string"==typeof e)return"(?:"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(n(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");if(e.unicode)throw new Error("RegExp /u flag is not allowed");return e.source}throw new Error("Not a pattern: "+e)}function u(t,r){if(o(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var s={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var i in r)e.call(r,i)&&(s[i]=r[i]);if("string"==typeof s.type&&t!==s.type)throw new Error("Type transform cannot be a string (type '"+s.type+"' for token '"+t+"')");var a=s.match;return s.match=Array.isArray(a)?a:a?[a]:[],s.match.sort((function(e,t){return n(e)&&n(t)?0:n(t)?-1:n(e)?1:t.length-e.length})),s}function c(e){return Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.include)for(var o=[].concat(n.include),s=0;s<o.length;s++)t.push({include:o[s]});else{if(!n.type)throw new Error("Rule has no type: "+JSON.stringify(n));t.push(u(n.type,n))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),r=[],n=0;n<t.length;n++){var s=t[n],i=e[s],a=[].concat(i);if("include"!==s){var c=[];a.forEach((function(e){o(e)?(c.length&&r.push(u(s,c)),r.push(u(s,e)),c=[]):c.push(e)})),c.length&&r.push(u(s,c))}else for(var l=0;l<a.length;l++)r.push({include:a[l]})}return r}(e)}var l=u("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var n=null,o=Object.create(null),u=!0,c=[],p=[],f=0;f<e.length;f++)e[f].fallback&&(u=!1);for(f=0;f<e.length;f++){var h=e[f];if(h.include)throw new Error("Inheritance is not allowed in stateless lexers");if(h.error||h.fallback){if(n)throw!h.fallback==!n.fallback?new Error("Multiple "+(h.fallback?"fallback":"error")+" rules not allowed (for token '"+h.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+h.defaultType+"')");n=h}var d=h.match;if(u)for(;d.length&&"string"==typeof d[0]&&1===d[0].length;)o[d.shift().charCodeAt(0)]=h;if(h.pop||h.push||h.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+h.defaultType+"')");if(h.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+h.defaultType+"')")}if(0!==d.length){u=!1,c.push(h);var g=i(d.map(a)),m=new RegExp(g);if(m.test(""))throw new Error("RegExp matches empty string: "+m);if(new RegExp("|"+g).exec("").length-1>0)throw new Error("RegExp has capture groups: "+m+"\nUse (?:  ) instead");if(!h.lineBreaks&&m.test("\n"))throw new Error("Rule should declare lineBreaks: "+m);p.push(s(g))}}var y=n&&n.fallback,b=r&&!y?"ym":"gm",P=r||y?"":"|";return{regexp:new RegExp(i(p)+P,b),groups:c,fast:o,error:n||l}}function f(e,t,r){var n=e&&(e.push||e.next);if(n&&!r[n])throw new Error("Missing state '"+n+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var h=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};h.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},h.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},h.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},h.prototype.popState=function(){this.setState(this.stack.pop())},h.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var d=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function g(){return this.value}if(h.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},h.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(i=this.fast[r.charCodeAt(e)])return this._token(i,r.charAt(e),e);var n=this.re;n.lastIndex=e;var o=d(n,r),s=this.error;if(null==o)return this._token(s,r.slice(e,r.length),e);var i=this._getGroup(o),a=o[0];return s.fallback&&o.index!==e?(this.queuedGroup=i,this.queuedText=a,this._token(s,r.slice(e,o.index),e)):this._token(i,a,e)}},h.prototype._token=function(e,t,r){var n=0;if(e.lineBreaks){var o=/\n/g,s=1;if("\n"===t)n=1;else for(;o.exec(t);)n++,s=o.lastIndex}var i={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:g,offset:r,lineBreaks:n,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=n,0!==n?this.col=a-s+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(i,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),i},"undefined"!=typeof Symbol&&Symbol.iterator){var m=function(e){this.lexer=e};m.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},m.prototype[Symbol.iterator]=function(){return this},h.prototype[Symbol.iterator]=function(){return new m(this)}}return h.prototype.formatError=function(e,t){var r=e.text,n=e.offset,o=e.lineBreaks?r.indexOf("\n"):r.length,s=Math.max(0,n-e.col+1),i=this.buffer.substring(s,n+o);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+i+"\n",t+="  "+Array(e.col).join(" ")+"^"},h.prototype.clone=function(){return new h(this.states,this.state)},h.prototype.has=function(e){return!0},{compile:function(e){var t=p(c(e));return new h({start:t},"start")},states:function(e,t){var r=e.$all?c(e.$all):[];delete e.$all;var n=Object.getOwnPropertyNames(e);t||(t=n[0]);for(var o=Object.create(null),s=0;s<n.length;s++){var i=n[s];o[i]=c(e[i]).concat(r)}for(s=0;s<n.length;s++){i=n[s];for(var a=o[i],u=Object.create(null),l=0;l<a.length;l++){var d=a[l];if(d.include){var g=[l,1];if(d.include!==i&&!u[d.include]){u[d.include]=!0;var m=o[d.include];if(!m)throw new Error("Cannot include nonexistent state '"+d.include+"' (in state '"+i+"')");for(var y=0;y<m.length;y++){var b=m[y];-1===a.indexOf(b)&&g.push(b)}}a.splice.apply(a,g),l--}}}var P=Object.create(null);for(s=0;s<n.length;s++)i=n[s],P[i]=p(o[i],!0);for(s=0;s<n.length;s++){var $=n[s],v=P[$],_=v.groups;for(l=0;l<_.length;l++)f(_[l],$,P);var A=Object.getOwnPropertyNames(v.fast);for(l=0;l<A.length;l++)f(v.fast[A[l]],$,P)}return new h(P,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),r=Object.create(null),n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var s=n[o],i=e[s];(Array.isArray(i)?i:[i]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+s+"')");t[e]=s}))}function a(e){return JSON.stringify(e)}var u="";for(var c in u+="switch (value.length) {\n",r){var l=r[c];u+="case "+c+":\n",u+="switch (value) {\n",l.forEach((function(e){var r=t[e];u+="case "+a(e)+": return "+a(r)+"\n"})),u+="}\n"}return u+="}\n",Function("value",u)}}})?n.apply(t,o):n)||(e.exports=s)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(30),i=o(r(15)),a=o(r(11)).default.log,u=i.default.fetch;!function(e){e.executeEntityQuery=function(e,t,r,o,c){return n(this,void 0,void 0,(function*(){const n=`${e.url}/v2/data/${t}/${r}/${o}`;return a.debug(`ConseilDataClient.executeEntityQuery request: ${n}, ${JSON.stringify(c)}`),u(n,{method:"post",headers:{apiKey:e.apiKey,"Content-Type":"application/json",Referrer:i.default.Referrer},cache:"no-store",body:JSON.stringify(c)}).then(e=>{if(!e.ok)throw a.error(`ConseilDataClient.executeEntityQuery request: ${n}, ${JSON.stringify(c)}, failed with ${e.statusText}(${e.status})`),new s.ConseilRequestError(e.status,e.statusText,n,c);return e}).then(e=>{const t=e.headers.get("content-type").toLowerCase().includes("application/json"),r=t?e.json():e.text();return a.debug("ConseilDataClient.executeEntityQuery response: "+(t?JSON.stringify(r):r)),r})}))}}(t.ConseilDataClient||(t.ConseilDataClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(22);class o extends n.ServiceRequestError{constructor(e,t,r,n){super(e,t,r,null),this.conseilQuery=n}toString(){return`ConseilRequestError for ${this.serverURL} with ${this.httpStatus} and ${this.httpMessage}`}}t.ConseilRequestError=o;class s extends n.ServiceResponseError{constructor(e,t,r,n,o){super(e,t,r,null,o),this.conseilQuery=n}}t.ConseilResponseError=s},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=r(5).Buffer,o=r(33).Transform;function s(e){o.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(1)(s,o),s.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},s.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},s.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,o=0;this._blockOffset+e.length-o>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[o++];this._update(),this._blockOffset=0}for(;o<e.length;)r[this._blockOffset++]=e[o++];for(var i=0,a=8*e.length;a>0;++i)this._length[i]+=a,(a=this._length[i]/4294967296|0)>0&&(this._length[i]-=4294967296*a);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},s.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=s},function(e,t,r){e.exports=o;var n=r(24).EventEmitter;function o(){n.call(this)}r(1)(o,n),o.Readable=r(25),o.Writable=r(59),o.Duplex=r(60),o.Transform=r(61),o.PassThrough=r(62),o.Stream=o,o.prototype.pipe=function(e,t){var r=this;function o(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",o),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var i=!1;function a(){i||(i=!0,e.end())}function u(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",o),e.removeListener("drain",s),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},function(e,t,r){"use strict";(function(t,n){var o=r(21);e.exports=P;var s,i=r(31);P.ReadableState=b;r(24).EventEmitter;var a=function(e,t){return e.listeners(t).length},u=r(35),c=r(5).Buffer,l=t.Uint8Array||function(){};var p=r(16);p.inherits=r(1);var f=r(52),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=r(53),m=r(36);p.inherits(P,u);var y=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var n=t instanceof(s=s||r(12));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(27).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function P(e){if(s=s||r(12),!(this instanceof P))return new P(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function $(e,t,r,n,o){var s,i=e._readableState;null===t?(i.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,A(e)}(e,i)):(o||(s=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(i,t)),s?e.emit("error",s):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):v(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?v(e,i,t,!1):I(e,i)):v(e,i,t,!1))):n||(i.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(i)}function v(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),I(e,t)}Object.defineProperty(P.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),P.prototype.destroy=m.destroy,P.prototype._undestroy=m.undestroy,P.prototype._destroy=function(e,t){this.push(null),t(e)},P.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),$(this,e,t,!1,r)},P.prototype.unshift=function(e){return $(this,e,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(e){return d||(d=r(27).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(T,e):T(e))}function T(e){h("emit readable"),e.emit("readable"),w(e)}function I(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(S,e,t))}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function D(e){h("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,o=r.data;e-=o.length;for(;r=r.next;){var s=r.data,i=e>s.length?s.length:e;if(i===s.length?o+=s:o+=s.slice(0,e),0===(e-=i)){i===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(i));break}++n}return t.length-=n,o}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,o=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var s=n.data,i=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,i),0===(e-=i)){i===s.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(i));break}++o}return t.length-=o,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}P.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):A(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&C(this),null;var n,o=t.needReadable;return h("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",o=!0),t.ended||t.reading?h("reading or ended",o=!1):o&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(n=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==n&&this.emit("data",n),n},P.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},P.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,h("pipe count=%d opts=%j",s.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:P;function c(t,n){h("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,h("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),e.removeListener("drain",p),e.removeListener("error",m),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",P),r.removeListener("data",g),f=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function l(){h("onend"),e.end()}s.endEmitted?o.nextTick(u):r.once("end",u),e.on("unpipe",c);var p=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,w(e))}}(r);e.on("drain",p);var f=!1;var d=!1;function g(t){h("ondata"),d=!1,!1!==e.write(t)||d||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==U(s.pipes,e))&&!f&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function m(t){h("onerror",t),P(),e.removeListener("error",m),0===a(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",b),P()}function b(){h("onfinish"),e.removeListener("close",y),P()}function P(){h("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",y),e.once("finish",b),e.emit("pipe",r),s.flowing||(h("pipe resume"),r.resume()),e},P.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<o;s++)n[s].emit("unpipe",this,r);return this}var i=U(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},P.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):o.nextTick(D,this))}return r},P.prototype.addListener=P.prototype.on,P.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(E,e,t))}(this,e)),this},P.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},P.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(h("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<y.length;s++)e.on(y[s],this.emit.bind(this,y[s]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),P._fromList=R}).call(this,r(13),r(20))},function(e,t,r){e.exports=r(24).EventEmitter},function(e,t,r){"use strict";var n=r(21);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return s||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";e.exports=i;var n=r(12),o=r(16);function s(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=r(1),o.inherits(i,n),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){var n=r(1),o=r(14),s=r(5).Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function p(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,s=0|this._c,a=0|this._d,u=0|this._e,d=0|this._f,g=0|this._g,m=0|this._h,y=0;y<16;++y)r[y]=e.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((t=r[y-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[y-7]+h(r[y-15])+r[y-16];for(var b=0;b<64;++b){var P=m+f(u)+c(u,d,g)+i[b]+r[b]|0,$=p(n)+l(n,o,s)|0;m=g,g=d,d=u,u=a+P|0,a=s,s=o,o=n,n=P+$|0}this._a=n+this._a|0,this._b=o+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},u.prototype._hash=function(){var e=s.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u},function(e,t,r){var n=r(1),o=r(14),s=r(5).Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function p(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,o=0|this._ch,s=0|this._dh,a=0|this._eh,u=0|this._fh,b=0|this._gh,P=0|this._hh,$=0|this._al,v=0|this._bl,_=0|this._cl,A=0|this._dl,T=0|this._el,I=0|this._fl,S=0|this._gl,D=0|this._hl,E=0;E<32;E+=2)t[E]=e.readInt32BE(4*E),t[E+1]=e.readInt32BE(4*E+4);for(;E<160;E+=2){var w=t[E-30],R=t[E-30+1],C=h(w,R),O=d(R,w),U=g(w=t[E-4],R=t[E-4+1]),N=m(R,w),M=t[E-14],x=t[E-14+1],k=t[E-32],F=t[E-32+1],z=O+x|0,B=C+M+y(z,O)|0;B=(B=B+U+y(z=z+N|0,N)|0)+k+y(z=z+F|0,F)|0,t[E]=B,t[E+1]=z}for(var L=0;L<160;L+=2){B=t[L],z=t[L+1];var W=l(r,n,o),j=l($,v,_),G=p(r,$),H=p($,r),Q=f(a,T),J=f(T,a),K=i[L],q=i[L+1],V=c(a,u,b),Y=c(T,I,S),Z=D+J|0,X=P+Q+y(Z,D)|0;X=(X=(X=X+V+y(Z=Z+Y|0,Y)|0)+K+y(Z=Z+q|0,q)|0)+B+y(Z=Z+z|0,z)|0;var ee=H+j|0,te=G+W+y(ee,H)|0;P=b,D=S,b=u,S=I,u=a,I=T,a=s+X+y(T=A+Z|0,A)|0,s=o,A=_,o=n,_=v,n=r,v=$,r=X+te+y($=Z+ee|0,Z)|0}this._al=this._al+$|0,this._bl=this._bl+v|0,this._cl=this._cl+_|0,this._dl=this._dl+A|0,this._el=this._el+T|0,this._fl=this._fl+I|0,this._gl=this._gl+S|0,this._hl=this._hl+D|0,this._ah=this._ah+r+y(this._al,$)|0,this._bh=this._bh+n+y(this._bl,v)|0,this._ch=this._ch+o+y(this._cl,_)|0,this._dh=this._dh+s+y(this._dl,A)|0,this._eh=this._eh+a+y(this._el,T)|0,this._fh=this._fh+u+y(this._fl,I)|0,this._gh=this._gh+b+y(this._gl,S)|0,this._hh=this._hh+P+y(this._hl,D)|0},u.prototype._hash=function(){var e=s.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u},function(e,t,r){(function(e){var n,o=function(e){"use strict";var t=1e7,r=9007199254740992,n=p(r),s="function"==typeof BigInt;function i(e,t,r,n){return void 0===e?i[0]:void 0!==t&&(10!=+t||r)?B(e,t,r,n):H(e)}function a(e,t){this.value=e,this.sign=t,this.isSmall=!1}function u(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){this.value=e}function l(e){return-r<e&&e<r}function p(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){h(e);var r=e.length;if(r<4&&E(e,n)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function d(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function g(e){return e>0?Math.floor(e):Math.ceil(e)}function m(e,r){var n,o,s=e.length,i=r.length,a=new Array(s),u=0,c=t;for(o=0;o<i;o++)u=(n=e[o]+r[o]+u)>=c?1:0,a[o]=n-u*c;for(;o<s;)u=(n=e[o]+u)===c?1:0,a[o++]=n-u*c;return u>0&&a.push(u),a}function y(e,t){return e.length>=t.length?m(e,t):m(t,e)}function b(e,r){var n,o,s=e.length,i=new Array(s),a=t;for(o=0;o<s;o++)n=e[o]-a+r,r=Math.floor(n/a),i[o]=n-r*a,r+=1;for(;r>0;)i[o++]=r%a,r=Math.floor(r/a);return i}function P(e,t){var r,n,o=e.length,s=t.length,i=new Array(o),a=0;for(r=0;r<s;r++)(n=e[r]-a-t[r])<0?(n+=1e7,a=1):a=0,i[r]=n;for(r=s;r<o;r++){if(!((n=e[r]-a)<0)){i[r++]=n;break}n+=1e7,i[r]=n}for(;r<o;r++)i[r]=e[r];return h(i),i}function $(e,t,r){var n,o,s=e.length,i=new Array(s),c=-t;for(n=0;n<s;n++)o=e[n]+c,c=Math.floor(o/1e7),o%=1e7,i[n]=o<0?o+1e7:o;return"number"==typeof(i=f(i))?(r&&(i=-i),new u(i)):new a(i,r)}function v(e,t){var r,n,o,s,i=e.length,a=t.length,u=d(i+a);for(o=0;o<i;++o){s=e[o];for(var c=0;c<a;++c)r=s*t[c]+u[o+c],n=Math.floor(r/1e7),u[o+c]=r-1e7*n,u[o+c+1]+=n}return h(u),u}function _(e,r){var n,o,s=e.length,i=new Array(s),a=t,u=0;for(o=0;o<s;o++)n=e[o]*r+u,u=Math.floor(n/a),i[o]=n-u*a;for(;u>0;)i[o++]=u%a,u=Math.floor(u/a);return i}function A(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function T(e,r,n){return new a(e<t?_(r,e):v(r,p(e)),n)}function I(e){var t,r,n,o,s=e.length,i=d(s+s);for(n=0;n<s;n++){r=0-(o=e[n])*o;for(var a=n;a<s;a++)t=o*e[a]*2+i[n+a]+r,r=Math.floor(t/1e7),i[n+a]=t-1e7*r;i[n+s]=r}return h(i),i}function S(e,t){var r,n,o,s,i=e.length,a=d(i);for(o=0,r=i-1;r>=0;--r)o=(s=1e7*o+e[r])-(n=g(s/t))*t,a[r]=0|n;return[a,0|o]}function D(e,r){var n,o=H(r);if(s)return[new c(e.value/o.value),new c(e.value%o.value)];var l,m=e.value,y=o.value;if(0===y)throw new Error("Cannot divide by zero");if(e.isSmall)return o.isSmall?[new u(g(m/y)),new u(m%y)]:[i[0],e];if(o.isSmall){if(1===y)return[e,i[0]];if(-1==y)return[e.negate(),i[0]];var b=Math.abs(y);if(b<t){l=f((n=S(m,b))[0]);var $=n[1];return e.sign&&($=-$),"number"==typeof l?(e.sign!==o.sign&&(l=-l),[new u(l),new u($)]):[new a(l,e.sign!==o.sign),new u($)]}y=p(b)}var v=E(m,y);if(-1===v)return[i[0],e];if(0===v)return[i[e.sign===o.sign?1:-1],i[0]];l=(n=m.length+y.length<=200?function(e,r){var n,o,s,i,a,u,c,l=e.length,p=r.length,h=t,g=d(r.length),m=r[p-1],y=Math.ceil(h/(2*m)),b=_(e,y),P=_(r,y);for(b.length<=l&&b.push(0),P.push(0),m=P[p-1],o=l-p;o>=0;o--){for(n=h-1,b[o+p]!==m&&(n=Math.floor((b[o+p]*h+b[o+p-1])/m)),s=0,i=0,u=P.length,a=0;a<u;a++)s+=n*P[a],c=Math.floor(s/h),i+=b[o+a]-(s-c*h),s=c,i<0?(b[o+a]=i+h,i=-1):(b[o+a]=i,i=0);for(;0!==i;){for(n-=1,s=0,a=0;a<u;a++)(s+=b[o+a]-h+P[a])<0?(b[o+a]=s+h,s=0):(b[o+a]=s,s=1);i+=s}g[o]=n}return b=S(b,y)[0],[f(g),f(b)]}(m,y):function(e,t){for(var r,n,o,s,i,a=e.length,u=t.length,c=[],l=[];a;)if(l.unshift(e[--a]),h(l),E(l,t)<0)c.push(0);else{o=1e7*l[(n=l.length)-1]+l[n-2],s=1e7*t[u-1]+t[u-2],n>u&&(o=1e7*(o+1)),r=Math.ceil(o/s);do{if(E(i=_(t,r),l)<=0)break;r--}while(r);c.push(r),l=P(l,i)}return c.reverse(),[f(c),f(l)]}(m,y))[0];var A=e.sign!==o.sign,T=n[1],I=e.sign;return"number"==typeof l?(A&&(l=-l),l=new u(l)):l=new a(l,A),"number"==typeof T?(I&&(T=-T),T=new u(T)):T=new a(T,I),[l,T]}function E(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function w(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function R(e,t){for(var r,n,s,i=e.prev(),a=i,u=0;a.isEven();)a=a.divide(2),u++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(s=o(t[n]).modPow(a,e)).isUnit()&&!s.equals(i)){for(r=u-1;0!=r;r--){if((s=s.square().mod(e)).isUnit())return!1;if(s.equals(i))continue e}return!1}return!0}a.prototype=Object.create(i.prototype),u.prototype=Object.create(i.prototype),c.prototype=Object.create(i.prototype),a.prototype.add=function(e){var t=H(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new a(b(r,Math.abs(n)),this.sign):new a(y(r,n),this.sign)},a.prototype.plus=a.prototype.add,u.prototype.add=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(l(r+n))return new u(r+n);n=p(Math.abs(n))}return new a(b(n,Math.abs(r)),r<0)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){return new c(this.value+H(e).value)},c.prototype.plus=c.prototype.add,a.prototype.subtract=function(e){var t=H(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?$(r,Math.abs(n),this.sign):function(e,t,r){var n;return E(e,t)>=0?n=P(e,t):(n=P(t,e),r=!r),"number"==typeof(n=f(n))?(r&&(n=-n),new u(n)):new a(n,r)}(r,n,this.sign)},a.prototype.minus=a.prototype.subtract,u.prototype.subtract=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new u(r-n):$(n,Math.abs(r),r>=0)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){return new c(this.value-H(e).value)},c.prototype.minus=c.prototype.subtract,a.prototype.negate=function(){return new a(this.value,!this.sign)},u.prototype.negate=function(){var e=this.sign,t=new u(-this.value);return t.sign=!e,t},c.prototype.negate=function(){return new c(-this.value)},a.prototype.abs=function(){return new a(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},a.prototype.multiply=function(e){var r,n,o,s=H(e),u=this.value,c=s.value,l=this.sign!==s.sign;if(s.isSmall){if(0===c)return i[0];if(1===c)return this;if(-1===c)return this.negate();if((r=Math.abs(c))<t)return new a(_(u,r),l);c=p(r)}return n=u.length,o=c.length,new a(-.012*n-.012*o+15e-6*n*o>0?function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return v(t,r);n=Math.ceil(n/2);var o=t.slice(n),s=t.slice(0,n),i=r.slice(n),a=r.slice(0,n),u=e(s,a),c=e(o,i),l=e(y(s,o),y(a,i)),p=y(y(u,A(P(P(l,u),c),n)),A(c,2*n));return h(p),p}(u,c):v(u,c),l)},a.prototype.times=a.prototype.multiply,u.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new u(e.value*this.value):T(Math.abs(e.value),p(Math.abs(this.value)),this.sign!==e.sign)},a.prototype._multiplyBySmall=function(e){return 0===e.value?i[0]:1===e.value?this:-1===e.value?this.negate():T(Math.abs(e.value),this.value,this.sign!==e.sign)},u.prototype.multiply=function(e){return H(e)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,c.prototype.multiply=function(e){return new c(this.value*H(e).value)},c.prototype.times=c.prototype.multiply,a.prototype.square=function(){return new a(I(this.value),!1)},u.prototype.square=function(){var e=this.value*this.value;return l(e)?new u(e):new a(I(p(Math.abs(this.value))),!1)},c.prototype.square=function(e){return new c(this.value*this.value)},a.prototype.divmod=function(e){var t=D(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=u.prototype.divmod=a.prototype.divmod,a.prototype.divide=function(e){return D(this,e)[0]},c.prototype.over=c.prototype.divide=function(e){return new c(this.value/H(e).value)},u.prototype.over=u.prototype.divide=a.prototype.over=a.prototype.divide,a.prototype.mod=function(e){return D(this,e)[1]},c.prototype.mod=c.prototype.remainder=function(e){return new c(this.value%H(e).value)},u.prototype.remainder=u.prototype.mod=a.prototype.remainder=a.prototype.mod,a.prototype.pow=function(e){var t,r,n,o=H(e),s=this.value,a=o.value;if(0===a)return i[1];if(0===s)return i[0];if(1===s)return i[1];if(-1===s)return o.isEven()?i[1]:i[-1];if(o.sign)return i[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(s,a)))return new u(g(t));for(r=this,n=i[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},u.prototype.pow=a.prototype.pow,c.prototype.pow=function(e){var t=H(e),r=this.value,n=t.value,o=BigInt(0),s=BigInt(1),a=BigInt(2);if(n===o)return i[1];if(r===o)return i[0];if(r===s)return i[1];if(r===BigInt(-1))return t.isEven()?i[1]:i[-1];if(t.isNegative())return new c(o);for(var u=this,l=i[1];(n&s)===s&&(l=l.times(u),--n),n!==o;)n/=a,u=u.square();return l},a.prototype.modPow=function(e,t){if(e=H(e),(t=H(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=i[1],n=this.mod(t);for(e.isNegative()&&(e=e.multiply(i[-1]),n=n.modInv(t));e.isPositive();){if(n.isZero())return i[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},c.prototype.modPow=u.prototype.modPow=a.prototype.modPow,a.prototype.compareAbs=function(e){var t=H(e),r=this.value,n=t.value;return t.isSmall?1:E(r,n)},u.prototype.compareAbs=function(e){var t=H(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(e){var t=this.value,r=H(e).value;return(t=t>=0?t:-t)===(r=r>=0?r:-r)?0:t>r?1:-1},a.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:E(r,n)*(this.sign?-1:1)},a.prototype.compareTo=a.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,r=H(e).value;return t===r?0:t>r?1:-1},c.prototype.compareTo=c.prototype.compare,a.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals=a.prototype.eq=a.prototype.equals,a.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=a.prototype.neq=a.prototype.notEquals,a.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater=a.prototype.gt=a.prototype.greater,a.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser=a.prototype.lt=a.prototype.lesser,a.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=a.prototype.geq=a.prototype.greaterOrEquals,a.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=a.prototype.leq=a.prototype.lesserOrEquals,a.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},a.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},a.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=u.prototype.isPositive,a.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=u.prototype.isNegative,a.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},a.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},a.prototype.isDivisibleBy=function(e){var t=H(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy=a.prototype.isDivisibleBy,a.prototype.isPrime=function(e){var t=w(this);if(void 0!==t)return t;var r=this.abs(),n=r.bitLength();if(n<=64)return R(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var s=Math.log(2)*n.toJSNumber(),i=Math.ceil(!0===e?2*Math.pow(s,2):s),a=[],u=0;u<i;u++)a.push(o(u+2));return R(r,a)},c.prototype.isPrime=u.prototype.isPrime=a.prototype.isPrime,a.prototype.isProbablePrime=function(e,t){var r=w(this);if(void 0!==r)return r;for(var n=this.abs(),s=void 0===e?5:e,i=[],a=0;a<s;a++)i.push(o.randBetween(2,n.minus(2),t));return R(n,i)},c.prototype.isProbablePrime=u.prototype.isProbablePrime=a.prototype.isProbablePrime,a.prototype.modInv=function(e){for(var t,r,n,s=o.zero,i=o.one,a=H(e),u=this.abs();!u.isZero();)t=a.divide(u),r=s,n=a,s=i,a=u,i=r.subtract(t.multiply(i)),u=n.subtract(t.multiply(u));if(!a.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(e)),this.isNegative()?s.negate():s},c.prototype.modInv=u.prototype.modInv=a.prototype.modInv,a.prototype.next=function(){var e=this.value;return this.sign?$(e,1,this.sign):new a(b(e,1),this.sign)},u.prototype.next=function(){var e=this.value;return e+1<r?new u(e+1):new a(n,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},a.prototype.prev=function(){var e=this.value;return this.sign?new a(b(e,1),!0):$(e,1,this.sign)},u.prototype.prev=function(){var e=this.value;return e-1>-r?new u(e-1):new a(n,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var C=[1];2*C[C.length-1]<=t;)C.push(2*C[C.length-1]);var O=C.length,U=C[O-1];function N(e){return Math.abs(e)<=t}function M(e,t,r){t=H(t);for(var n=e.isNegative(),s=t.isNegative(),i=n?e.not():e,a=s?t.not():t,u=0,c=0,l=null,p=null,f=[];!i.isZero()||!a.isZero();)u=(l=D(i,U))[1].toJSNumber(),n&&(u=U-1-u),c=(p=D(a,U))[1].toJSNumber(),s&&(c=U-1-c),i=l[0],a=p[0],f.push(r(u,c));for(var h=0!==r(n?1:0,s?1:0)?o(-1):o(0),d=f.length-1;d>=0;d-=1)h=h.multiply(U).add(o(f[d]));return h}a.prototype.shiftLeft=function(e){var t=H(e).toJSNumber();if(!N(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;t>=O;)r=r.multiply(U),t-=O-1;return r.multiply(C[t])},c.prototype.shiftLeft=u.prototype.shiftLeft=a.prototype.shiftLeft,a.prototype.shiftRight=function(e){var t,r=H(e).toJSNumber();if(!N(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=O;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=D(n,U))[1].isNegative()?t[0].prev():t[0],r-=O-1}return(t=D(n,C[r]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=u.prototype.shiftRight=a.prototype.shiftRight,a.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not=a.prototype.not,a.prototype.and=function(e){return M(this,e,(function(e,t){return e&t}))},c.prototype.and=u.prototype.and=a.prototype.and,a.prototype.or=function(e){return M(this,e,(function(e,t){return e|t}))},c.prototype.or=u.prototype.or=a.prototype.or,a.prototype.xor=function(e){return M(this,e,(function(e,t){return e^t}))},c.prototype.xor=u.prototype.xor=a.prototype.xor;function x(e){var r=e.value,n="number"==typeof r?r|1<<30:"bigint"==typeof r?r|BigInt(1<<30):r[0]+r[1]*t|1073758208;return n&-n}function k(e,t){return e=H(e),t=H(t),e.greater(t)?e:t}function F(e,t){return e=H(e),t=H(t),e.lesser(t)?e:t}function z(e,t){if(e=H(e).abs(),t=H(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,o=i[1];e.isEven()&&t.isEven();)r=F(x(e),x(t)),e=e.divide(r),t=t.divide(r),o=o.multiply(r);for(;e.isEven();)e=e.divide(x(e));do{for(;t.isEven();)t=t.divide(x(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return o.isUnit()?e:e.multiply(o)}a.prototype.bitLength=function(){var e=this;return e.compareTo(o(0))<0&&(e=e.negate().subtract(o(1))),0===e.compareTo(o(0))?o(0):o(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),s=n.p,i=n.e,a=s.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*i+1}:{p:s,e:2*i}}return{p:o(1),e:0}}(e,o(2)).e).add(o(1))},c.prototype.bitLength=u.prototype.bitLength=a.prototype.bitLength;var B=function(e,t,r,n){r=r||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());var o,s=e.length,i=Math.abs(t),a={};for(o=0;o<r.length;o++)a[r[o]]=o;for(o=0;o<s;o++){if("-"!==(l=e[o])&&(l in a&&a[l]>=i)){if("1"===l&&1===i)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=H(t);var u=[],c="-"===e[0];for(o=c?1:0;o<e.length;o++){var l;if((l=e[o])in a)u.push(H(a[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var p=o;do{o++}while(">"!==e[o]&&o<e.length);u.push(H(e.slice(p+1,o)))}}return L(u,t,c)};function L(e,t,r){var n,o=i[0],s=i[1];for(n=e.length-1;n>=0;n--)o=o.add(e[n].times(s)),s=s.times(t);return r?o.negate():o}function W(e,t){if((t=o(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var s,i=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){s=a.divmod(t),a=s.quotient;var u=s.remainder;u.isNegative()&&(u=t.minus(u).abs(),a=a.next()),i.push(u.toJSNumber())}return i.push(a.toJSNumber()),{value:i.reverse(),isNegative:n}}function j(e,t,r){var n=W(e,t);return(n.isNegative?"-":"")+n.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,r)})).join("")}function G(e){if(l(+e)){var t=+e;if(t===g(t))return s?new c(BigInt(t)):new u(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var o=n[1];if("+"===o[0]&&(o=o.slice(1)),(o=+o)!==g(o)||!l(o))throw new Error("Invalid integer: "+o+" is not a valid exponent.");var i=n[0],p=i.indexOf(".");if(p>=0&&(o-=i.length-p-1,i=i.slice(0,p)+i.slice(p+1)),o<0)throw new Error("Cannot include negative exponent part for integers");e=i+=new Array(o+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(s)return new c(BigInt(r?"-"+e:e));for(var f=[],d=e.length,m=d-7;d>0;)f.push(+e.slice(m,d)),(m-=7)<0&&(m=0),d-=7;return h(f),new a(f,r)}function H(e){return"number"==typeof e?function(e){if(s)return new c(BigInt(e));if(l(e)){if(e!==g(e))throw new Error(e+" is not an integer.");return new u(e)}return G(e.toString())}(e):"string"==typeof e?G(e):"bigint"==typeof e?new c(e):e}a.prototype.toArray=function(e){return W(this,e)},u.prototype.toArray=function(e){return W(this,e)},c.prototype.toArray=function(e){return W(this,e)},a.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return j(this,e,t);for(var r,n=this.value,o=n.length,s=String(n[--o]);--o>=0;)r=String(n[o]),s+="0000000".slice(r.length)+r;return(this.sign?"-":"")+s},u.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?j(this,e,t):String(this.value)},c.prototype.toString=u.prototype.toString,c.prototype.toJSON=a.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},a.prototype.valueOf=function(){return parseInt(this.toString(),10)},a.prototype.toJSNumber=a.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Q=0;Q<1e3;Q++)i[Q]=H(Q),Q>0&&(i[-Q]=H(-Q));return i.one=i[1],i.zero=i[0],i.minusOne=i[-1],i.max=k,i.min=F,i.gcd=z,i.lcm=function(e,t){return e=H(e).abs(),t=H(t).abs(),e.divide(z(e,t)).multiply(t)},i.isInstance=function(e){return e instanceof a||e instanceof u||e instanceof c},i.randBetween=function(e,r,n){e=H(e),r=H(r);var o=n||Math.random,s=F(e,r),a=k(e,r).subtract(s).add(1);if(a.isSmall)return s.add(Math.floor(o()*a));for(var u=W(a,t).value,c=[],l=!0,p=0;p<u.length;p++){var f=l?u[p]:t,h=g(o()*f);c.push(h),h<f&&(l=!1)}return s.add(i.fromArray(c,t,!1))},i.fromArray=function(e,t,r){return L(e.map(H),H(t||10),r)},i}();e.hasOwnProperty("exports")&&(e.exports=o),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}).call(this,r(73)(e))},function(e,t,r){(function(t){function r(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){var r;if(e instanceof Uint8Array)r=e;else if(e instanceof t)r=new Uint8Array(e);else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");r=new Uint8Array(t.from(e,"utf8"))}return r},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,n){for(var o="\n"+e+" = ",s=0;s<t.length;s+=2){if(32===n)o+=r(t[s]).toUpperCase(),o+=" ",o+=r(t[s+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);o+=r(t[s+1]).toUpperCase(),o+=r(t[s]).toUpperCase()}s%6==4?o+="\n"+new Array(e.length+4).join(" "):s<t.length-2&&(o+=" ")}console.log(o)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),o=new Uint8Array(t),s=0;s<t;s++)o[s]=s%256;var i=(new Date).getTime();for(console.log("Generated random input in "+(i-n)+"ms"),n=i,s=0;s<r;s++){var a=e(o),u=(new Date).getTime(),c=u-n;n=u,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}}}).call(this,r(0).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.SECP256R1=2]="SECP256R1"}(t.SignerCurve||(t.SignerCurve={})),function(e){e[e.Mnemonic=0]="Mnemonic",e[e.Fundraiser=1]="Fundraiser",e[e.Hardware=2]="Hardware"}(t.KeyStoreType||(t.KeyStoreType={})),function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.SECP256R1=2]="SECP256R1"}(t.KeyStoreCurve||(t.KeyStoreCurve={}))},function(e,t,r){var n,o;n=this,o=function(){function e(t,r,n){return this.id=++e.highestId,this.name=t,this.symbols=r,this.postprocess=n,this}function t(e,t,r,n){this.rule=e,this.dot=t,this.reference=r,this.data=[],this.wantedBy=n,this.isComplete=this.dot===e.symbols.length}function r(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function n(e,t){this.rules=e,this.start=t||this.rules[0].name;var r=this.byName={};this.rules.forEach((function(e){r.hasOwnProperty(e.name)||(r[e.name]=[]),r[e.name].push(e)}))}function o(){this.reset("")}function s(e,t,s){if(e instanceof n){var i=e;s=t}else i=n.fromCompiled(e,t);for(var a in this.grammar=i,this.options={keepHistory:!1,lexer:i.lexer||new o},s||{})this.options[a]=s[a];this.lexer=this.options.lexer,this.lexerState=void 0;var u=new r(i,0);this.table=[u],u.wants[i.start]=[],u.predict(i.start),u.process(),this.current=0}return e.highestId=0,e.prototype.toString=function(e){function t(e){return e.literal?JSON.stringify(e.literal):e.type?"%"+e.type:e.toString()}var r=void 0===e?this.symbols.map(t).join(" "):this.symbols.slice(0,e).map(t).join(" ")+"  "+this.symbols.slice(e).map(t).join(" ");return this.name+"  "+r},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var r=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return r.left=this,r.right=e,r.isComplete&&(r.data=r.build()),r},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))},r.prototype.process=function(e){for(var t=this.states,r=this.wants,n=this.completed,o=0;o<t.length;o++){var i=t[o];if(i.isComplete){if(i.finish(),i.data!==s.fail){for(var a=i.wantedBy,u=a.length;u--;){var c=a[u];this.complete(c,i)}if(i.reference===this.index){var l=i.rule.name;(this.completed[l]=this.completed[l]||[]).push(i)}}}else{if("string"!=typeof(l=i.rule.symbols[i.dot])){this.scannable.push(i);continue}if(r[l]){if(r[l].push(i),n.hasOwnProperty(l)){var p=n[l];for(u=0;u<p.length;u++){var f=p[u];this.complete(i,f)}}}else r[l]=[i],this.predict(l)}}},r.prototype.predict=function(e){for(var r=this.grammar.byName[e]||[],n=0;n<r.length;n++){var o=r[n],s=this.wants[e],i=new t(o,0,this.index,s);this.states.push(i)}},r.prototype.complete=function(e,t){var r=e.nextState(t);this.states.push(r)},n.fromCompiled=function(t,r){var o=t.Lexer;t.ParserStart&&(r=t.ParserStart,t=t.ParserRules);var s=new n(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),r);return s.lexer=o,s},o.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},o.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},o.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},o.prototype.formatError=function(e,t){var r=this.buffer;if("string"==typeof r){var n=r.indexOf("\n",this.index);-1===n&&(n=r.length);var o=r.substring(this.lastLineBreak,n),s=this.index-this.lastLineBreak;return t+=" at line "+this.line+" col "+s+":\n\n",t+="  "+o+"\n",t+="  "+Array(s).join(" ")+"^"}return t+" at index "+(this.index-1)},s.fail={},s.prototype.feed=function(e){var t,n=this.lexer;for(n.reset(e,this.lexerState);t=n.next();){var s=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var i=this.current+1,a=new r(this.grammar,i);this.table.push(a);for(var u=void 0!==t.text?t.text:t.value,c=n.constructor===o?t.value:t,l=s.scannable,p=l.length;p--;){var f=l[p],h=f.rule.symbols[f.dot];if(h.test?h.test(c):h.type?h.type===t.type:h.literal===u){var d=f.nextState({data:c,token:t,isToken:!0,reference:i-1});a.states.push(d)}}if(a.process(),0===a.states.length){var g=new Error(this.reportError(t));throw g.offset=this.current,g.token=t,g}this.options.keepHistory&&(s.lexerState=n.save()),this.current++}return s&&(this.lexerState=n.save()),this.results=this.finish(),this},s.prototype.reportError=function(e){var t=[],r=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e);t.push(this.lexer.formatError(e,"Syntax error")),t.push("Unexpected "+r+". Instead, I was expecting to see one of the following:\n");var n=this.table.length-2;return this.table[n].states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t})).map((function(e){return this.buildFirstStateStack(e,[])}),this).forEach((function(e){var r=e[0],n=r.rule.symbols[r.dot],o=this.getSymbolDisplay(n);t.push("A "+o+" based on:"),this.displayStateStack(e,t)}),this),t.push(""),t.join("\n")},s.prototype.displayStateStack=function(e,t){for(var r,n=0,o=0;o<e.length;o++){var s=e[o],i=s.rule.toString(s.dot);i===r?n++:(n>0&&t.push("     "+n+" more lines identical to this"),n=0,t.push("    "+i)),r=i}},s.prototype.getSymbolDisplay=function(e){var t=typeof e;if("string"===t)return e;if("object"===t&&e.literal)return JSON.stringify(e.literal);if("object"===t&&e instanceof RegExp)return"character matching "+e;if("object"===t&&e.type)return e.type+" token";throw new Error("Unknown symbol type: "+e)},s.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var r=e.wantedBy[0],n=[e].concat(t),o=this.buildFirstStateStack(r,n);return null===o?null:[e].concat(o)},s.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},s.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},s.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},s.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(r){r.rule.name===t&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==s.fail&&e.push(r)})),e.map((function(e){return e.data}))},{Parser:s,Grammar:n,Rule:e}},e.exports?e.exports=o():n.nearley=o()},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(15)),i=o(r(11));s.default.setFetch(window.fetch.bind(window)),i.default.setLogger(console),n(r(45)),n(r(10)),n(r(4)),n(r(3)),n(r(7)),n(r(9)),n(r(81)),n(r(82)),n(r(83)),n(r(84)),n(r(86)),n(r(87)),n(r(88)),n(r(89)),n(r(90)),n(r(91)),n(r(92)),n(r(93)),n(r(94)),n(r(18)),n(r(29)),n(r(95)),n(r(23)),n(r(96)),n(r(19)),n(r(8)),n(r(2)),n(r(97)),n(r(42))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(18),i=r(10),a=o(r(77)),u=o(r(43));!function(e){function t(e){const t=new u.Parser(u.Grammar.fromCompiled(a.default));t.feed(i.TezosLanguageUtil.normalizeMichelineWhiteSpace(i.TezosLanguageUtil.stripComments(e)));const r=t.results[0];return 1===r.length&&(r[0].name="default"),r}function r(e){return t(i.TezosLanguageUtil.preProcessMichelsonScript(e)[0])}e.generateEntryPointsFromParams=t,e.generateEntryPointsFromCode=r,e.generateEntryPointsFromAddress=function(e,t,o){return n(this,void 0,void 0,(function*(){return r((yield s.TezosConseilClient.getAccount(e,t,o)).script)}))}}(t.TezosContractIntrospector||(t.TezosContractIntrospector={}))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),i=n[0],a=n[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,i,a)),l=0,p=a>0?i-4:i;for(r=0;r<p;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,s=[],i=0,a=r-o;i<a;i+=16383)s.push(l(e,i,i+16383>a?a:i+16383));1===o?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=i.length;a<u;++a)n[a]=i[a],o[i.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,s,i=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(n[(s=o)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var s,i,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+p],p+=f,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=n;l>0;i=256*i+e[t+p],p+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),s-=c}return(h?-1:1)*i*Math.pow(2,s-n)},t.write=function(e,t,r,n,o,s){var i,a,u,c=8*s-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(i++,u/=2),i+p>=l?(a=0,i=l):i+p>=1?(a=(t*u-1)*Math.pow(2,o),i+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[r+h]=255&i,h+=d,i/=256,c-=8);e[r+h-d]|=128*g}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};function o(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const s=r(4),i=n(r(28));t.DefaultMichelsonKeywords=['"parameter"','"storage"','"code"','"False"','"Elt"','"Left"','"None"','"Pair"','"Right"','"Some"','"True"','"Unit"','"PACK"','"UNPACK"','"BLAKE2B"','"SHA256"','"SHA512"','"ABS"','"ADD"','"AMOUNT"','"AND"','"BALANCE"','"CAR"','"CDR"','"CHECK_SIGNATURE"','"COMPARE"','"CONCAT"','"CONS"','"CREATE_ACCOUNT"','"CREATE_CONTRACT"','"IMPLICIT_ACCOUNT"','"DIP"','"DROP"','"DUP"','"EDIV"','"EMPTY_MAP"','"EMPTY_SET"','"EQ"','"EXEC"','"FAILWITH"','"GE"','"GET"','"GT"','"HASH_KEY"','"IF"','"IF_CONS"','"IF_LEFT"','"IF_NONE"','"INT"','"LAMBDA"','"LE"','"LEFT"','"LOOP"','"LSL"','"LSR"','"LT"','"MAP"','"MEM"','"MUL"','"NEG"','"NEQ"','"NIL"','"NONE"','"NOT"','"NOW"','"OR"','"PAIR"','"PUSH"','"RIGHT"','"SIZE"','"SOME"','"SOURCE"','"SENDER"','"SELF"','"STEPS_TO_QUOTA"','"SUB"','"SWAP"','"TRANSFER_TOKENS"','"SET_DELEGATE"','"UNIT"','"UPDATE"','"XOR"','"ITER"','"LOOP_LEFT"','"ADDRESS"','"CONTRACT"','"ISNAT"','"CAST"','"RENAME"','"bool"','"contract"','"int"','"key"','"key_hash"','"lambda"','"list"','"map"','"big_map"','"nat"','"option"','"or"','"pair"','"set"','"signature"','"string"','"bytes"','"mutez"','"timestamp"','"unit"','"operation"','"address"','"SLICE"','"DIG"','"DUG"','"EMPTY_BIG_MAP"','"APPLY"','"chain_id"','"CHAIN_ID"','"LEVEL"','"SELF_ADDRESS"','"never"','"NEVER"','"UNPAIR"','"VOTING_POWER"','"TOTAL_VOTING_POWER"','"KECCAK"','"SHA3"','"PAIRING_CHECK"','"bls12_381_g1"','"bls12_381_g2"','"bls12_381_fr"','"sapling_state"','"sapling_transaction"','"SAPLING_EMPTY_STATE"','"SAPLING_VERIFY_UPDATE"','"ticket"','"TICKET"','"READ_TICKET"','"SPLIT_TICKET"','"JOIN_TICKETS"','"GET_AND_UPDATE"','"chest"','"chest_key"','"OPEN_CHEST"','"VIEW"','"view"','"constant"'];let a=[...t.DefaultMichelsonKeywords];t.setKeywordList=e=>{a=e},t.getCodeForKeyword=e=>a.indexOf(e),t.getKeywordForCode=e=>a[e];const u=i.compile({lbrace:"{",rbrace:"}",lbracket:"[",rbracket:"]",colon:":",comma:",",_:/[ \t]+/,quotedValue:/"(?:[^"\\]|\\.)*"/s}),c=e=>("00"+t.getCodeForKeyword(e).toString(16)).slice(-2),l=e=>("0000000"+e.toString(16)).slice(-8),p={Lexer:u,ParserRules:[{name:"main",symbols:["staticObject"],postprocess:o},{name:"main",symbols:["primAny"],postprocess:o},{name:"main",symbols:["anyArray"],postprocess:o},{name:"staticInt$ebnf$1",symbols:[]},{name:"staticInt$ebnf$1",symbols:["staticInt$ebnf$1",u.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticInt",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"int"'},"staticInt$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{const t=e[6].toString();return"00"+s.TezosMessageUtils.writeSignedInt(t.substring(1,t.length-1))}},{name:"staticString$ebnf$1",symbols:[]},{name:"staticString$ebnf$1",symbols:["staticString$ebnf$1",u.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticString",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"string"'},"staticString$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t=e[6].toString();t=t.substring(1,t.length-1),t=t.replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\\\/g,"\\");const r=l(t.length);return t=t.split("").map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join(""),"01"+r+t}},{name:"staticBytes$ebnf$1",symbols:[]},{name:"staticBytes$ebnf$1",symbols:["staticBytes$ebnf$1",u.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticBytes",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"bytes"'},"staticBytes$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t=e[6].toString();t=t.substring(1,t.length-1);return"0a"+l(t.length/2)+t}},{name:"staticObject",symbols:["staticInt"],postprocess:o},{name:"staticObject",symbols:["staticString"],postprocess:o},{name:"staticObject",symbols:["staticBytes"],postprocess:o},{name:"primBare$ebnf$1",symbols:[]},{name:"primBare$ebnf$1",symbols:["primBare$ebnf$1",u.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"primBare",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"prim"'},"primBare$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"03"+c(e[6].toString())},{name:"primArg$ebnf$1",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArg$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArg$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArg$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArg$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1",symbols:["any","primArg$ebnf$3$subexpression$1$ebnf$1","primArg$ebnf$3$subexpression$1$ebnf$2"]},{name:"primArg$ebnf$3",symbols:["primArg$ebnf$3$subexpression$1"]},{name:"primArg$ebnf$3$subexpression$2$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArg$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$2$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArg$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$2",symbols:["any","primArg$ebnf$3$subexpression$2$ebnf$1","primArg$ebnf$3$subexpression$2$ebnf$2"]},{name:"primArg$ebnf$3",symbols:["primArg$ebnf$3","primArg$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArg",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"prim"'},"primArg$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("comma")?{type:"comma"}:comma,u.has("_")?{type:"_"}:_,{literal:'"args"'},"primArg$ebnf$2",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("_")?{type:"_"}:_,"primArg$ebnf$3",u.has("_")?{type:"_"}:_,u.has("rbracket")?{type:"rbracket"}:rbracket,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t="05";2==e[15].length?t="07":e[15].length>2&&(t="09");const r=c(e[6].toString());let n=e[15].map(e=>e[0]).join("");return"09"===t&&(n=("0000000"+(n.length/2).toString(16)).slice(-8)+n,n+="00000000"),t+r+n}},{name:"primAnn$ebnf$1",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primAnn$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primAnn$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1",symbols:[u.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primAnn$ebnf$3$subexpression$1$ebnf$1","primAnn$ebnf$3$subexpression$1$ebnf$2"]},{name:"primAnn$ebnf$3",symbols:["primAnn$ebnf$3$subexpression$1"]},{name:"primAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$2",symbols:[u.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primAnn$ebnf$3$subexpression$2$ebnf$1","primAnn$ebnf$3$subexpression$2$ebnf$2"]},{name:"primAnn$ebnf$3",symbols:["primAnn$ebnf$3","primAnn$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primAnn",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"prim"'},"primAnn$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("comma")?{type:"comma"}:comma,u.has("_")?{type:"_"}:_,{literal:'"annots"'},"primAnn$ebnf$2",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("_")?{type:"_"}:_,"primAnn$ebnf$3",u.has("_")?{type:"_"}:_,u.has("rbracket")?{type:"rbracket"}:rbracket,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{const t=c(e[6].toString());let r=e[15].map(e=>{let t=e[0].toString();return t=t.substring(1,t.length-1),t}).join(" ");return r=r.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),r=l(r.length/2)+r,"04"+t+r}},{name:"primArgAnn$ebnf$1",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1",symbols:["any","primArgAnn$ebnf$3$subexpression$1$ebnf$1","primArgAnn$ebnf$3$subexpression$1$ebnf$2"]},{name:"primArgAnn$ebnf$3",symbols:["primArgAnn$ebnf$3$subexpression$1"]},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$2",symbols:["any","primArgAnn$ebnf$3$subexpression$2$ebnf$1","primArgAnn$ebnf$3$subexpression$2$ebnf$2"]},{name:"primArgAnn$ebnf$3",symbols:["primArgAnn$ebnf$3","primArgAnn$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArgAnn$ebnf$4",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$4",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1",symbols:[u.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primArgAnn$ebnf$5$subexpression$1$ebnf$1","primArgAnn$ebnf$5$subexpression$1$ebnf$2"]},{name:"primArgAnn$ebnf$5",symbols:["primArgAnn$ebnf$5$subexpression$1"]},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$2",symbols:[u.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primArgAnn$ebnf$5$subexpression$2$ebnf$1","primArgAnn$ebnf$5$subexpression$2$ebnf$2"]},{name:"primArgAnn$ebnf$5",symbols:["primArgAnn$ebnf$5","primArgAnn$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArgAnn",symbols:[u.has("lbrace")?{type:"lbrace"}:lbrace,u.has("_")?{type:"_"}:_,{literal:'"prim"'},"primArgAnn$ebnf$1",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("quotedValue")?{type:"quotedValue"}:quotedValue,u.has("comma")?{type:"comma"}:comma,u.has("_")?{type:"_"}:_,{literal:'"args"'},"primArgAnn$ebnf$2",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("_")?{type:"_"}:_,"primArgAnn$ebnf$3",u.has("_")?{type:"_"}:_,u.has("rbracket")?{type:"rbracket"}:rbracket,u.has("comma")?{type:"comma"}:comma,u.has("_")?{type:"_"}:_,{literal:'"annots"'},"primArgAnn$ebnf$4",u.has("colon")?{type:"colon"}:colon,u.has("_")?{type:"_"}:_,u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("_")?{type:"_"}:_,"primArgAnn$ebnf$5",u.has("_")?{type:"_"}:_,u.has("rbracket")?{type:"rbracket"}:rbracket,u.has("_")?{type:"_"}:_,u.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t="06";2==e[15].length?t="08":e[15].length>2&&(t="09");const r=c(e[6].toString());let n=e[15].map(e=>e[0]).join(""),o=e[26].map(e=>{let t=e[0].toString();return t=t.substring(1,t.length-1),t}).join(" ");return o=o.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),o=l(o.length/2)+o,"09"===t&&(n=("0000000"+(n.length/2).toString(16)).slice(-8)+n),t+r+n+o}},{name:"primAny",symbols:["primBare"],postprocess:o},{name:"primAny",symbols:["primArg"],postprocess:o},{name:"primAny",symbols:["primAnn"],postprocess:o},{name:"primAny",symbols:["primArgAnn"],postprocess:o},{name:"any",symbols:["primAny"],postprocess:o},{name:"any",symbols:["staticObject"],postprocess:o},{name:"any",symbols:["anyArray"],postprocess:o},{name:"anyArray",symbols:[u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:function(e){return"0200000000"}},{name:"anyArray$ebnf$1$subexpression$1$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"anyArray$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$1$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"anyArray$ebnf$1$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$1",symbols:["any","anyArray$ebnf$1$subexpression$1$ebnf$1","anyArray$ebnf$1$subexpression$1$ebnf$2"]},{name:"anyArray$ebnf$1",symbols:["anyArray$ebnf$1$subexpression$1"]},{name:"anyArray$ebnf$1$subexpression$2$ebnf$1",symbols:[u.has("comma")?{type:"comma"}:comma],postprocess:o},{name:"anyArray$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$2$ebnf$2",symbols:[u.has("_")?{type:"_"}:_],postprocess:o},{name:"anyArray$ebnf$1$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$2",symbols:["any","anyArray$ebnf$1$subexpression$2$ebnf$1","anyArray$ebnf$1$subexpression$2$ebnf$2"]},{name:"anyArray$ebnf$1",symbols:["anyArray$ebnf$1","anyArray$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"anyArray",symbols:[u.has("lbracket")?{type:"lbracket"}:lbracket,u.has("_")?{type:"_"}:_,"anyArray$ebnf$1",u.has("_")?{type:"_"}:_,u.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>{const t=e[2].map(e=>e[0]).join("");return"02"+l(t.length/2)+t}}],ParserStart:"main"};t.default=p},function(e,t,r){"use strict";var n=r(50),o=r(70);e.exports=o((function(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},function(e,t,r){"use strict";var n=r(1),o=r(51),s=r(63),i=r(64),a=r(69);function u(e){a.call(this,"digest"),this._hash=e}n(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new o:"rmd160"===e||"ripemd160"===e?new s:new u(i(e))}},function(e,t,r){"use strict";var n=r(1),o=r(32),s=r(5).Buffer,i=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,o,s,i){return u(e+(t&r|~t&n)+o+s|0,i)+t|0}function l(e,t,r,n,o,s,i){return u(e+(t&n|r&~n)+o+s|0,i)+t|0}function p(e,t,r,n,o,s,i){return u(e+(t^r^n)+o+s|0,i)+t|0}function f(e,t,r,n,o,s,i){return u(e+(r^(t|~n))+o+s|0,i)+t|0}n(a,o),a.prototype._update=function(){for(var e=i,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,o=this._c,s=this._d;r=c(r,n,o,s,e[0],3614090360,7),s=c(s,r,n,o,e[1],3905402710,12),o=c(o,s,r,n,e[2],606105819,17),n=c(n,o,s,r,e[3],3250441966,22),r=c(r,n,o,s,e[4],4118548399,7),s=c(s,r,n,o,e[5],1200080426,12),o=c(o,s,r,n,e[6],2821735955,17),n=c(n,o,s,r,e[7],4249261313,22),r=c(r,n,o,s,e[8],1770035416,7),s=c(s,r,n,o,e[9],2336552879,12),o=c(o,s,r,n,e[10],4294925233,17),n=c(n,o,s,r,e[11],2304563134,22),r=c(r,n,o,s,e[12],1804603682,7),s=c(s,r,n,o,e[13],4254626195,12),o=c(o,s,r,n,e[14],2792965006,17),r=l(r,n=c(n,o,s,r,e[15],1236535329,22),o,s,e[1],4129170786,5),s=l(s,r,n,o,e[6],3225465664,9),o=l(o,s,r,n,e[11],643717713,14),n=l(n,o,s,r,e[0],3921069994,20),r=l(r,n,o,s,e[5],3593408605,5),s=l(s,r,n,o,e[10],38016083,9),o=l(o,s,r,n,e[15],3634488961,14),n=l(n,o,s,r,e[4],3889429448,20),r=l(r,n,o,s,e[9],568446438,5),s=l(s,r,n,o,e[14],3275163606,9),o=l(o,s,r,n,e[3],4107603335,14),n=l(n,o,s,r,e[8],1163531501,20),r=l(r,n,o,s,e[13],2850285829,5),s=l(s,r,n,o,e[2],4243563512,9),o=l(o,s,r,n,e[7],1735328473,14),r=p(r,n=l(n,o,s,r,e[12],2368359562,20),o,s,e[5],4294588738,4),s=p(s,r,n,o,e[8],2272392833,11),o=p(o,s,r,n,e[11],1839030562,16),n=p(n,o,s,r,e[14],4259657740,23),r=p(r,n,o,s,e[1],2763975236,4),s=p(s,r,n,o,e[4],1272893353,11),o=p(o,s,r,n,e[7],4139469664,16),n=p(n,o,s,r,e[10],3200236656,23),r=p(r,n,o,s,e[13],681279174,4),s=p(s,r,n,o,e[0],3936430074,11),o=p(o,s,r,n,e[3],3572445317,16),n=p(n,o,s,r,e[6],76029189,23),r=p(r,n,o,s,e[9],3654602809,4),s=p(s,r,n,o,e[12],3873151461,11),o=p(o,s,r,n,e[15],530742520,16),r=f(r,n=p(n,o,s,r,e[2],3299628645,23),o,s,e[0],4096336452,6),s=f(s,r,n,o,e[7],1126891415,10),o=f(o,s,r,n,e[14],2878612391,15),n=f(n,o,s,r,e[5],4237533241,21),r=f(r,n,o,s,e[12],1700485571,6),s=f(s,r,n,o,e[3],2399980690,10),o=f(o,s,r,n,e[10],4293915773,15),n=f(n,o,s,r,e[1],2240044497,21),r=f(r,n,o,s,e[8],1873313359,6),s=f(s,r,n,o,e[15],4264355552,10),o=f(o,s,r,n,e[6],2734768916,15),n=f(n,o,s,r,e[13],1309151649,21),r=f(r,n,o,s,e[4],4149444226,6),s=f(s,r,n,o,e[11],3174756917,10),o=f(o,s,r,n,e[2],718787259,15),n=f(n,o,s,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+o|0,this._d=this._d+s|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=s.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},function(e,t){},function(e,t,r){"use strict";var n=r(5).Buffer,o=r(54);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,o,s=n.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,r=s,o=a,t.copy(r,o),a+=i.data.length,i=i.next;return s},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(56),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(13))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,s,i,a,u=1,c={},l=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){s.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(o=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&d(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(i+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return c[u]=o,n(u),u++},f.clearImmediate=h}function h(e){delete c[e]}function d(e){if(l)setTimeout(d,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(13),r(20))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(13))},function(e,t,r){"use strict";e.exports=s;var n=r(37),o=r(16);function s(e){if(!(this instanceof s))return new s(e);n.call(this,e)}o.inherits=r(1),o.inherits(s,n),s.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(26)},function(e,t,r){e.exports=r(12)},function(e,t,r){e.exports=r(25).Transform},function(e,t,r){e.exports=r(25).PassThrough},function(e,t,r){"use strict";var n=r(0).Buffer,o=r(1),s=r(32),i=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function h(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(e,t){return e<<t|e>>>32-t}function g(e,t,r,n,o,s,i,a){return d(e+(t^r^n)+s+i|0,a)+o|0}function m(e,t,r,n,o,s,i,a){return d(e+(t&r|~t&n)+s+i|0,a)+o|0}function y(e,t,r,n,o,s,i,a){return d(e+((t|~r)^n)+s+i|0,a)+o|0}function b(e,t,r,n,o,s,i,a){return d(e+(t&n|r&~n)+s+i|0,a)+o|0}function P(e,t,r,n,o,s,i,a){return d(e+(t^(r|~n))+s+i|0,a)+o|0}o(h,s),h.prototype._update=function(){for(var e=i,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,o=0|this._c,s=0|this._d,h=0|this._e,$=0|this._a,v=0|this._b,_=0|this._c,A=0|this._d,T=0|this._e,I=0;I<80;I+=1){var S,D;I<16?(S=g(r,n,o,s,h,e[a[I]],p[0],c[I]),D=P($,v,_,A,T,e[u[I]],f[0],l[I])):I<32?(S=m(r,n,o,s,h,e[a[I]],p[1],c[I]),D=b($,v,_,A,T,e[u[I]],f[1],l[I])):I<48?(S=y(r,n,o,s,h,e[a[I]],p[2],c[I]),D=y($,v,_,A,T,e[u[I]],f[2],l[I])):I<64?(S=b(r,n,o,s,h,e[a[I]],p[3],c[I]),D=m($,v,_,A,T,e[u[I]],f[3],l[I])):(S=P(r,n,o,s,h,e[a[I]],p[4],c[I]),D=g($,v,_,A,T,e[u[I]],f[4],l[I])),r=h,h=s,s=d(o,10),o=n,n=S,$=T,T=A,A=d(_,10),_=v,v=D}var E=this._b+o+A|0;this._b=this._c+s+T|0,this._c=this._d+h+$|0,this._d=this._e+r+v|0,this._e=this._a+n+_|0,this._a=E},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=h},function(e,t,r){(t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r}).sha=r(65),t.sha1=r(66),t.sha224=r(67),t.sha256=r(38),t.sha384=r(68),t.sha512=r(39)},function(e,t,r){var n=r(1),o=r(14),s=r(5).Buffer,i=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e){return e<<30|e>>>2}function l(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,s=0|this._c,a=0|this._d,u=0|this._e,p=0;p<16;++p)r[p]=e.readInt32BE(4*p);for(;p<80;++p)r[p]=r[p-3]^r[p-8]^r[p-14]^r[p-16];for(var f=0;f<80;++f){var h=~~(f/20),d=0|((t=n)<<5|t>>>27)+l(h,o,s,a)+u+r[f]+i[h];u=a,a=s,s=c(o),o=n,n=d}this._a=n+this._a|0,this._b=o+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(1),o=r(14),s=r(5).Buffer,i=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function p(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,s=0|this._c,a=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=e.readInt32BE(4*f);for(;f<80;++f)r[f]=(t=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|t>>>31;for(var h=0;h<80;++h){var d=~~(h/20),g=c(n)+p(d,o,s,a)+u+r[h]+i[d]|0;u=a,a=s,s=l(o),o=n,n=g}this._a=n+this._a|0,this._b=o+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(1),o=r(38),s=r(14),i=r(5).Buffer,a=new Array(64);function u(){this.init(),this._w=a,s.call(this,64,56)}n(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=i.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u},function(e,t,r){var n=r(1),o=r(39),s=r(14),i=r(5).Buffer,a=new Array(160);function u(){this.init(),this._w=a,s.call(this,128,112)}n(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=i.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u},function(e,t,r){var n=r(5).Buffer,o=r(33).Transform,s=r(27).StringDecoder;function i(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(1)(i,o),i.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var o=this._update(e);return this.hashMode?this:(r&&(o=this._toString(o,r)),o)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},i.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},i.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},i.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=i},function(e,t,r){"use strict";var n=r(71),o=r(5).Buffer;e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),o=e(r);if(!(n[0]^o[0]|n[1]^o[1]|n[2]^o[2]|n[3]^o[3]))return r}return{encode:function(t){var r=e(t);return n.encode(o.concat([t,r],t.length+4))},decode:function(e){var r=t(n.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},function(e,t,r){var n=r(72);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(e,t,r){"use strict";var n=r(5).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");var t=new Uint8Array(256);t.fill(255);for(var r=0;r<e.length;r++){var o=e.charAt(r),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=r}var i=e.length,a=e.charAt(0),u=Math.log(i)/Math.log(256),c=Math.log(256)/Math.log(i);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0;if(" "!==e[r]){for(var o=0,s=0;e[r]===a;)o++,r++;for(var c=(e.length-r)*u+1>>>0,l=new Uint8Array(c);e[r];){var p=t[e.charCodeAt(r)];if(255===p)return;for(var f=0,h=c-1;(0!==p||f<s)&&-1!==h;h--,f++)p+=i*l[h]>>>0,l[h]=p%256>>>0,p=p/256>>>0;if(0!==p)throw new Error("Non-zero carry");s=f,r++}if(" "!==e[r]){for(var d=c-s;d!==c&&0===l[d];)d++;var g=n.allocUnsafe(o+(c-d));g.fill(0,0,o);for(var m=o;d!==c;)g[m++]=l[d++];return g}}}return{encode:function(t){if(!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,o=0,s=0,u=t.length;s!==u&&0===t[s];)s++,r++;for(var l=(u-s)*c+1>>>0,p=new Uint8Array(l);s!==u;){for(var f=t[s],h=0,d=l-1;(0!==f||h<o)&&-1!==d;d--,h++)f+=256*p[d]>>>0,p[d]=f%i>>>0,f=f/i>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,s++}for(var g=l-o;g!==l&&0===p[g];)g++;for(var m=a.repeat(r);g<l;++g)m+=e.charAt(p[g]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+i+" character")}}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(41);function o(e,t,r){var n=e[t]+e[r],o=e[t+1]+e[r+1];n>=4294967296&&o++,e[t]=n,e[t+1]=o}function s(e,t,r,n){var o=e[t]+r;r<0&&(o+=4294967296);var s=e[t+1]+n;o>=4294967296&&s++,e[t]=o,e[t+1]=s}function i(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,r,n,i,a){var u=p[i],c=p[i+1],f=p[a],h=p[a+1];o(l,e,t),s(l,e,u,c);var d=l[n]^l[e],g=l[n+1]^l[e+1];l[n]=g,l[n+1]=d,o(l,r,n),d=l[t]^l[r],g=l[t+1]^l[r+1],l[t]=d>>>24^g<<8,l[t+1]=g>>>24^d<<8,o(l,e,t),s(l,e,f,h),d=l[n]^l[e],g=l[n+1]^l[e+1],l[n]=d>>>16^g<<16,l[n+1]=g>>>16^d<<16,o(l,r,n),d=l[t]^l[r],g=l[t+1]^l[r+1],l[t]=g>>>31^d<<1,l[t+1]=d>>>31^g<<1}var u=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),l=new Uint32Array(32),p=new Uint32Array(32);function f(e,t){var r=0;for(r=0;r<16;r++)l[r]=e.h[r],l[r+16]=u[r];for(l[24]=l[24]^e.t,l[25]=l[25]^e.t/4294967296,t&&(l[28]=~l[28],l[29]=~l[29]),r=0;r<32;r++)p[r]=i(e.b,4*r);for(r=0;r<12;r++)a(0,8,16,24,c[16*r+0],c[16*r+1]),a(2,10,18,26,c[16*r+2],c[16*r+3]),a(4,12,20,28,c[16*r+4],c[16*r+5]),a(6,14,22,30,c[16*r+6],c[16*r+7]),a(0,10,20,30,c[16*r+8],c[16*r+9]),a(2,12,22,24,c[16*r+10],c[16*r+11]),a(4,14,16,26,c[16*r+12],c[16*r+13]),a(6,8,18,28,c[16*r+14],c[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^l[r]^l[r+16]}function h(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},n=0;n<16;n++)r.h[n]=u[n];var o=t?t.length:0;return r.h[0]^=16842752^o<<8^e,t&&(d(r,t),r.c=128),r}function d(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,f(e,!1),e.c=0),e.b[e.c++]=t[r]}function g(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;f(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function m(e,t,r){r=r||64,e=n.normalizeInput(e);var o=h(r,t);return d(o,e),g(o)}e.exports={blake2b:m,blake2bHex:function(e,t,r){var o=m(e,t,r);return n.toHex(o)},blake2bInit:h,blake2bUpdate:d,blake2bFinal:g}},function(e,t,r){var n=r(41);function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function s(e,t,r,n,o,s){c[e]=c[e]+c[t]+o,c[n]=i(c[n]^c[e],16),c[r]=c[r]+c[n],c[t]=i(c[t]^c[r],12),c[e]=c[e]+c[t]+s,c[n]=i(c[n]^c[e],8),c[r]=c[r]+c[n],c[t]=i(c[t]^c[r],7)}function i(e,t){return e>>>t^e<<32-t}var a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),l=new Uint32Array(16);function p(e,t){var r=0;for(r=0;r<8;r++)c[r]=e.h[r],c[r+8]=a[r];for(c[12]^=e.t,c[13]^=e.t/4294967296,t&&(c[14]=~c[14]),r=0;r<16;r++)l[r]=o(e.b,4*r);for(r=0;r<10;r++)s(0,4,8,12,l[u[16*r+0]],l[u[16*r+1]]),s(1,5,9,13,l[u[16*r+2]],l[u[16*r+3]]),s(2,6,10,14,l[u[16*r+4]],l[u[16*r+5]]),s(3,7,11,15,l[u[16*r+6]],l[u[16*r+7]]),s(0,5,10,15,l[u[16*r+8]],l[u[16*r+9]]),s(1,6,11,12,l[u[16*r+10]],l[u[16*r+11]]),s(2,7,8,13,l[u[16*r+12]],l[u[16*r+13]]),s(3,4,9,14,l[u[16*r+14]],l[u[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=c[r]^c[r+8]}function f(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(a),b:new Uint32Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(h(n,t),n.c=64),n}function h(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,p(e,!1),e.c=0),e.b[e.c++]=t[r]}function d(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;p(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function g(e,t,r){r=r||32,e=n.normalizeInput(e);var o=f(r,t);return h(o,e),d(o)}e.exports={blake2s:g,blake2sHex:function(e,t,r){var o=g(e,t,r);return n.toHex(o)},blake2sInit:f,blake2sUpdate:h,blake2sFinal:d}},function(e,t,r){"use strict";function n(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const o=r(28),s=/SET_C[AD]+R/,i=/DII+P/,a=/DUU+P/,u=new RegExp(i),c=new RegExp(a),l=["ASSERT","ASSERT_EQ","ASSERT_NEQ","ASSERT_GT","ASSERT_LT","ASSERT_GE","ASSERT_LE","ASSERT_NONE","ASSERT_SOME","ASSERT_LEFT","ASSERT_RIGHT","ASSERT_CMPEQ","ASSERT_CMPNEQ","ASSERT_CMPGT","ASSERT_CMPLT","ASSERT_CMPGE","ASSERT_CMPLE"],p=["IFCMPEQ","IFCMPNEQ","IFCMPLT","IFCMPGT","IFCMPLE","IFCMPGE"],f=["CMPEQ","CMPNEQ","CMPLT","CMPGT","CMPLE","CMPGE"],h=["IFEQ","IFNEQ","IFLT","IFGT","IFLE","IFGE"],d=o.compile({annot:/[\@\%\:][a-z_A-Z0-9]+/,lparen:"(",rparen:")",lbrace:"{",rbrace:"}",ws:/[ \t]+/,semicolon:";",bytes:/0x[0-9a-fA-F]+/,number:/-?[0-9]+(?!x)/,parameter:["parameter","Parameter"],storage:["Storage","storage"],code:["Code","code"],comparableType:["int","nat","string","bytes","mutez","bool","key_hash","timestamp","chain_id","never"],constantType:["key","unit","signature","operation","address","bls12_381_fr","bls12_381_g1","bls12_381_g2"],singleArgType:["option","list","set","contract","ticket"],doubleArgType:["pair","or","lambda","map","big_map"],baseInstruction:["ABS","ADD","ADDRESS","AMOUNT","AND","BALANCE","BLAKE2B","CAR","CAST","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CONTRACT","DIP","EDIV","EMPTY_SET","EQ","EXEC","FAIL","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","IF_RIGHT","IMPLICIT_ACCOUNT","INT","ISNAT","ITER","LAMBDA","LE","LEFT","LOOP","LOOP_LEFT","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PACK","PAIR","REDUCE","RENAME","RIGHT","SELF","SENDER","SET_DELEGATE","SHA256","SHA512","SIZE","SLICE","SOME","SOURCE","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","UNIT","UNPACK","UPDATE","XOR","UNPAIR","UNPAPAIR","IF_SOME","IFCMPEQ","IFCMPNEQ","IFCMPLT","IFCMPGT","IFCMPLE","IFCMPGE","CMPEQ","CMPNEQ","CMPLT","CMPGT","CMPLE","CMPGE","IFEQ","NEQ","IFLT","IFGT","IFLE","IFGE","EMPTY_BIG_MAP","APPLY","CHAIN_ID","KECCAK","SHA3","PAIRING_CHECK","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","GET_AND_UPDATE","NEVER","VOTING_POWER","TOTAL_VOTING_POWER","TICKET","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","SELF_ADDRESS","LEVEL"],macroCADR:/C[AD]+R/,macroDIP:i,macroDUP:a,macroSETCADR:s,macroASSERTlist:l,constantData:["Unit","True","False","None","instruction"],singleArgData:["Left","Right","Some"],doubleArgData:["Pair"],elt:"Elt",word:/[a-zA-Z_0-9]+/,string:/"(?:[^"\\]|\\.)*"/s}),g=e=>new RegExp("^C(A|D)(A|D)+R$").test(e),m=e=>f.includes(e),y=e=>c.test(e),b=e=>l.includes(e),P=e=>"FAIL"===e,$=e=>p.includes(e)||h.includes(e)||"IF_SOME"===e,v=(e,t,r,n)=>{const o=n?`, "annots": [${n}]`:"";switch(e){case"IFCMPEQ":return`[{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPGE":return`[{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPGT":return`[{"prim":"COMPARE"},{"prim":"GT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPLE":return`[{"prim":"COMPARE"},{"prim":"LE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPLT":return`[{"prim":"COMPARE"},{"prim":"LT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPNEQ":return`[{"prim":"COMPARE"},{"prim":"NEQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFEQ":return`[{"prim":"EQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFGE":return`[{"prim":"GE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFGT":return`[{"prim":"GT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFLE":return`[{"prim":"LE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFLT":return`[{"prim":"LT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFNEQ":return`[{"prim":"NEQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IF_SOME":return`[{"prim":"IF_NONE","args":[ [${r}], [${t}]]${o}}]`;default:throw new Error("Could not process "+e)}},_=e=>u.test(e),A=(e,t,r)=>{let n="";if(u.test(e)){const o=e.length-2;for(let e=0;e<o;e++)n+='[{ "prim": "DIP", "args": [ ';n=`${n} [ ${t} ] ]`,r&&(n=`${n}, "annots": [${r}]`),n+=" }]";for(let e=0;e<o-1;e++)n+=" ] }]";return n}throw new Error("Unexpected parameter for DIP processing: "+e)},T=e=>"UNPAIR"==e||"UNPAPAIR"==e,I=e=>s.test(e),S=e=>{if(0===e.length)return"";const t=e.charAt(0);if(1===e.length){if("A"===t)return'[{"prim": "CDR","annots":["@%%"]}, {"prim": "SWAP"}, {"prim": "PAIR","annots":["%","%@"]}]';if("D"===t)return'[{"prim": "CAR","annots":["@%%"]}, {"prim": "PAIR","annots":["%@","%"]}]'}return"A"===t?`[{"prim": "DUP"}, {"prim": "DIP", "args": [[{"prim": "CAR","annots":["@%%"]}, ${S(e.slice(1))}]]}, {"prim": "CDR","annots":["@%%"]}, {"prim": "SWAP"}, {"prim": "PAIR","annots":["%@","%@"]}]`:"D"===t?`[{"prim": "DUP"}, {"prim": "DIP", "args": [[{"prim": "CDR","annots":["@%%"]}, ${S(e.slice(1))}]]}, {"prim": "CAR","annots":["@%%"]}, {"prim": "PAIR","annots":["%@","%@"]}]`:void 0},D=e=>!!b(e)||(!!m(e)||(!!_(e)||(!!y(e)||(!!P(e)||(!!$(e)||(!!g(e)||(!!T(e)||(!!I(e)||void 0)))))))),E=(e,t)=>g(e)?((e,t)=>{var r=e.slice(1,-1).split("").map(e=>"A"===e?'{ "prim": "CAR" }':'{ "prim": "CDR" }');if(null!=t){const n=e.slice(-2,-1);"A"===n?r[r.length-1]=`{ "prim": "CAR", "annots": [${t}] }`:"D"===n&&(r[r.length-1]=`{ "prim": "CDR", "annots": [${t}] }`)}return`[${r.join(", ")}]`})(e,t):b(e)?((e,t)=>{const r=t?`, "annots": [${t}]`:"";switch(e){case"ASSERT":return`[{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPEQ":return`[[{"prim":"COMPARE"},{"prim":"EQ"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPGE":return`[[{"prim":"COMPARE"},{"prim":"GE"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPGT":return`[[{"prim":"COMPARE"},{"prim":"GT"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPLE":return`[[{"prim":"COMPARE"},{"prim":"LE"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPLT":return`[[{"prim":"COMPARE"},{"prim":"LT"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPNEQ":return`[[{"prim":"COMPARE"},{"prim":"NEQ"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_EQ":return`[{"prim":"EQ"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]]`;case"ASSERT_GE":return`[{"prim":"GE"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_GT":return`[{"prim":"GT"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_LE":return`[{"prim":"LE"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_LT":return`[{"prim":"LT"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_NEQ":return`[{"prim":"NEQ"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_NONE":return'[{"prim":"IF_NONE","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"}]]]}]';case"ASSERT_SOME":return'[{"prim":"IF_NONE","args":[[[{"prim":"UNIT"},{"prim":"FAILWITH"}]],[]]}]';case"ASSERT_LEFT":case"ASSERT_RIGHT":return"";default:throw new Error("Could not process "+e)}})(e,t):m(e)?((e,t)=>{var r=e.substring(3),n=C([""+r]);return null!=t&&(n=`{ "prim": "${r}", "annots": [${t}] }`),`[${C(["COMPARE"])}, ${n}]`})(e,t):_(e)?A(e,t):y(e)?((e,t)=>{let r="";if(c.test(e)){const n=e.length-3;for(let e=0;e<n;e++)r+='[{ "prim": "DIP", "args": [ ';r+=null==t?'[{ "prim": "DUP" }]':`[{ "prim": "DUP", "annots": [${t}] }]`;for(let e=0;e<n;e++)r+=' ] },{"prim":"SWAP"}]';return r}throw new Error("")})(e,t):P(e)?((e,t)=>null==t?'[ { "prim": "UNIT" }, { "prim": "FAILWITH" } ]':`[ { "prim": "UNIT" }, { "prim": "FAILWITH", "annots": [${t}] } ]`)(0,t):$(e)?v(e,t):T(e)?((e,t)=>"UNPAIR"==e?null==t?'[ [ { "prim": "DUP" }, { "prim": "CAR" }, { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ] ]':1==t.length?`[ [ { "prim": "DUP" }, { "prim": "CAR", "annots": [${t}] }, { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ]  } ] ]`:2==t.length?`[ [ { "prim": "DUP" }, { "prim": "CAR", "annots": [${t[0]}] }, { "prim": "DIP", "args": [ [ { "prim": "CDR", "annots": [${t[1]}] } ] ]  } ] ]`:"":"UNPAPAIR"==e?null==t?'[ [ { "prim": "DUP" },\n                            { "prim": "CAR" },\n                            { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ],\n                            {"prim":"DIP","args":[[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"DIP","args":[[{"prim":"CDR"}]]}]]]}]':`[ [ { "prim": "DUP" },\n                            { "prim": "CAR" },\n                            { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ],\n                            {"prim":"DIP","args":[[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"DIP","args":[[{"prim":"CDR"}]],"annots": [${t}]}]]]}]`:void 0)(e,t):I(e)?((e,t)=>S(e.slice(5,-1)))(e):void 0,w=e=>`{ "int": "${e[0]}" }`,R=e=>`{ "string": ${e[0]} }`,C=e=>{const t=e[0].toString();if(1==e.length)return D(t)?E(t,null):`{ "prim": "${e[0]}" }`;{const r=e[1].map(e=>`"${e[1]}"`);return D(t)?[E(t,r)]:`{ "prim": "${e[0]}", "annots": [${r}] }`}},O=e=>`{ "prim": "${e[0]}", "args": [ ${e[2]} ] }`,U=e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "annots": [${t}]  }`},N=e=>{const t=""+e[0].toString(),r=e[1].map(e=>`"${e[1]}"`);return _(t)?A(t,e[2],r):`{ "prim": "${e[0]}", "args": [ ${e[3]} ], "annots": [${r}] }`},M=e=>`{ "prim": "${e[2]}", "args": [ ${e[4+(7===e.length?0:2)]} ] }`,x=e=>7===e.length?`{ "prim": "${e[0]}", "args": [ ${e[2]}, [] ] }`:`{ "prim": "${e[0]}", "args": [ ${e[2]}, ${e[4]} ] }`,k=e=>`{ "prim": "${e[2]}", "args": [ ${e[4]}, ${e[6]} ] }`,F=e=>Array.isArray(e)&&Array.isArray(e[0])?e[0]:e,z=e=>""+e[2].map(e=>e[0]).map(e=>F(e)),B=e=>`[ ${e[2].map(e=>e[0]).map(e=>F(e))} ]`,L=e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "${e[0]}", "args": [ ${e[4]}, ${e[6]} ], "annots": [${t}]  }`},W=e=>{if(7==e.length){const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ { "int": "${e[5]}" } ], "annots": [${t}] }`}return`{ "prim": "${e[2]}", "args": [ { "int": "${e[4]}" } ] }`},j=e=>`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" } ] }`,G={Lexer:d,ParserRules:[{name:"main",symbols:["instruction"],postprocess:n},{name:"main",symbols:["data"],postprocess:n},{name:"main",symbols:["type"],postprocess:n},{name:"main",symbols:["parameter"],postprocess:n},{name:"main",symbols:["storage"],postprocess:n},{name:"main",symbols:["code"],postprocess:n},{name:"main",symbols:["script"],postprocess:n},{name:"main",symbols:["parameterValue"],postprocess:n},{name:"main",symbols:["storageValue"],postprocess:n},{name:"main",symbols:["typeData"],postprocess:n},{name:"script",symbols:["parameter","_","storage","_","code"],postprocess:e=>`[ ${e[0]}, ${e[2]}, { "prim": "code", "args": [ [ ${e[4]} ] ] } ]`},{name:"parameterValue",symbols:[d.has("parameter")?{type:"parameter"}:parameter,"_","typeData","_","semicolons"],postprocess:O},{name:"storageValue",symbols:[d.has("storage")?{type:"storage"}:storage,"_","typeData","_","semicolons"],postprocess:O},{name:"parameter",symbols:[d.has("parameter")?{type:"parameter"}:parameter,"_","type","_","semicolons"],postprocess:O},{name:"storage",symbols:[d.has("storage")?{type:"storage"}:storage,"_","type","_","semicolons"],postprocess:O},{name:"code",symbols:[d.has("code")?{type:"code"}:code,"_","subInstruction","_","semicolons","_"],postprocess:e=>e[2]},{name:"code",symbols:[d.has("code")?{type:"code"}:code,"_",{literal:"{};"}],postprocess:e=>"code {}"},{name:"type",symbols:[d.has("comparableType")?{type:"comparableType"}:comparableType],postprocess:C},{name:"type",symbols:[d.has("constantType")?{type:"constantType"}:constantType],postprocess:C},{name:"type",symbols:[d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","type"],postprocess:O},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_",d.has("lparen")?{type:"lparen"}:lparen,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen,"_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"type",symbols:[d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","type","_","type"],postprocess:x},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","type","_","type","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:k},{name:"type$ebnf$1$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$1",symbols:["type$ebnf$1$subexpression$1"]},{name:"type$ebnf$1$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$1",symbols:["type$ebnf$1","type$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("comparableType")?{type:"comparableType"}:comparableType,"type$ebnf$1"],postprocess:C},{name:"type$ebnf$2$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$2",symbols:["type$ebnf$2$subexpression$1"]},{name:"type$ebnf$2$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$2",symbols:["type$ebnf$2","type$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("constantType")?{type:"constantType"}:constantType,"type$ebnf$2"],postprocess:C},{name:"type$ebnf$3$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$3",symbols:["type$ebnf$3$subexpression$1"]},{name:"type$ebnf$3$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$3",symbols:["type$ebnf$3","type$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("comparableType")?{type:"comparableType"}:comparableType,"type$ebnf$3","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:U},{name:"type$ebnf$4$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$4",symbols:["type$ebnf$4$subexpression$1"]},{name:"type$ebnf$4$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$4",symbols:["type$ebnf$4","type$ebnf$4$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("constantType")?{type:"constantType"}:constantType,"type$ebnf$4","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:U},{name:"type$ebnf$5$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$5",symbols:["type$ebnf$5$subexpression$1"]},{name:"type$ebnf$5$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$5",symbols:["type$ebnf$5","type$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"type$ebnf$5","_","type",d.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ ${e[5]} ], "annots": [${t}]  }`}},{name:"type$ebnf$6$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$6",symbols:["type$ebnf$6$subexpression$1"]},{name:"type$ebnf$6$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$6",symbols:["type$ebnf$6","type$ebnf$6$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"type$ebnf$6","_","type","_","type",d.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ ${e[5]}, ${e[7]} ], "annots": [${t}]  }`}},{name:"type$ebnf$7$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$7",symbols:["type$ebnf$7$subexpression$1"]},{name:"type$ebnf$7$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$7",symbols:["type$ebnf$7","type$ebnf$7$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_state"},"type$ebnf$7","_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:W},{name:"type$ebnf$8$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$8",symbols:["type$ebnf$8$subexpression$1"]},{name:"type$ebnf$8$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$8",symbols:["type$ebnf$8","type$ebnf$8$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_transaction"},"type$ebnf$8","_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:W},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_state"},"_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:W},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_transaction"},"_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:W},{name:"typeData",symbols:[d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","typeData"],postprocess:O},{name:"typeData",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","typeData","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"typeData",symbols:[d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","typeData","_","typeData"],postprocess:x},{name:"typeData",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","typeData","_","typeData","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:k},{name:"typeData",symbols:["subTypeData"],postprocess:n},{name:"typeData",symbols:["subTypeElt"],postprocess:n},{name:"typeData",symbols:[d.has("number")?{type:"number"}:number],postprocess:w},{name:"typeData",symbols:[d.has("string")?{type:"string"}:string],postprocess:R},{name:"typeData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>[]},{name:"data",symbols:[d.has("constantData")?{type:"constantData"}:constantData],postprocess:C},{name:"data",symbols:[d.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_","data"],postprocess:O},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_",d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:x},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_","data"],postprocess:x},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_","subInstruction"],postprocess:x},{name:"data",symbols:["subData"],postprocess:n},{name:"data",symbols:["subElt"],postprocess:n},{name:"data",symbols:[d.has("string")?{type:"string"}:string],postprocess:R},{name:"data",symbols:[d.has("bytes")?{type:"bytes"}:bytes],postprocess:e=>`{ "bytes": "${e[0].toString().slice(2)}" }`},{name:"data",symbols:[d.has("number")?{type:"number"}:number],postprocess:w},{name:"subData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subData$ebnf$1$subexpression$1",symbols:["data","_"]},{name:"subData$ebnf$1",symbols:["subData$ebnf$1$subexpression$1"]},{name:"subData$ebnf$1$subexpression$2",symbols:["data","_"]},{name:"subData$ebnf$1",symbols:["subData$ebnf$1","subData$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subData",symbols:[{literal:"("},"_","subData$ebnf$1",{literal:")"}],postprocess:z},{name:"subData$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subData$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subData$ebnf$2$subexpression$1",symbols:["data","_","subData$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subData$ebnf$2",symbols:["subData$ebnf$2$subexpression$1"]},{name:"subData$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subData$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subData$ebnf$2$subexpression$2",symbols:["data","_","subData$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subData$ebnf$2",symbols:["subData$ebnf$2","subData$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subData",symbols:[{literal:"{"},"_","subData$ebnf$2",{literal:"}"}],postprocess:B},{name:"subElt",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subElt$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subElt$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subElt$ebnf$1$subexpression$1",symbols:["elt","subElt$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subElt$ebnf$1",symbols:["subElt$ebnf$1$subexpression$1"]},{name:"subElt$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subElt$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subElt$ebnf$1$subexpression$2",symbols:["elt","subElt$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subElt$ebnf$1",symbols:["subElt$ebnf$1","subElt$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subElt",symbols:[{literal:"{"},"_","subElt$ebnf$1",{literal:"}"}],postprocess:B},{name:"elt",symbols:[d.has("elt")?{type:"elt"}:elt,"_","data","_","data"],postprocess:x},{name:"subTypeData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subTypeData$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$1$subexpression$1",symbols:["data","subTypeData$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subTypeData$ebnf$1",symbols:["subTypeData$ebnf$1$subexpression$1"]},{name:"subTypeData$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$1$subexpression$2",symbols:["data","subTypeData$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subTypeData$ebnf$1",symbols:["subTypeData$ebnf$1","subTypeData$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeData",symbols:[{literal:"{"},"_","subTypeData$ebnf$1",{literal:"}"}],postprocess:z},{name:"subTypeData$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$2$subexpression$1",symbols:["data","subTypeData$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subTypeData$ebnf$2",symbols:["subTypeData$ebnf$2$subexpression$1"]},{name:"subTypeData$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$2$subexpression$2",symbols:["data","subTypeData$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subTypeData$ebnf$2",symbols:["subTypeData$ebnf$2","subTypeData$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeData",symbols:[{literal:"("},"_","subTypeData$ebnf$2",{literal:")"}],postprocess:z},{name:"subTypeElt",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subTypeElt$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$1$subexpression$1",symbols:["typeElt","subTypeElt$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subTypeElt$ebnf$1",symbols:["subTypeElt$ebnf$1$subexpression$1"]},{name:"subTypeElt$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$1$subexpression$2",symbols:["typeElt","subTypeElt$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subTypeElt$ebnf$1",symbols:["subTypeElt$ebnf$1","subTypeElt$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeElt",symbols:[{literal:"[{"},"_","subTypeElt$ebnf$1",{literal:"}]"}],postprocess:z},{name:"subTypeElt$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$2$subexpression$1",symbols:["typeElt","_","subTypeElt$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subTypeElt$ebnf$2",symbols:["subTypeElt$ebnf$2$subexpression$1"]},{name:"subTypeElt$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$2$subexpression$2",symbols:["typeElt","_","subTypeElt$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subTypeElt$ebnf$2",symbols:["subTypeElt$ebnf$2","subTypeElt$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeElt",symbols:[{literal:"[{"},"_","subTypeElt$ebnf$2",{literal:"}]"}],postprocess:z},{name:"typeElt",symbols:[d.has("elt")?{type:"elt"}:elt,"_","typeData","_","typeData"],postprocess:x},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>""},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","instruction","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>e[2]},{name:"subInstruction$ebnf$1$subexpression$1",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$1",symbols:["subInstruction$ebnf$1$subexpression$1"]},{name:"subInstruction$ebnf$1$subexpression$2",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$1",symbols:["subInstruction$ebnf$1","subInstruction$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","subInstruction$ebnf$1","instruction","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>e[2].map(e=>e[0]).concat(e[3]).map(e=>F(e))},{name:"subInstruction$ebnf$2$subexpression$1",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$2",symbols:["subInstruction$ebnf$2$subexpression$1"]},{name:"subInstruction$ebnf$2$subexpression$2",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$2",symbols:["subInstruction$ebnf$2","subInstruction$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","subInstruction$ebnf$2",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:z},{name:"instructions",symbols:[d.has("baseInstruction")?{type:"baseInstruction"}:baseInstruction]},{name:"instructions",symbols:[d.has("macroCADR")?{type:"macroCADR"}:macroCADR]},{name:"instructions",symbols:[d.has("macroDIP")?{type:"macroDIP"}:macroDIP]},{name:"instructions",symbols:[d.has("macroDUP")?{type:"macroDUP"}:macroDUP]},{name:"instructions",symbols:[d.has("macroSETCADR")?{type:"macroSETCADR"}:macroSETCADR]},{name:"instructions",symbols:[d.has("macroASSERTlist")?{type:"macroASSERTlist"}:macroASSERTlist]},{name:"instruction",symbols:["instructions"],postprocess:C},{name:"instruction",symbols:["subInstruction"],postprocess:n},{name:"instruction$ebnf$1$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$1",symbols:["instruction$ebnf$1$subexpression$1"]},{name:"instruction$ebnf$1$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$1",symbols:["instruction$ebnf$1","instruction$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$1","_"],postprocess:C},{name:"instruction",symbols:["instructions","_","subInstruction"],postprocess:e=>{const t=""+e[0].toString();return _(t)?A(t,e[2]):`{ "prim": "${e[0]}", "args": [ [ ${e[2]} ] ] }`}},{name:"instruction$ebnf$2$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$2",symbols:["instruction$ebnf$2$subexpression$1"]},{name:"instruction$ebnf$2$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$2",symbols:["instruction$ebnf$2","instruction$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$2","_","subInstruction"],postprocess:N},{name:"instruction",symbols:["instructions","_","type"],postprocess:O},{name:"instruction$ebnf$3$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$3",symbols:["instruction$ebnf$3$subexpression$1"]},{name:"instruction$ebnf$3$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$3",symbols:["instruction$ebnf$3","instruction$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$3","_","type"],postprocess:N},{name:"instruction",symbols:["instructions","_","data"],postprocess:O},{name:"instruction$ebnf$4$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$4",symbols:["instruction$ebnf$4$subexpression$1"]},{name:"instruction$ebnf$4$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$4",symbols:["instruction$ebnf$4","instruction$ebnf$4$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$4","_","data"],postprocess:N},{name:"instruction",symbols:["instructions","_","type","_","type","_","subInstruction"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ ${e[2]}, ${e[4]}, [${e[6]}] ] }`},{name:"instruction$ebnf$5$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$5",symbols:["instruction$ebnf$5$subexpression$1"]},{name:"instruction$ebnf$5$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$5",symbols:["instruction$ebnf$5","instruction$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$5","_","type","_","type","_","subInstruction"],postprocess:e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "${e[0]}", "args": [ ${e[3]}, ${e[5]}, ${e[7]} ], "annots": [${t}] }`}},{name:"instruction",symbols:["instructions","_","subInstruction","_","subInstruction"],postprocess:e=>{const t=""+e[0].toString();return $(t)?v(t,e[2],e[4]):`{ "prim": "${e[0]}", "args": [ [${e[2]}], [${e[4]}] ] }`}},{name:"instruction$ebnf$6$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$6",symbols:["instruction$ebnf$6$subexpression$1"]},{name:"instruction$ebnf$6$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$6",symbols:["instruction$ebnf$6","instruction$ebnf$6$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$6","_","subInstruction","_","subInstruction"],postprocess:L},{name:"instruction",symbols:["instructions","_","type","_","type"],postprocess:x},{name:"instruction$ebnf$7$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$7",symbols:["instruction$ebnf$7$subexpression$1"]},{name:"instruction$ebnf$7$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$7",symbols:["instruction$ebnf$7","instruction$ebnf$7$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$7","_","type","_","type"],postprocess:L},{name:"instruction",symbols:[{literal:"PUSH"},"_","type","_","data"],postprocess:x},{name:"instruction",symbols:[{literal:"PUSH"},"_","type","_",d.has("lbrace")?{type:"lbrace"}:lbrace,d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>`{ "prim": "${e[0]}", "args": [${e[2]}, []] }`},{name:"instruction$ebnf$8$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$8",symbols:["instruction$ebnf$8$subexpression$1"]},{name:"instruction$ebnf$8$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$8",symbols:["instruction$ebnf$8","instruction$ebnf$8$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"PUSH"},"instruction$ebnf$8","_","type","_","data"],postprocess:e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "PUSH", "args": [ ${e[3]}, ${e[5]} ], "annots": [${t}]  }`}},{name:"instruction$ebnf$9",symbols:[/[0-9]/]},{name:"instruction$ebnf$9",symbols:["instruction$ebnf$9",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DIP"},"_","instruction$ebnf$9","_","subInstruction"],postprocess:e=>e.length>4?`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" }, [ ${e[4]} ] ] }`:`{ "prim": "${e[0]}", "args": [ ${e[2]} ] }`},{name:"instruction$ebnf$10",symbols:[/[0-9]/]},{name:"instruction$ebnf$10",symbols:["instruction$ebnf$10",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUP"},"_","instruction$ebnf$10"],postprocess:j},{name:"instruction",symbols:[{literal:"DUP"}],postprocess:C},{name:"instruction$ebnf$11$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$11",symbols:["instruction$ebnf$11$subexpression$1"]},{name:"instruction$ebnf$11$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$11",symbols:["instruction$ebnf$11","instruction$ebnf$11$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUP"},"instruction$ebnf$11","_"],postprocess:C},{name:"instruction$ebnf$12",symbols:[/[0-9]/]},{name:"instruction$ebnf$12",symbols:["instruction$ebnf$12",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DIG"},"_","instruction$ebnf$12"],postprocess:j},{name:"instruction$ebnf$13",symbols:[/[0-9]/]},{name:"instruction$ebnf$13",symbols:["instruction$ebnf$13",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUG"},"_","instruction$ebnf$13"],postprocess:j},{name:"instruction$ebnf$14",symbols:[/[0-9]/]},{name:"instruction$ebnf$14",symbols:["instruction$ebnf$14",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DROP"},"_","instruction$ebnf$14"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" } ] }`},{name:"instruction",symbols:[{literal:"DROP"}],postprocess:C},{name:"instruction",symbols:[{literal:"CREATE_CONTRACT"},"_",d.has("lbrace")?{type:"lbrace"}:lbrace,"_","parameter","_","storage","_","code","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>`{ "prim": "CREATE_CONTRACT", "args": [ [ ${e[4]}, ${e[6]}, { "prim": "code" , "args": [ [ ${e[8]} ] ] } ] ] }`},{name:"instruction",symbols:[{literal:"EMPTY_MAP"},"_","type","_","type"],postprocess:x},{name:"instruction",symbols:[{literal:"EMPTY_MAP"},"_",d.has("lparen")?{type:"lparen"}:lparen,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen,"_","type"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ ${e[4]}, ${e[8]} ] }`},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:e=>e[0].concat([e[1]])},{name:"_",symbols:["_$ebnf$1"]},{name:"semicolons$ebnf$1",symbols:[/[;]/],postprocess:n},{name:"semicolons$ebnf$1",symbols:[],postprocess:()=>null},{name:"semicolons",symbols:["semicolons$ebnf$1"]}],ParserStart:"main"};t.default=G},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(28).compile({wspace:/[ \t]+/,lparen:"(",rparen:")",annot:/:[^ );]+|%[^ );]+/,parameter:"parameter",or:"or",pair:"pair",data:["bytes","int","nat","bool","string","timestamp","signature","key","key_hash","mutez","address","unit","operation","chain_id"],singleArgData:["option","list","contract","set"],doubleArgData:["lambda","map","big_map"],semicolon:";"}),o=e=>{let t=void 0,r=void 0;if(e.length>=3){const n=e[2].toString();"%"===n.charAt(0)?r=a(n):t=u(n)}if(5===e.length){const n=e[4].toString();n.startsWith("%")&&void 0===r&&(r=a(n)),n.startsWith(":")&&void 0===t&&(t=u(n))}return[{name:r,parameters:[{name:t||r,type:e[0].toString()}],structure:"$PARAM",generateInvocationString(...e){if(this.parameters.length!==e.length)throw new Error(`Incorrect number of parameters provided; expected ${this.parameters.length}, got ${e.length}`);let t=this.structure;for(let r=0;r<this.parameters.length;r++){let n=e[r];if("unit"===this.parameters[r].type&&(n="Unit"),this.parameters[r].type.startsWith("list")){if(!Array.isArray(n))throw new Error(JSON.stringify(this.parameters[r])+" requires an array value");n=`{${n.join("; ")}}`}this.parameters[r].optional&&e[r]?n="Some "+n:this.parameters[r].optional&&!e[r]&&(n="None"),t=t.replace("$PARAM",n)}return t},generateInvocationPair(...e){let t=this.generateInvocationString(...e);for(;t.startsWith("(Left ")||t.startsWith("(Right ");)t.startsWith("(Left ")&&(t=t.slice(6,-1)),t.startsWith("(Right ")&&(t=t.slice(7,-1));return{entrypoint:this.name,parameters:t}},generateSampleInvocation(){const e=this.parameters.map(e=>{switch(e.type){case"string":return'"Tacos"';case"int":return-1;case"nat":return 99;case"address":return'"KT1EGbAxguaWQFkV3Egb2Z1r933MWuEYyrJS"';case"key_hash":return'"tz1SQnJaocpquTztY3zMgydTPoQBBQrDGonJ"';case"timestamp":return`"${(new Date).toISOString()}"`;case"mutez":return 5e5;case"unit":return"Unit";case"bytes":case"bool":case"signature":case"key":case"operation":case"chain_id":default:return e.type}});return this.generateInvocationString(...e)}}]},s=(...e)=>{const t=e.find(e=>e.startsWith("%"));return t?a(t):void 0},i=(...e)=>{const t=e.find(e=>e.startsWith(":"));return t?u(t):void 0},a=e=>{if(!e.startsWith("%"))throw new Error(e+" must start with '%'");return e.replace(/^%_Liq_entry_/,"").replace("%","")},u=e=>{if(!e.startsWith(":"))throw new Error(e+" must start with ':'");return e.replace(":","")},c={Lexer:n,ParserRules:[{name:"entry",symbols:[n.has("parameter")?{type:"parameter"}:parameter,"__","parameters","_",n.has("semicolon")?{type:"semicolon"}:semicolon],postprocess:e=>e[2]},{name:"parameters",symbols:[n.has("lparen")?{type:"lparen"}:lparen,"_","parameters","_",n.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>e[2]},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{e[2],e[4];const t=e[6],r=e[8],n=[];for(const e of t){const t={name:e.name,parameters:e.parameters,structure:"(Left "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(t)}for(const e of r){const t={name:e.name,parameters:e.parameters,structure:"(Right "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(t)}return n}},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=[];for(const e of r){const r={name:`${t}.${e.name}`,parameters:e.parameters,structure:"(Left "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(r)}for(const e of n){const r={name:`${t}.${e.name}`,parameters:e.parameters,structure:"(Right "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(r)}return o}},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=[];for(const e of t)1===e.parameters.length&&e.parameters[0].name===e.name&&(e.parameters[0].name=void 0),n.push(Object.assign(Object.assign({},e),{structure:`(Left ${e.structure})`}));for(const e of r)1===e.parameters.length&&e.parameters[0].name===e.name&&(e.parameters[0].name=void 0),n.push(Object.assign(Object.assign({},e),{structure:`(Right ${e.structure})`}));return n}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=e[8],s=[];for(const e of n)for(const n of o){const o={name:i(t.toString(),r.toString()),parameters:e.parameters.concat(n.parameters),structure:`(Pair ${e.structure} ${n.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};s.push(o)}return s}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=[];for(const e of r)for(const r of n){const n={name:i(t.toString())||s(t.toString())||void 0,parameters:e.parameters.concat(r.parameters),structure:`(Pair ${e.structure} ${r.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(n)}return o}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=[];for(const e of t)for(const t of r){const r={name:void 0,parameters:e.parameters.concat(t.parameters),structure:`(Pair ${e.structure} ${t.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(r)}return n}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4].toString(),o=e[6];return o[0].name=s(r,n),o[0].parameters[0].constituentType=o[0].parameters[0].type,"option"===t&&(o[0].parameters[0].optional=!0),o[0].parameters[0].type=`${t} (${o[0].parameters[0].type})`,o[0].structure=`(${o[0].structure})`,o}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4];return n[0].name=s(r),n[0].parameters[0].constituentType=n[0].parameters[0].type,"option"===t&&(n[0].parameters[0].optional=!0),n[0].parameters[0].type=`${t} (${n[0].parameters[0].type})`,n[0].structure=`(${n[0].structure})`,n}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2];return r[0].parameters[0].constituentType=r[0].parameters[0].type,"option"===t&&(r[0].parameters[0].optional=!0),r[0].parameters[0].type=`${t} (${r[0].parameters[0].type})`,r[0].structure=`(${r[0].structure})`,r}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4].toString(),o=e[6],i=e[8];return o[0].name=s(r,n),o[0].parameters[0].type=`${t} (${o[0].parameters[0].type}) (${i[0].parameters[0].type})`,o[0].structure=`(${o[0].structure})`,o}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4],o=e[6];return n[0].name=s(r),n[0].parameters[0].type=`${t} (${n[0].parameters[0].type}) (${o[0].parameters[0].type})`,n[0].structure=`(${n[0].structure})`,n}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2],n=e[4];return r[0].parameters[0].type=`${t} (${r[0].parameters[0].type}) (${n[0].parameters[0].type})`,r[0].structure=`(${r[0].structure})`,r}},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data,"__",n.has("annot")?{type:"annot"}:annot],postprocess:o},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data,"__",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot],postprocess:o},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data],postprocess:o},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:e=>e[0].concat([e[1]])},{name:"_",symbols:["_$ebnf$1"]},{name:"__",symbols:[/[\s]/]}],ParserStart:"entry"};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(22);class o extends n.ServiceRequestError{constructor(e,t,r,n){super(e,t,r,null),this.requestBody=n}toString(){return`TezosRequestError for ${this.serverURL} with ${this.httpStatus} and ${this.httpMessage}`}}t.TezosRequestError=o;class s extends n.ServiceResponseError{constructor(e,t,r,n,o,s){super(e,t,r,n,o),this.kind=s}}t.TezosResponseError=s,function(e){e.TEXT="Text",e.JSONTYPE1="JSONType1",e.JSONTYPE2="JSONType2"}(t.TezosResponseErrorKind||(t.TezosResponseErrorKind={}))},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),o=r(10),s=new Map([[0,"endorsement"],[1,"seedNonceRevelation"],[2,"doubleEndorsementEvidence"],[3,"doubleBakingEvidence"],[4,"accountActivation"],[5,"proposal"],[6,"ballot"],[7,"reveal"],[8,"transaction"],[9,"origination"],[10,"delegation"],[107,"reveal"],[108,"transaction"],[109,"origination"],[110,"delegation"]]),i=[...s.keys()].reduce((e,t)=>{const r=s.get(t)||"";return e[r]>t?e:Object.assign(Object.assign({},e),{[r]:t})},new Map);!function(t){function r(e){return s.get(n.TezosMessageUtils.readInt(e))||""}function a(e){return r(e.substring(64,66))}function u(e,t,r=!0){switch(t){case"endorsement":case"seedNonceRevelation":case"doubleEndorsementEvidence":case"doubleBakingEvidence":case"accountActivation":case"proposal":throw new Error("Unsupported operation type: "+t);case"ballot":return l(e,r);case"reveal":return f(e,r);case"transaction":return d(e,r);case"origination":return m(e,r);case"delegation":return b(e,r);default:throw new Error("Unsupported operation type: "+t)}}function c(e){let t=n.TezosMessageUtils.writeInt(i.accountActivation);return t+=n.TezosMessageUtils.writeAddress(e.pkh).slice(4),t+=e.secret,t}function l(t,o=!0){if("ballot"!==r(o?t.substring(64,66):t.substring(0,2)))throw new Error("Provided operation is not a ballot");let s=0,i="";o?(i=n.TezosMessageUtils.readBranch(t.substring(s,s+64)),s+=66):s+=2;const a=n.TezosMessageUtils.readAddress(t.substring(s,s+42));s+=42;const u=parseInt(t.substring(s,s+8),16);s+=8;const c=n.TezosMessageUtils.readBufferWithHint(e.from(t.substring(s,s+64),"hex"),"p");s+=64;const l=parseInt(t.substring(s,s+1),16);let p;s+=2,t.length>s&&(p=r(t.substring(s,s+2)));return{operation:{kind:"ballot",source:a,period:u,proposal:c,vote:l},branch:i,next:p,nextoffset:p?s:-1}}function p(e){let t=n.TezosMessageUtils.writeInt(i.ballot);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=("00000000"+e.period.toString(16)).slice(-8),t+=n.TezosMessageUtils.writeBufferWithHint(e.proposal).toString("hex").slice(4),t+=("00"+e.vote.toString(16)).slice(-2),t}function f(e,t=!0){let o=t?e.substring(64,66):e.substring(0,2);if("reveal"!==r(o))throw new Error("Provided operation is not a reveal.");let s=0,i="";t?(i=n.TezosMessageUtils.readBranch(e.substring(s,s+64)),s+=66):s+=2;let a="";parseInt(o,16)<100?(a=n.TezosMessageUtils.readAddress(e.substring(s,s+44)),s+=44):(a=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42);let u=n.TezosMessageUtils.findInt(e,s);s+=u.length;let c=n.TezosMessageUtils.findInt(e,s);s+=c.length;let l=n.TezosMessageUtils.findInt(e,s);s+=l.length;let p=n.TezosMessageUtils.findInt(e,s);s+=p.length;let f,h=n.TezosMessageUtils.readPublicKey(e.substring(s,s+66));s+=66,e.length>s&&(f=r(e.substring(s,s+2)));return{operation:{kind:"reveal",source:a,public_key:h,fee:u.value+"",gas_limit:l.value+"",storage_limit:p.value+"",counter:c.value+""},branch:i,next:f,nextoffset:f?s:-1}}function h(e){if("reveal"!==e.kind)throw new Error("Incorrect operation type.");let t=n.TezosMessageUtils.writeInt(i.reveal);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writePublicKey(e.public_key),t}function d(t,s=!0){let i=s?t.substring(64,66):t.substring(0,2);if("transaction"!==r(i))throw new Error("Provided operation is not a transaction.");let a=0,u="";s?(u=n.TezosMessageUtils.readBranch(t.substring(a,a+64)),a+=66):a+=2;let c="";parseInt(i,16)<100?(c=n.TezosMessageUtils.readAddress(t.substring(a,a+44)),a+=44):(c=n.TezosMessageUtils.readAddress(t.substring(a,a+42)),a+=42);let l=n.TezosMessageUtils.findInt(t,a);a+=l.length;let p=n.TezosMessageUtils.findInt(t,a);a+=p.length;let f=n.TezosMessageUtils.findInt(t,a);a+=f.length;let h=n.TezosMessageUtils.findInt(t,a);a+=h.length;let d=n.TezosMessageUtils.findInt(t,a);a+=d.length;let g=n.TezosMessageUtils.readAddress(t.substring(a,a+44));a+=44;let m=n.TezosMessageUtils.readBoolean(t.substring(a,a+2));a+=2;let y,b="";if(m&&parseInt(i,16)<100){const e=parseInt(t.substring(a,a+8),16);a+=8;const r=o.TezosLanguageUtil.hexToMicheline(t.substring(a));if(b=r.code,r.consumed!==2*e)throw new Error("Failed to parse transaction parameters: length mismatch");a+=2*e}else if(m&&parseInt(i,16)>100){const r=parseInt(t.substring(a,a+2),16);a+=2;let n="";if(255===r){const r=parseInt(t.substring(a,a+2),16);a+=2,n=e.from(t.substring(a,a+2*r),"hex").toString(),a+=2*r}else 0===r?n="default":1===r?n="root":2===r?n="do":3===r?n="set_delegate":4===r&&(n="remove_delegate");const s=parseInt(t.substring(a,a+8),16);a+=8;const i=o.TezosLanguageUtil.hexToMicheline(t.substring(a)),u=i.code;if(i.consumed!==2*s)throw new Error("Failed to parse transaction parameters: length mismatch");a+=2*s,b={entrypoint:n,value:u}}t.length>a&&(y=r(t.substring(a,a+2)));return{operation:{kind:"transaction",source:c,destination:g,amount:d.value.toString(),fee:l.value.toString(),gas_limit:f.value.toString(),storage_limit:h.value.toString(),counter:p.value.toString(),parameters:b},branch:u,next:y,nextoffset:y?a:-1}}function g(e){if("transaction"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(i.transaction);if(t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.amount)),t+=n.TezosMessageUtils.writeAddress(e.destination),e.parameters){const r=e.parameters,n=o.TezosLanguageUtil.normalizeMichelineWhiteSpace(JSON.stringify(r.value)),s=o.TezosLanguageUtil.translateMichelineToHex(n);"default"!==r.entrypoint&&""!==r.entrypoint||"030b"!==s?(t+="ff","default"===r.entrypoint||""===r.entrypoint?t+="00":"root"===r.entrypoint?t+="01":"do"===r.entrypoint?t+="02":"set_delegate"===r.entrypoint?t+="03":"remove_delegate"===r.entrypoint?t+="04":t+="ff"+("0"+r.entrypoint.length.toString(16)).slice(-2)+r.entrypoint.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),t+=("0000000"+(s.length/2).toString(16)).slice(-8)+s):t+="00"}else t+="00";return t}function m(e,t=!0){let s=t?e.substring(64,66):e.substring(0,2);if("origination"!==r(s))throw new Error("Provided operation is not an origination.");let i=0,a="";t?(a=n.TezosMessageUtils.readBranch(e.substring(i,i+64)),i+=66):i+=2;let u="";parseInt(s,16)<100?(u=n.TezosMessageUtils.readAddress(e.substring(i,i+44)),i+=44):(u=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42);let c=n.TezosMessageUtils.findInt(e,i);i+=c.length;let l=n.TezosMessageUtils.findInt(e,i);i+=l.length;let p=n.TezosMessageUtils.findInt(e,i);i+=p.length;let f=n.TezosMessageUtils.findInt(e,i);i+=f.length;let h="";parseInt(s,16)<100&&(h=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42);let d=n.TezosMessageUtils.findInt(e,i);i+=d.length;let g=!1,m=!1;parseInt(s,16)<100&&(g=n.TezosMessageUtils.readBoolean(e.substring(i,i+2)),i+=2,m=n.TezosMessageUtils.readBoolean(e.substring(i,i+2)),i+=2);let y=n.TezosMessageUtils.readBoolean(e.substring(i,i+2));i+=2;let b="";y&&(b=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42);let P=!0;parseInt(s,16)<100&&(P=n.TezosMessageUtils.readBoolean(e.substring(i,i+2)),i+=2);let $,v={};if(P){let t=parseInt(e.substring(i,i+8),16);i+=8;const r=o.TezosLanguageUtil.hexToMicheline(e.substring(i,i+2*t)).code;i+=2*t;let n=parseInt(e.substring(i,i+8),16);i+=8;const s=o.TezosLanguageUtil.hexToMicheline(e.substring(i,i+2*n)).code;i+=2*n,v=JSON.parse(`{ "script": [ ${r}, ${s} ] }`)}e.length>i&&($=r(e.substring(i,i+2)));let _={kind:"origination",source:u,balance:d.value+"",delegate:y?b:void 0,fee:c.value+"",gas_limit:p.value+"",storage_limit:f.value+"",counter:l.value+"",script:P?v:void 0};parseInt(s,16)<100&&(_.manager_pubkey=h,_.spendable=g,_.delegatable=m);return{operation:_,branch:a,next:$,nextoffset:$?i:-1}}function y(e){if("origination"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(i.origination);if(t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.balance)),void 0!==e.delegate?(t+=n.TezosMessageUtils.writeBoolean(!0),t+=n.TezosMessageUtils.writeAddress(e.delegate).slice(2)):t+=n.TezosMessageUtils.writeBoolean(!1),e.script){let r=[];r.push(e.script.code),r.push(e.script.storage),t+=r.map(o.TezosLanguageUtil.normalizePrimitiveRecordOrder).map(e=>o.TezosLanguageUtil.normalizeMichelineWhiteSpace(JSON.stringify(e))).map(e=>o.TezosLanguageUtil.translateMichelineToHex(e)).reduce((e,t)=>e+("0000000"+(t.length/2).toString(16)).slice(-8)+t,"")}return t}function b(e,t=!0){let o=t?e.substring(64,66):e.substring(0,2);if("delegation"!==r(o))throw new Error("Provided operation is not a delegation.");let s=0,i="";t?(i=n.TezosMessageUtils.readBranch(e.substring(s,s+64)),s+=66):s+=2;let a="";parseInt(o,16)<100?(a=n.TezosMessageUtils.readAddress(e.substring(s,s+44)),s+=44):(a=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42);let u=n.TezosMessageUtils.findInt(e,s);s+=u.length;let c=n.TezosMessageUtils.findInt(e,s);s+=c.length;let l=n.TezosMessageUtils.findInt(e,s);s+=l.length;let p=n.TezosMessageUtils.findInt(e,s);s+=p.length;let f=n.TezosMessageUtils.readBoolean(e.substring(s,s+2));s+=2;let h,d="";f&&(d=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42),e.length>s&&(h=r(e.substring(s,s+2)));return{operation:{kind:"delegation",source:a,delegate:f?d:void 0,fee:u.value+"",gas_limit:l.value+"",storage_limit:p.value+"",counter:c.value+""},branch:i,next:h,nextoffset:h?s:-1}}function P(e){if("delegation"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(i.delegation);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),void 0!==e.delegate&&""!==e.delegate?(t+=n.TezosMessageUtils.writeBoolean(!0),t+=n.TezosMessageUtils.writeAddress(e.delegate).slice(2)):t+=n.TezosMessageUtils.writeBoolean(!1),t}t.getOperationType=r,t.idFirstOperation=a,t.parseOperation=u,t.encodeOperation=function(e){if(e.hasOwnProperty("pkh")&&e.hasOwnProperty("secret"))return c(e);if(e.hasOwnProperty("kind")){const t=e;if("reveal"===t.kind)return h(e);if("transaction"===t.kind)return g(e);if("origination"===t.kind)return y(e);if("delegation"===t.kind)return P(e)}if(e.hasOwnProperty("vote"))return p(e);throw new Error("Unsupported message type")},t.encodeActivation=c,t.parseBallot=l,t.encodeBallot=p,t.parseReveal=f,t.encodeReveal=h,t.parseTransaction=d,t.encodeTransaction=g,t.parseOrigination=m,t.encodeOrigination=y,t.parseDelegation=b,t.encodeDelegation=P,t.parseOperationGroup=function(e){let t=[],r=u(e,a(e));t.push(r.operation);let n=0;for(;r.next;)n+=r.nextoffset,r=u(e.substring(n),r.next,!1),t.push(r.operation);return t}}(t.TezosMessageCodec||(t.TezosMessageCodec={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(8),i=r(3),a=r(7),u=o(r(11)).default.log;class c{constructor(e,t,r,n){this.triggerTimestamp=0,this.server=e,this.keyStore=r,this.signer=t,this.delay=n,this.operations=[]}static createQueue(e,t,r,n=s.TezosConstants.DefaultBatchDelay){return new c(e,t,r,n)}addOperations(...e){0===this.operations.length&&(this.triggerTimestamp=Date.now(),setTimeout(()=>{this.sendOperations()},1e3*this.delay)),e.forEach(e=>this.operations.push(e))}getStatus(){return this.operations.length}sendOperations(){return n(this,void 0,void 0,(function*(){let e=(yield i.TezosNodeReader.getCounterForAccount(this.server,this.keyStore.publicKeyHash))+1,t=[];const r=this.operations.length;for(let n=0;n<r;n++){let r=this.operations.shift();r.counter&&(r.counter=""+e++),t.push(r)}this.operations.length>0&&(this.triggerTimestamp=Date.now(),setTimeout(()=>{this.sendOperations()},1e3*this.delay));try{yield a.TezosNodeWriter.sendOperation(this.server,t,this.signer)}catch(e){u.error("Error sending queued operations: "+e)}}))}}t.TezosOperationQueue=c},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(8),u=r(3),c=r(7),l=r(9);!function(e){function t(e,t,r,n,o,s,u){let l=`[ { "prim": "DROP" },\n            { "prim": "NIL", "args": [ { "prim": "operation" } ] },\n            { "prim": "PUSH", "args": [ { "prim": "key_hash" }, { "string": "${u}" } ] },\n            { "prim": "IMPLICIT_ACCOUNT" },\n            { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "${s}" } ] },\n            { "prim": "UNIT" },\n            { "prim": "TRANSFER_TOKENS" },\n            { "prim": "CONS" } ]`;return c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,a.TezosConstants.P005ManagerContractWithdrawalStorageLimit,a.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",l,i.TezosParameterFormat.Micheline)}e.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return l.TezosContractUtils.verifyDestination(e,t,"d99cb8b4c7e40166f59c0f3c30724225")}))},e.verifyScript=function(e){return l.TezosContractUtils.verifyScript(e,"a585489ffaee60d07077059539d5bfc8")},e.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{administrator:s.JSONPath({path:"$.string",json:r})[0]}}))},e.setDelegate=function(e,t,r,n,o,s){if(n.startsWith("KT1")){const u=`[{ "prim": "DROP" }, { "prim": "NIL", "args": [{ "prim": "operation" }] }, { "prim": "PUSH", "args": [{ "prim": "key_hash" }, { "string": "${o}" } ] }, { "prim": "SOME" }, { "prim": "SET_DELEGATE" }, { "prim": "CONS" } ]`;return c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,s,0,a.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",u,i.TezosParameterFormat.Micheline)}return c.TezosNodeWriter.sendDelegationOperation(e,t,r,o,s)},e.unSetDelegate=function(e,t,r,n,o){if(n.startsWith("KT1")){const s='[{ "prim": "DROP" }, { "prim": "NIL", "args": [{ "prim": "operation" }] }, { "prim": "NONE", "args": [{ "prim": "key_hash" }] }, { "prim": "SET_DELEGATE" }, { "prim": "CONS" } ]';return c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,0,a.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",s,i.TezosParameterFormat.Micheline)}return c.TezosNodeWriter.sendUndelegationOperation(e,t,r,o)},e.withdrawDelegatedFunds=function(e,r,n,o,s,i){return t(e,r,n,o,s,i,n.publicKeyHash)},e.sendDelegatedFunds=t,e.depositDelegatedFunds=function(e,t,r,n,o,s){return c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,s,o,0,a.TezosConstants.P005ManagerContractDepositGasLimit,void 0,void 0)},e.deployManagerContract=function(e,t,r,n,o,s,u=!1){const l=`{ "string": "${r.publicKeyHash}" }`;return c.TezosNodeWriter.sendContractOriginationOperation(e,t,r,s,n,o,600,2e4,'[ { "prim": "parameter",\n        "args":\n          [ { "prim": "or",\n              "args":\n                [ { "prim": "lambda",\n                    "args":\n                      [ { "prim": "unit" }, { "prim": "list", "args": [ { "prim": "operation" } ] } ], "annots": [ "%do" ] },\n                  { "prim": "unit", "annots": [ "%default" ] } ] } ] },\n      { "prim": "storage", "args": [ { "prim": "key_hash" } ] },\n      { "prim": "code",\n        "args":\n          [ [ [ [ { "prim": "DUP" }, { "prim": "CAR" },\n                  { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ] ],\n              { "prim": "IF_LEFT",\n                "args":\n                  [ [ { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] },\n                      { "prim": "AMOUNT" },\n                      [ [ { "prim": "COMPARE" }, { "prim": "EQ" } ],\n                        { "prim": "IF", "args": [ [], [ [ { "prim": "UNIT" }, { "prim": "FAILWITH" } ] ] ] } ],\n                      [ { "prim": "DIP", "args": [ [ { "prim": "DUP" } ] ] },\n                        { "prim": "SWAP" } ],\n                      { "prim": "IMPLICIT_ACCOUNT" },\n                      { "prim": "ADDRESS" },\n                      { "prim": "SENDER" },\n                      [ [ { "prim": "COMPARE" }, { "prim": "EQ" } ],\n                        { "prim": "IF", "args": [ [], [ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ] ] } ],\n                      { "prim": "UNIT" }, { "prim": "EXEC" },\n                      { "prim": "PAIR" } ],\n                    [ { "prim": "DROP" },\n                      { "prim": "NIL", "args": [ { "prim": "operation" } ] },\n                      { "prim": "PAIR" } ] ] } ] ] } ]',l,i.TezosParameterFormat.Micheline,a.TezosConstants.HeadBranchOffset,u)}}(t.BabylonDelegationHelper||(t.BabylonDelegationHelper={}))},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(4),u=r(3),c=r(7),l=r(9),p=r(2);!function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return l.TezosContractUtils.verifyDestination(e,t,"c020219e31ee3b462ed93c33124f117f")}))},t.commitName=function(t,r,o,s,u,f,h,d,g){return n(this,void 0,void 0,(function*(){const n=`(Pair "${u}" (Pair ${f} 0x${a.TezosMessageUtils.writeAddress(o.publicKeyHash)}))`,m=a.TezosMessageUtils.writePackedData(n,"record",p.TezosParameterFormat.Michelson),y="0x"+a.TezosMessageUtils.simpleHash(e.from(m,"hex"),32).toString("hex");if(!d||!g){const e=yield c.TezosNodeWriter.testContractInvocationOperation(t,"main",o,s,0,h,6e3,5e5,"commit",y,i.TezosParameterFormat.Michelson);d||(d=Number(e.storageCost)||0),g||(g=Number(e.gas)+300)}const b=yield c.TezosNodeWriter.sendContractInvocationOperation(t,r,o,s,0,h,d,g,"commit",y,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(b.operationGroupID)}))},t.registerName=function(e,t,r,o,s,a,u,p,f,h,d){return n(this,void 0,void 0,(function*(){const n=`(Pair ${u} (Pair "${s}" ${a}))`;if(!h||!d){const t=yield c.TezosNodeWriter.testContractInvocationOperation(e,"main",r,o,p,f,6e3,5e5,"registerName",n,i.TezosParameterFormat.Michelson);h||(h=Number(t.storageCost)||0),d||(d=Number(t.gas)+300)}const g=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,p,f,h,d,"registerName",n,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.updateRegistrationPeriod=function(e,t,r,o,s,a,u,p,f,h){return n(this,void 0,void 0,(function*(){const n=`(Pair "${s}" ${a})`;if(!f||!h){const t=yield c.TezosNodeWriter.testContractInvocationOperation(e,"main",r,o,u,p,1e3,1e5,"updateRegistrationPeriod",n,i.TezosParameterFormat.Michelson);f||(f=Number(t.storageCost)||0),h||(h=Number(t.gas)+300)}const d=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,u,p,f,h,"updateRegistrationPeriod",n,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.setPrimaryName=function(e,t,r,o,s,a,u,p){return n(this,void 0,void 0,(function*(){const n=`"${s}"`;if(!u||!p){const t=yield c.TezosNodeWriter.testContractInvocationOperation(e,"main",r,o,0,a,1e3,1e5,"setPrimaryName",n,i.TezosParameterFormat.Michelson);u||(u=Number(t.storageCost)||0),p||(p=Number(t.gas)+300)}const f=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,a,u,p,"deleteName",n,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.deleteName=function(e,t,r,o,s,a,u,p){return n(this,void 0,void 0,(function*(){const n=`"${s}"`;if(!u||!p){const t=yield c.TezosNodeWriter.testContractInvocationOperation(e,"main",r,o,0,a,1e3,1e5,"deleteName",n,i.TezosParameterFormat.Michelson);u||(u=Number(t.storageCost)||0),p||(p=Number(t.gas)+300)}const f=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,a,u,p,"deleteName",n,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.getNameForAddress=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(o,"address"),"hex"));try{const e=yield u.TezosNodeReader.getValueForBigMapKey(t,r,n);return s.JSONPath({path:"$.string",json:e})[0]}catch(e){}return""}))},t.getNameInfo=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(o,"string"),"hex")),i=yield u.TezosNodeReader.getValueForBigMapKey(t,r,n);return{name:s.JSONPath({path:"$.args[0].args[1].string",json:i})[0],modified:Boolean(s.JSONPath({path:"$.args[0].args[0].prim",json:i})[0]),owner:s.JSONPath({path:"$.args[1].args[0].string",json:i})[0],registeredAt:new Date(s.JSONPath({path:"$.args[1].args[1].args[0].string",json:i})[0]),registrationPeriod:s.JSONPath({path:"$.args[1].args[1].args[1].int",json:i})[0]}}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{addressMap:Number(s.JSONPath({path:"$.args[0].args[0].args[0].int",json:r})[0]),commitmentMap:Number(s.JSONPath({path:"$.args[0].args[0].args[1].int",json:r})[0]),manager:s.JSONPath({path:"$.args[0].args[1].args[0].string",json:r})[0],interval:Number(s.JSONPath({path:"$.args[0].args[1].args[1].int",json:r})[0]),maxCommitTime:Number(s.JSONPath({path:"$.args[1].args[0].args[0].int",json:r})[0]),maxDuration:Number(s.JSONPath({path:"$.args[1].args[0].args[1].int",json:r})[0]),minCommitTime:Number(s.JSONPath({path:"$.args[1].args[1].args[0].int",json:r})[0]),nameMap:Number(s.JSONPath({path:"$.args[1].args[1].args[1].args[0].int",json:r})[0]),intervalFee:Number(s.JSONPath({path:"$.args[1].args[1].args[1].args[1].int",json:r})[0])}}))}}(t.CryptonomicNameServiceHelper||(t.CryptonomicNameServiceHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(r(40)),a=r(6),u=s(r(2)),c=r(3),l=r(7),p=r(9),f=r(4);!function(t){function r(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return{balanceMap:Number(a.JSONPath({path:"$.args[0].int",json:r})[0]),administrator:a.JSONPath({path:"$.args[2].args[0].string",json:r})[0],token:a.JSONPath({path:"$.args[2].args[1].string",json:r})[0],tokenBalance:Number(a.JSONPath({path:"$.args[3].int",json:r})[0]),xtzBalance:Number(a.JSONPath({path:"$.args[4].int",json:r})[0]),selfIsUpdatingTokenPool:a.JSONPath({path:"$.args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),freeze_baker:a.JSONPath({path:"$.args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),lqt_total:Number(a.JSONPath({path:"$.args[1].args[2].int",json:r})[0])}}))}function o(e,t,r){return i.default(e).multiply(i.default(t)).divide(i.default(r)).toJSNumber()}t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return p.TezosContractUtils.verifyDestination(e,t,"a72954311c48dcc28279590d82870611")}))},t.verifyScript=function(e){return p.TezosContractUtils.verifyScript(e,"yyy")},t.getSimpleStorage=r,t.getAccountBalance=function(t,r,o){return n(this,void 0,void 0,(function*(){try{const n=f.TezosMessageUtils.encodeBigMapKey(e.from(f.TezosMessageUtils.writePackedData(o,"address"),"hex")),s=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${o}`);const i=a.JSONPath({path:"$.args[0].int",json:s});return Number(i[0])}catch(e){return 0}}))},t.getAccountPoolShare=function(t,o,s){return n(this,void 0,void 0,(function*(){try{const n=yield r(t,o),u=f.TezosMessageUtils.encodeBigMapKey(e.from(f.TezosMessageUtils.writePackedData(s,"address"),"hex")),l=yield c.TezosNodeReader.getValueForBigMapKey(t,n.balanceMap,u);if(void 0===l)throw new Error(`Map ${n.balanceMap} does not contain a record for ${s}`);const p=i.default(a.JSONPath({path:"$.args[0].int",json:l})[0]),h=i.default(n.lqt_total),d=i.default(n.tokenBalance),g=i.default(n.xtzBalance);return{token:d.multiply(p).divide(h).toJSNumber(),xtz:g.multiply(p).divide(h).toJSNumber()}}catch(e){return{token:0,xtz:0}}}))},t.getAccountAllowance=function(t,r,o,s){return n(this,void 0,void 0,(function*(){const n=f.TezosMessageUtils.encodeBigMapKey(e.from(f.TezosMessageUtils.writePackedData(o,"address"),"hex")),i=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===i)throw new Error(`Map ${r} does not contain a record for ${o}/${s}`);let u=new Map;return a.JSONPath({path:"$.args[1][*].args",json:i}).forEach(e=>u[e[0].string]=Number(e[1].int)),u[s]||0}))},t.addLiquidity=function(e,t,r,o,s,i,a,c,f){return n(this,void 0,void 0,(function*(){const n=`(Pair (Pair "${r.publicKeyHash}" ${i}) (Pair ${c} "${f.toISOString()}"))`,h=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,a,s,5e3,5e5,"addLiquidity",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.removeLiquidity=function(e,t,r,o,s,i,a,c,f){return n(this,void 0,void 0,(function*(){const n=`(Pair (Pair "${r.publicKeyHash}" (Pair "${r.publicKeyHash}" ${i})) (Pair ${a} (Pair ${c} "${f.toISOString()}")))`,h=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,5e3,5e5,"removeLiquidity",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.xtzToToken=function(e,t,r,o,s,i,a,c){return n(this,void 0,void 0,(function*(){const n=`(Pair "${r.publicKeyHash}" (Pair ${a} "${c.toISOString()}"))`,f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,i,s,5e3,5e5,"xtzToToken",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.tokenToXtz=function(e,t,r,o,s,i,a,c){return n(this,void 0,void 0,(function*(){const n=`(Pair (Pair "${r.publicKeyHash}" "${r.publicKeyHash}") (Pair ${a} (Pair ${i} "${c.toISOString()}")))`,f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,5e3,5e5,"tokenToXtz",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.tokenToToken=function(e,t,r,o,s,i,a,c,f){return n(this,void 0,void 0,(function*(){const n=`(Pair (Pair "${i}" (Pair ${c} "${r.publicKeyHash}")) (Pair "${r.publicKeyHash}" (Pair ${a} "${f.toISOString()}")))`,h=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,5e3,1e6,"tokenToToken",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.approve=function(e,t,r,o,s,i,a,c){return n(this,void 0,void 0,(function*(){const n=`(Pair "${i}" (Pair ${a} ${c}))`,f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,5e3,5e5,"approve",n,u.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.previewTransactions=function(){return n(this,void 0,void 0,(function*(){}))},t.calcTokenLiquidityRequirement=o,t.getTokenExchangeRate=function(e,t,r,n=6){const o=i.default(e).multiply(i.default(t)).multiply(i.default(997)),s=i.default(r).multiply(i.default(1e3)).add(i.default(e).multiply(i.default(997))),a=o.divide(s),u=a.divmod(i.default(e)),c=u.remainder.multiply(i.default(10**n)).divide(i.default(e));return{tokenAmount:a.toJSNumber(),rate:parseFloat(`${u.quotient.toJSNumber()}.${c.toJSNumber()}`)}},t.getXTZExchangeRate=function(e,t,r,n=6){const o=i.default(e).multiply(i.default(r)).multiply(i.default(997)),s=i.default(t).multiply(i.default(1e3)).add(i.default(e).multiply(i.default(997))),a=o.divide(s),u=a.divmod(i.default(e)),c=u.remainder.multiply(i.default(10**n)).divide(i.default(e));return{xtzAmount:a.toJSNumber(),rate:parseFloat(`${u.quotient.toJSNumber()}.${c.toJSNumber()}`)}},t.estimateLiquidityAmount=function(e,t,r){return i.default(e).multiply(i.default(t)).divide(i.default(r)).toJSNumber()},t.estimateShareCost=function(e,t,r){const n=i.default(e).divide(i.default(99)).toJSNumber();return{xtzCost:n,tokenCost:o(n,t,e)}}}(t.DexterPoolHelper||(t.DexterPoolHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(6),s=r(85),i=r(3),a=r(19),u=r(23),c=r(18),l=r(2),p=r(4);!function(t){function r(e,t,r){return n(this,void 0,void 0,(function*(){let o=u.ConseilQueryBuilder.blankQuery();o=u.ConseilQueryBuilder.addFields(o,"key","value","operation_group_id"),o=u.ConseilQueryBuilder.addPredicate(o,"big_map_id",a.ConseilOperator.EQ,[e]),o=u.ConseilQueryBuilder.addPredicate(o,"key",a.ConseilOperator.STARTSWITH,["Pair 0x"+p.TezosMessageUtils.writeAddress(t)]),o=u.ConseilQueryBuilder.addPredicate(o,"value",a.ConseilOperator.EQ,[0],!0),o=u.ConseilQueryBuilder.setLimit(o,1e4);const i=yield c.TezosConseilClient.getTezosEntityData(r,r.network,"big_map_contents",o),l=function(e,t){const r=[],n=e.length;let o=0;for(;o<n;)r.push(e.slice(o,o+=t));return r}(i.map(e=>e.operation_group_id),30).map(e=>function(e){let t=u.ConseilQueryBuilder.blankQuery();return t=u.ConseilQueryBuilder.addFields(t,"timestamp","amount","operation_group_hash","parameters_entrypoints","parameters"),t=u.ConseilQueryBuilder.addPredicate(t,"kind",a.ConseilOperator.EQ,["transaction"]),t=u.ConseilQueryBuilder.addPredicate(t,"status",a.ConseilOperator.EQ,["applied"]),t=u.ConseilQueryBuilder.addPredicate(t,"internal",a.ConseilOperator.EQ,["false"]),t=u.ConseilQueryBuilder.addPredicate(t,"operation_group_hash",e.length>1?a.ConseilOperator.IN:a.ConseilOperator.EQ,e),t=u.ConseilQueryBuilder.setLimit(t,e.length),t}(e)),f={};yield Promise.all(l.map(e=>n(this,void 0,void 0,(function*(){return yield c.TezosConseilClient.getTezosEntityData(r,r.network,"operations",e).then(e=>e.map(e=>{let t=0;const r=e.parameters_entrypoints;"collect"===r?t=Number(e.parameters.toString().replace(/^Pair ([0-9]+) [0-9]+/,"$1")):"transfer"===r&&(t=Number(e.parameters.toString().replace(/[{] Pair \"[1-9A-HJ-NP-Za-km-z]{36}\" [{] Pair \"[1-9A-HJ-NP-Za-km-z]{36}\" [(]Pair [0-9]+ [0-9]+[)] [}] [}]/,"$1"))),f[e.operation_group_hash]={price:new s.BigNumber(e.amount),amount:t,timestamp:e.timestamp,action:r}}))}))));return i.map(e=>{let t=0,r=new Date,n="";try{const o=f[e.operation_group_id];t=o.price.dividedToIntegerBy(o.amount).toNumber(),r=new Date(o.timestamp),n="collect"===o.action?"Purchased":"Received"}catch(e){}return{piece:e.key.toString().replace(/.* ([0-9]{1,}$)/,"$1"),amount:Number(e.value),price:isNaN(t)?0:t,receivedOn:r,action:n}}).sort((e,t)=>t.receivedOn.getTime()-e.receivedOn.getTime())}))}t.objktsAddress="KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",t.hDaoAddress="KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW",t.getStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield i.TezosNodeReader.getContractStorage(e,t);return{administrator:o.JSONPath({path:"$.args[0].args[0].string",json:r})[0],tokens:Number(o.JSONPath({path:"$.args[0].args[1].int",json:r})[0]),ledger:Number(o.JSONPath({path:"$.args[0].args[2].int",json:r})[0]),metadata:Number(o.JSONPath({path:"$.args[1].args[0].int",json:r})[0]),operators:Number(o.JSONPath({path:"$.args[1].args[1].int",json:r})[0]),paused:o.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),tokenMetadata:Number(o.JSONPath({path:"$.args[3].int",json:r})[0])}}))},t.getCollection=r,t.getCollectionSize=function(e,t,o){return n(this,void 0,void 0,(function*(){return(yield r(e,t,o)).reduce((e,t)=>e+t.amount,0)}))},t.getBalance=function(t,r,a){return n(this,void 0,void 0,(function*(){const n=p.TezosMessageUtils.encodeBigMapKey(e.from(p.TezosMessageUtils.writePackedData(`(Pair 0x${p.TezosMessageUtils.writeAddress(a)} 0)`,"",l.TezosParameterFormat.Michelson),"hex"));let u=0;try{const e=yield i.TezosNodeReader.getValueForBigMapKey(t,r,n);u=new s.BigNumber(o.JSONPath({path:"$.int",json:e})[0]).toNumber()}catch(e){}return u}))},t.getTokenInfo=function(e,t=515){return n(this,void 0,void 0,(function*(){let r=u.ConseilQueryBuilder.blankQuery();r=u.ConseilQueryBuilder.addFields(r,"value"),r=u.ConseilQueryBuilder.addPredicate(r,"big_map_id",a.ConseilOperator.EQ,[t]),r=u.ConseilQueryBuilder.setLimit(r,2e4);const n=yield c.TezosConseilClient.getTezosEntityData(e,e.network,"big_map_contents",r);let o=0,i=new s.BigNumber(0);return n.forEach(e=>{try{const t=new s.BigNumber(e.value);t.isGreaterThan(0)&&(i=i.plus(t)),o++}catch(e){}}),{holders:o,totalBalance:i.toNumber()}}))},t.getNFTObjectDetails=function(t,r){return n(this,void 0,void 0,(function*(){const n=p.TezosMessageUtils.encodeBigMapKey(e.from(p.TezosMessageUtils.writePackedData(r,"int"),"hex")),s=yield i.TezosNodeReader.getValueForBigMapKey(t,514,n),a=o.JSONPath({path:"$.args[1][0].args[1].bytes",json:s})[0],u=e.from(a,"hex").toString().slice(7),c=yield fetch("https://cloudflare-ipfs.com/ipfs/"+u,{cache:"no-store"}),l=yield c.json();return{name:l.name,description:l.description,creators:l.creators.map(e=>e.trim()).map(e=>`${e.slice(0,6)}...${e.slice(e.length-6,e.length)}`).join(", "),artifactUrl:"https://cloudflare-ipfs.com/ipfs/"+l.formats[0].uri.toString().slice(7),artifactType:l.formats[0].mimeType.toString()}}))}}(t.HicNFTHelper||(t.HicNFTHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){var n;!function(o){"use strict";var s,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",p=1e14,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e9;function d(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,o=e.length,s=e[0]+"";n<o;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);s+=t}for(o=s.length;48===s.charCodeAt(--o););return s.slice(0,o+1||1)}function m(e,t){var r,n,o=e.c,s=t.c,i=e.s,a=t.s,u=e.e,c=t.e;if(!i||!a)return null;if(r=o&&!o[0],n=s&&!s[0],r||n)return r?n?0:-a:i;if(i!=a)return i;if(r=i<0,n=u==c,!o||!s)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=o.length)<(c=s.length)?u:c,i=0;i<a;i++)if(o[i]!=s[i])return o[i]>s[i]^r?1:-1;return u==c?0:u>c^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(c+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return d(e.e/14)==t&&e.c[t]%2!=0}function P(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function $(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(s=function e(t){var r,n,o,s,v,_,A,T,I,S=z.prototype={constructor:z,toString:null,valueOf:null},D=new z(1),E=20,w=4,R=-7,C=21,O=-1e7,U=1e7,N=!1,M=1,x=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";function z(e,t){var r,s,a,c,p,f,h,d,g=this;if(!(g instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>U?g.c=g.e=null:e.e<O?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,p=e;p>=10;p/=10,c++);return void(c>U?g.c=g.e=null:(g.e=c,g.c=[e]))}d=String(e)}else{if(!i.test(d=String(e)))return o(g,d,f);g.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(c=d.indexOf("."))>-1&&(d=d.replace(".","")),(p=d.search(/e/i))>0?(c<0&&(c=p),c+=+d.slice(p+1),d=d.substring(0,p)):c<0&&(c=d.length)}else{if(y(t,2,F.length,"Base"),10==t)return j(g=new z(e),E+g.e+1,w);if(d=String(e),f="number"==typeof e){if(0*e!=0)return o(g,d,f,t);if(g.s=1/e<0?(d=d.slice(1),-1):1,z.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else g.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=F.slice(0,t),c=p=0,h=d.length;p<h;p++)if(r.indexOf(s=d.charAt(p))<0){if("."==s){if(p>c){c=h;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,p=-1,c=0;continue}return o(g,String(e),f,t)}f=!1,(c=(d=n(d,t,10,g.s)).indexOf("."))>-1?d=d.replace(".",""):c=d.length}for(p=0;48===d.charCodeAt(p);p++);for(h=d.length;48===d.charCodeAt(--h););if(d=d.slice(p,++h)){if(h-=p,f&&z.DEBUG&&h>15&&(e>9007199254740991||e!==u(e)))throw Error(l+g.s*e);if((c=c-p-1)>U)g.c=g.e=null;else if(c<O)g.c=[g.e=0];else{if(g.e=c,g.c=[],p=(c+1)%14,c<0&&(p+=14),p<h){for(p&&g.c.push(+d.slice(0,p)),h-=14;p<h;)g.c.push(+d.slice(p,p+=14));p=14-(d=d.slice(p)).length}else p-=h;for(;p--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}function B(e,t,r,n){var o,s,i,a,u;if(null==r?r=w:y(r,0,8),!e.c)return e.toString();if(o=e.c[0],i=e.e,null==t)u=g(e.c),u=1==n||2==n&&(i<=R||i>=C)?P(u,i):$(u,i,"0");else if(s=(e=j(new z(e),t,r)).e,a=(u=g(e.c)).length,1==n||2==n&&(t<=s||s<=R)){for(;a<t;u+="0",a++);u=P(u,s)}else if(t-=i,u=$(u,s,"0"),s+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-a)>0)for(s+1==a&&(u+=".");t--;u+="0");return e.s<0&&o?"-"+u:u}function L(e,t){for(var r,n=1,o=new z(e[0]);n<e.length;n++){if(!(r=new z(e[n])).s){o=r;break}t.call(o,r)&&(o=r)}return o}function W(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+14*r-1)>U?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=t),e}function j(e,t,r,n){var o,s,i,c,l,h,d,g=e.c,m=f;if(g){e:{for(o=1,c=g[0];c>=10;c/=10,o++);if((s=t-o)<0)s+=14,i=t,d=(l=g[h=0])/m[o-i-1]%10|0;else if((h=a((s+1)/14))>=g.length){if(!n)break e;for(;g.length<=h;g.push(0));l=d=0,o=1,i=(s%=14)-14+1}else{for(l=c=g[h],o=1;c>=10;c/=10,o++);d=(i=(s%=14)-14+o)<0?0:l/m[o-i-1]%10|0}if(n=n||t<0||null!=g[h+1]||(i<0?l:l%m[o-i-1]),n=r<4?(d||n)&&(0==r||r==(e.s<0?3:2)):d>5||5==d&&(4==r||n||6==r&&(s>0?i>0?l/m[o-i]:0:g[h-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=m[(14-t%14)%14],e.e=-t||0):g[0]=e.e=0,e;if(0==s?(g.length=h,c=1,h--):(g.length=h+1,c=m[14-s],g[h]=i>0?u(l/m[o-i]%m[i])*c:0),n)for(;;){if(0==h){for(s=1,i=g[0];i>=10;i/=10,s++);for(i=g[0]+=c,c=1;i>=10;i/=10,c++);s!=c&&(e.e++,g[0]==p&&(g[0]=1));break}if(g[h]+=c,g[h]!=p)break;g[h--]=0,c=1}for(s=g.length;0===g[--s];g.pop());}e.e>U?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function G(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=R||r>=C?P(t,r):$(t,r,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,h,t),E=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),w=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-h,0,t),y(r[1],0,h,t),R=r[0],C=r[1]):(y(r,-h,h,t),R=-(C=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-h,-1,t),y(r[1],1,h,t),O=r[0],U=r[1];else{if(y(r,-h,h,t),!r)throw Error(c+t+" cannot be zero: "+r);O=-(U=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(c+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!r,Error(c+"crypto unavailable");N=r}else N=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),M=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,h,t),x=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(c+t+" not an object: "+r);k=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+t+" invalid: "+r);F=r}}return{DECIMAL_PLACES:E,ROUNDING_MODE:w,EXPONENTIAL_AT:[R,C],RANGE:[O,U],CRYPTO:N,MODULO_MODE:M,POW_PRECISION:x,FORMAT:k,ALPHABET:F}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,r,n=e.c,o=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&o>=-h&&o<=h&&o===u(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=p||r!==u(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===s||1===s||-1===s))return!0;throw Error(c+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return L(arguments,S.lt)},z.minimum=z.min=function(){return L(arguments,S.gt)},z.random=(s=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,i,l=0,p=[],d=new z(D);if(null==e?e=E:y(e,0,h),o=a(e/14),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(i=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(p.push(i%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw N=!1,Error(c+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(i=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(p.push(i%1e14),l+=7);l=o/7}if(!N)for(;l<o;)(i=s())<9e15&&(p[l++]=i%1e14);for(e%=14,(o=p[--l])&&e&&(i=f[14-e],p[l]=u(o/i)*i);0===p[l];p.pop(),l--);if(l<0)p=[n=0];else{for(n=-1;0===p[0];p.splice(0,1),n-=14);for(l=1,i=p[0];i>=10;i/=10,l++);l<14&&(n-=14-l)}return d.e=n,d.c=p,d}),z.sum=function(){for(var e=1,t=arguments,r=new z(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){function e(e,t,r,n){for(var o,s,i=[0],a=0,u=e.length;a<u;){for(s=i.length;s--;i[s]*=t);for(i[0]+=n.indexOf(e.charAt(a++)),o=0;o<i.length;o++)i[o]>r-1&&(null==i[o+1]&&(i[o+1]=0),i[o+1]+=i[o]/r|0,i[o]%=r)}return i.reverse()}return function(t,n,o,s,i){var a,u,c,l,p,f,h,d,m=t.indexOf("."),y=E,b=w;for(m>=0&&(l=x,x=0,t=t.replace(".",""),f=(d=new z(n)).pow(t.length-m),x=l,d.c=e($(g(f.c),f.e,"0"),10,o,"0123456789"),d.e=d.c.length),c=l=(h=e(t,n,o,i?(a=F,"0123456789"):(a="0123456789",F))).length;0==h[--l];h.pop());if(!h[0])return a.charAt(0);if(m<0?--c:(f.c=h,f.e=c,f.s=s,h=(f=r(f,d,y,b,o)).c,p=f.r,c=f.e),m=h[u=c+y+1],l=o/2,p=p||u<0||null!=h[u+1],p=b<4?(null!=m||p)&&(0==b||b==(f.s<0?3:2)):m>l||m==l&&(4==b||p||6==b&&1&h[u-1]||b==(f.s<0?8:7)),u<1||!h[0])t=p?$(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(h.length=u,p)for(--o;++h[--u]>o;)h[u]=0,u||(++c,h=[1].concat(h));for(l=h.length;!h[--l];);for(m=0,t="";m<=l;t+=a.charAt(h[m++]));t=$(t,c,a.charAt(0))}return t}}(),r=function(){function e(e,t,r){var n,o,s,i,a=0,u=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();u--;)a=((o=c*(s=e[u]%1e7)+(n=l*s+(i=e[u]/1e7|0)*c)%1e7*1e7+a)/r|0)+(n/1e7|0)+l*i,e[u]=o%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var o,s;if(r!=n)s=r>n?1:-1;else for(o=s=0;o<r;o++)if(e[o]!=t[o]){s=e[o]>t[o]?1:-1;break}return s}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,s,i,a){var c,l,f,h,g,m,y,b,P,$,v,_,A,T,I,S,D,E=n.s==o.s?1:-1,w=n.c,R=o.c;if(!(w&&w[0]&&R&&R[0]))return new z(n.s&&o.s&&(w?!R||w[0]!=R[0]:R)?w&&0==w[0]||!R?0*E:E/0:NaN);for(P=(b=new z(E)).c=[],E=s+(l=n.e-o.e)+1,a||(a=p,l=d(n.e/14)-d(o.e/14),E=E/14|0),f=0;R[f]==(w[f]||0);f++);if(R[f]>(w[f]||0)&&l--,E<0)P.push(1),h=!0;else{for(T=w.length,S=R.length,f=0,E+=2,(g=u(a/(R[0]+1)))>1&&(R=e(R,g,a),w=e(w,g,a),S=R.length,T=w.length),A=S,v=($=w.slice(0,S)).length;v<S;$[v++]=0);D=R.slice(),D=[0].concat(D),I=R[0],R[1]>=a/2&&I++;do{if(g=0,(c=t(R,$,S,v))<0){if(_=$[0],S!=v&&(_=_*a+($[1]||0)),(g=u(_/I))>1)for(g>=a&&(g=a-1),y=(m=e(R,g,a)).length,v=$.length;1==t(m,$,y,v);)g--,r(m,S<y?D:R,y,a),y=m.length,c=1;else 0==g&&(c=g=1),y=(m=R.slice()).length;if(y<v&&(m=[0].concat(m)),r($,m,v,a),v=$.length,-1==c)for(;t(R,$,S,v)<1;)g++,r($,S<v?D:R,v,a),v=$.length}else 0===c&&(g++,$=[0]);P[f++]=g,$[0]?$[v++]=w[A]||0:($=[w[A]],v=1)}while((A++<T||null!=$[0])&&E--);h=null!=$[0],P[0]||P.splice(0,1)}if(a==p){for(f=1,E=P[0];E>=10;E/=10,f++);j(b,s+(b.e=f+14*l-1)+1,i,h)}else b.e=l,b.r=+h;return b}}(),v=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,A=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,r,n){var o,s=r?t:t.replace(I,"");if(T.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(v,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,s=s.replace(_,"$1").replace(A,"0.$1")),t!=s))return new z(s,o);if(z.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},S.absoluteValue=S.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},S.comparedTo=function(e,t){return m(this,new z(e,t))},S.decimalPlaces=S.dp=function(e,t){var r,n,o,s=this;if(null!=e)return y(e,0,h),null==t?t=w:y(t,0,8),j(new z(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=14*((o=r.length-1)-d(this.e/14)),o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},S.dividedBy=S.div=function(e,t){return r(this,new z(e,t),E,w)},S.dividedToIntegerBy=S.idiv=function(e,t){return r(this,new z(e,t),0,1)},S.exponentiatedBy=S.pow=function(e,t){var r,n,o,s,i,l,p,f,h=this;if((e=new z(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+G(e));if(null!=t&&(t=new z(t)),i=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return f=new z(Math.pow(+G(h),i?2-b(e):+G(e))),t?f.mod(t):f;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(n=!l&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||i&&h.c[1]>=24e7:h.c[0]<8e13||i&&h.c[0]<=9999975e7)))return s=h.s<0&&b(e)?-0:0,h.e>-1&&(s=1/s),new z(l?1/s:s);x&&(s=a(x/14+2))}for(i?(r=new z(.5),l&&(e.s=1),p=b(e)):p=(o=Math.abs(+G(e)))%2,f=new z(D);;){if(p){if(!(f=f.times(h)).c)break;s?f.c.length>s&&(f.c.length=s):n&&(f=f.mod(t))}if(o){if(0===(o=u(o/2)))break;p=o%2}else if(j(e=e.times(r),e.e+1,1),e.e>14)p=b(e);else{if(0===(o=+G(e)))break;p=o%2}h=h.times(h),s?h.c&&h.c.length>s&&(h.c.length=s):n&&(h=h.mod(t))}return n?f:(l&&(f=D.div(f)),t?f.mod(t):s?j(f,x,w,void 0):f)},S.integerValue=function(e){var t=new z(this);return null==e?e=w:y(e,0,8),j(t,t.e+1,e)},S.isEqualTo=S.eq=function(e,t){return 0===m(this,new z(e,t))},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(e,t){return m(this,new z(e,t))>0},S.isGreaterThanOrEqualTo=S.gte=function(e,t){return 1===(t=m(this,new z(e,t)))||0===t},S.isInteger=function(){return!!this.c&&d(this.e/14)>this.c.length-2},S.isLessThan=S.lt=function(e,t){return m(this,new z(e,t))<0},S.isLessThanOrEqualTo=S.lte=function(e,t){return-1===(t=m(this,new z(e,t)))||0===t},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&0==this.c[0]},S.minus=function(e,t){var r,n,o,s,i=this,a=i.s;if(t=(e=new z(e,t)).s,!a||!t)return new z(NaN);if(a!=t)return e.s=-t,i.plus(e);var u=i.e/14,c=e.e/14,l=i.c,f=e.c;if(!u||!c){if(!l||!f)return l?(e.s=-t,e):new z(f?i:NaN);if(!l[0]||!f[0])return f[0]?(e.s=-t,e):new z(l[0]?i:3==w?-0:0)}if(u=d(u),c=d(c),l=l.slice(),a=u-c){for((s=a<0)?(a=-a,o=l):(c=u,o=f),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(n=(s=(a=l.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(l[t]!=f[t]){s=l[t]<f[t];break}if(s&&(o=l,l=f,f=o,e.s=-e.s),(t=(n=f.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=p-1;n>a;){if(l[--n]<f[n]){for(r=n;r&&!l[--r];l[r]=t);--l[r],l[n]+=p}l[n]-=f[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?W(e,l,c):(e.s=3==w?-1:1,e.c=[e.e=0],e)},S.modulo=S.mod=function(e,t){var n,o,s=this;return e=new z(e,t),!s.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||s.c&&!s.c[0]?new z(s):(9==M?(o=e.s,e.s=1,n=r(s,e,0,3),e.s=o,n.s*=o):n=r(s,e,0,M),(e=s.minus(n.times(e))).c[0]||1!=M||(e.s=s.s),e)},S.multipliedBy=S.times=function(e,t){var r,n,o,s,i,a,u,c,l,f,h,g,m,y,b=this,P=b.c,$=(e=new z(e,t)).c;if(!(P&&$&&P[0]&&$[0]))return!b.s||!e.s||P&&!P[0]&&!$||$&&!$[0]&&!P?e.c=e.e=e.s=null:(e.s*=b.s,P&&$?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=d(b.e/14)+d(e.e/14),e.s*=b.s,(u=P.length)<(f=$.length)&&(m=P,P=$,$=m,o=u,u=f,f=o),o=u+f,m=[];o--;m.push(0));for(y=p,1e7,o=f;--o>=0;){for(r=0,h=$[o]%1e7,g=$[o]/1e7|0,s=o+(i=u);s>o;)r=((c=h*(c=P[--i]%1e7)+(a=g*c+(l=P[i]/1e7|0)*h)%1e7*1e7+m[s]+r)/y|0)+(a/1e7|0)+g*l,m[s--]=c%y;m[s]=r}return r?++n:m.splice(0,1),W(e,m,n)},S.negated=function(){var e=new z(this);return e.s=-e.s||null,e},S.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new z(e,t)).s,!o||!t)return new z(NaN);if(o!=t)return e.s=-t,n.minus(e);var s=n.e/14,i=e.e/14,a=n.c,u=e.c;if(!s||!i){if(!a||!u)return new z(o/0);if(!a[0]||!u[0])return u[0]?e:new z(a[0]?n:0*o)}if(s=d(s),i=d(i),a=a.slice(),o=s-i){for(o>0?(i=s,r=u):(o=-o,r=a),r.reverse();o--;r.push(0));r.reverse()}for((o=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=o),o=0;t;)o=(a[--t]=a[t]+u[t]+o)/p|0,a[t]=p===a[t]?0:a[t]%p;return o&&(a=[o].concat(a),++i),W(e,a,i)},S.precision=S.sd=function(e,t){var r,n,o,s=this;if(null!=e&&e!==!!e)return y(e,1,h),null==t?t=w:y(t,0,8),j(new z(s),e,t);if(!(r=s.c))return null;if(n=14*(o=r.length-1)+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},S.shiftedBy=function(e){return y(e,-9007199254740991,9007199254740991),this.times("1e"+e)},S.squareRoot=S.sqrt=function(){var e,t,n,o,s,i=this,a=i.c,u=i.s,c=i.e,l=E+4,p=new z("0.5");if(1!==u||!a||!a[0])return new z(!u||u<0&&(!a||a[0])?NaN:a?i:1/0);if(0==(u=Math.sqrt(+G(i)))||u==1/0?(((t=g(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=d((c+1)/2)-(c<0||c%2),n=new z(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new z(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(s=n,n=p.times(s.plus(r(i,s,l,1))),g(s.c).slice(0,u)===(t=g(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(j(n,n.e+E+2,1),e=!n.times(n).eq(i));break}if(!o&&(j(s,s.e+E+2,0),s.times(s).eq(i))){n=s;break}l+=4,u+=4,o=1}return j(n,n.e+E+1,w,e)},S.toExponential=function(e,t){return null!=e&&(y(e,0,h),e++),B(this,e,t,1)},S.toFixed=function(e,t){return null!=e&&(y(e,0,h),e=e+this.e+1),B(this,e,t)},S.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=k;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var s,i=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",p=i[0],f=i[1],h=o.s<0,d=h?p.slice(1):p,g=d.length;if(u&&(s=a,a=u,u=s,g-=s),a>0&&g>0){for(s=g%a||a,p=d.substr(0,s);s<g;s+=a)p+=l+d.substr(s,a);u>0&&(p+=l+d.slice(s)),h&&(p="-"+p)}n=f?p+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):p}return(r.prefix||"")+n+(r.suffix||"")},S.toFraction=function(e){var t,n,o,s,i,a,u,l,p,h,d,m,y=this,b=y.c;if(null!=e&&(!(u=new z(e)).isInteger()&&(u.c||1!==u.s)||u.lt(D)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+G(u));if(!b)return new z(y);for(t=new z(D),p=n=new z(D),o=l=new z(D),m=g(b),i=t.e=m.length-y.e-1,t.c[0]=f[(a=i%14)<0?14+a:a],e=!e||u.comparedTo(t)>0?i>0?t:p:u,a=U,U=1/0,u=new z(m),l.c[0]=0;h=r(u,t,0,1),1!=(s=n.plus(h.times(o))).comparedTo(e);)n=o,o=s,p=l.plus(h.times(s=p)),l=s,t=u.minus(h.times(s=t)),u=s;return s=r(e.minus(n),o,0,1),l=l.plus(s.times(p)),n=n.plus(s.times(o)),l.s=p.s=y.s,d=r(p,o,i*=2,w).minus(y).abs().comparedTo(r(l,n,i,w).minus(y).abs())<1?[p,o]:[l,n],U=a,d},S.toNumber=function(){return+G(this)},S.toPrecision=function(e,t){return null!=e&&y(e,1,h),B(this,e,t,2)},S.toString=function(e){var t,r=this,o=r.s,s=r.e;return null===s?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=s<=R||s>=C?P(g(r.c),s):$(g(r.c),s,"0"):10===e?t=$(g((r=j(new z(r),E+s+1,w)).c),r.e,"0"):(y(e,2,F.length,"Base"),t=n($(g(r.c),s,"0"),10,e,o,!0)),o<0&&r.c[0]&&(t="-"+t)),t},S.valueOf=S.toJSON=function(){return G(this)},S._isBigNumber=!0,null!=t&&z.set(t),z}()).default=s.BigNumber=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(8),u=r(4),c=r(3),l=r(7),p=r(9);!function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return p.TezosContractUtils.verifyDestination(e,t,"0e3e137841a959521324b4ce20ca2df7")}))},t.verifyScript=function(e){return p.TezosContractUtils.verifyScript(e,"b77ada691b1d630622bea243696c84d7")},t.getAccountBalance=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(o,"address"),"hex")),i=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===i)throw new Error(`Map ${r} does not contain a record for ${o}`);const a=s.JSONPath({path:"$.args[1].int",json:i});return Number(a[0])}))},t.getAccountAllowance=function(t,r,o,i){return n(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(i,"address"),"hex")),a=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===a)throw new Error(`Map ${r} does not contain a record for ${i}/${o}`);let l=new Map;return s.JSONPath({path:"$.args[1][*].args",json:a}).forEach(e=>l[e[0].string]=Number(e[1].int)),l[o]}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return{mapid:Number(s.JSONPath({path:"$.args[0].args[0].args[1].int",json:r})[0]),supply:Number(s.JSONPath({path:"$.args[3].int",json:r})[0]),administrator:s.JSONPath({path:"$.args[0].args[0].args[0].string",json:r})[0],paused:s.JSONPath({path:"$.args[1].args[1].prim",json:r})[0].toString().toLowerCase().startsWith("t")}}))},t.getTokenSupply=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return Number(s.JSONPath({path:"$.args[3].int",json:r})[0])}))},t.getAdministrator=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return s.JSONPath({path:"$.args[1].string",json:r})[0]}))},t.getPaused=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return s.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,o,s,u,c,f,h,d){return n(this,void 0,void 0,(function*(){const n=`(Left (Left (Left (Pair "${u}" (Pair "${c}" ${f})))))`,g=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,d,h,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.approveBalance=function(e,t,r,o,s,u,c,f,h){return n(this,void 0,void 0,(function*(){const n=`(Left (Left (Right (Pair "${u}" ${c}))))`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.activateLedger=function(e,t,r,o,s,u,c){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,c,u,"","(Right (Left (Left False)))",i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.deactivateLedger=function(e,t,r,o,s,u,c){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,c,u,"","(Right (Left (Left True)))",i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.setAdministrator=function(e,t,r,o,s,u,c,f){return n(this,void 0,void 0,(function*(){const n=`(Right (Left (Right "${s}")))`,h=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,u,f,c,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.mint=function(e,t,r,o,s,u,c,f=15e4,h=5e3){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Left (Pair "${u}" ${c})))))`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.burn=function(e,t,r,o,s,u,c,f,h){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Right (Pair "${u}" ${c})))))`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))}}(t.KolibriTokenHelper||(t.KolibriTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(17)),i=r(6),a=r(10),u=r(3),c=r(7),l=o(r(2));!function(t){t.verifyDestination=function(t,r){return n(this,void 0,void 0,(function*(){const n=yield u.TezosNodeReader.getAccountForBlock(t,"head",r);if(!n.script)throw new Error("No code found at "+r);const o=e.from(s.blake2s(JSON.stringify(n.script.code),null,16)).toString("hex");if("914629850cfdad7b54a8c5a661d10bd0"!==o)throw new Error(`Contract does not match the expected code hash: ${o}, '914629850cfdad7b54a8c5a661d10bd0'`);return!0}))},t.verifyScript=function(t){const r=e.from(s.blake2s(a.TezosLanguageUtil.preProcessMichelsonScript(t).join("\n"),null,16)).toString("hex");if("ffcad1e376a6c8915780fe6676aceec6"!==r)throw new Error(`Contract does not match the expected code hash: ${r}, 'ffcad1e376a6c8915780fe6676aceec6'`);return!0},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{counter:Number(i.JSONPath({path:"$.args[0].int",json:r})[0]),threshold:Number(i.JSONPath({path:"$.args[1].args[0].int",json:r})[0]),keys:i.JSONPath({path:"$.args[1].args[1]..string",json:r})}}))},t.deployContract=function(e,t,r,o,s,i,a,u,p){return n(this,void 0,void 0,(function*(){if(u>p.length)throw new Error("Number of keys provided is lower than the threshold");const n=`(Pair ${a} (Pair ${u} { "${p.join('" ; "')}" } ) )`,f=yield c.TezosNodeWriter.sendContractOriginationOperation(e,t,r,i,o,s,5e3,12e4,"parameter (pair (pair :payload (nat %counter) (or :action (pair :transfer (mutez %amount) (contract %dest unit)) (or (option %delegate key_hash) (pair %change_keys (nat %threshold) (list %keys key))))) (list %sigs (option signature)));\n        storage (pair (nat %stored_counter) (pair (nat %threshold) (list %keys key)));\n        code\n          {\n            UNPAIR ; SWAP ; DUP ; DIP { SWAP } ;\n            DIP\n              {\n                UNPAIR ;\n                DUP ; SELF ; ADDRESS ; CHAIN_ID ; PAIR ; PAIR ;\n                PACK ;\n                DIP { UNPAIR @counter ; DIP { SWAP } } ; SWAP\n              } ;\n            UNPAIR @stored_counter; DIP { SWAP };\n            ASSERT_CMPEQ ;\n            DIP { SWAP } ; UNPAIR @threshold @keys;\n            DIP\n              {\n                PUSH @valid nat 0; SWAP ;\n                ITER\n                  {\n                    DIP { SWAP } ; SWAP ;\n                    IF_CONS\n                      {\n                        IF_SOME\n                          { SWAP ;\n                            DIP\n                              {\n                                SWAP ; DIIP { DUUP } ;\n                                CHECK_SIGNATURE ; ASSERT ;\n                                PUSH nat 1 ; ADD @valid } }\n                          { SWAP ; DROP }\n                      }\n                      {\n                        FAIL\n                      } ;\n                    SWAP\n                  }\n              } ;\n            ASSERT_CMPLE ;\n            DROP ; DROP ;\n            DIP { UNPAIR ; PUSH nat 1 ; ADD @new_counter ; PAIR} ;\n            NIL operation ; SWAP ;\n            IF_LEFT\n              {\n                UNPAIR ; UNIT ; TRANSFER_TOKENS ; CONS }\n              { IF_LEFT {\n                          SET_DELEGATE ; CONS }\n                        {\n                          DIP { SWAP ; CAR } ; SWAP ; PAIR ; SWAP }} ;\n            PAIR }",n,l.TezosParameterFormat.Michelson);return f.operationGroupID.replace(/\"/g,"").replace(/\n/,"")}))}}(t.MurbardMultisigHelper||(t.MurbardMultisigHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(17)),i=r(6),a=r(4),u=r(3);!function(t){t.verifyDestination=function(t,r){return n(this,void 0,void 0,(function*(){const n=yield u.TezosNodeReader.getAccountForBlock(t,"head",r);if(!n.script)throw new Error("No code found at "+r);if("1527ddf08bdf582dce0b28c051044897"!==e.from(s.blake2s(n.script.toString(),null,16)).toString("hex"))throw new Error(`Contract at ${r} does not match the expected code hash`);return!0}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{mapid:parseInt(i.JSONPath({path:"$.args[0].int",json:r})[0]),owner:i.JSONPath({path:"$.args[1].args[0].string",json:r})[0],signupFee:parseInt(i.JSONPath({path:"$.args[1].args[1].args[0].int",json:r})[0]),updateFee:parseInt(i.JSONPath({path:"$.args[1].args[1].args[1].int",json:r})[0])}}))},t.updateRegistration=function(e,t,r,o,s,i,a){return n(this,void 0,void 0,(function*(){}))},t.queryRegistration=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(o,"key_hash"),"hex")),s=yield u.TezosNodeReader.getValueForBigMapKey(t,r,n);if(!s)return;const c=new TextDecoder,l=Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[0].args[1].int",json:s})[0]);return{name:c.decode(e.from(i.JSONPath({path:"$.args[0].args[0].args[0].args[0].args[0].args[0].bytes",json:s})[0],"hex")),isAcceptingDelegation:Boolean(i.JSONPath({path:"$.args[0].args[0].args[0].args[0].args[0].args[1].prim",json:s})[0]),externalDataURL:c.decode(e.from(i.JSONPath({path:"$.args[0].args[0].args[0].args[0].args[1].bytes",json:s})[0],"hex")),split:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[0].args[0].int",json:s})[0])/1e4,paymentAccounts:i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[0].args[1]..string",json:s}),minimumDelegation:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[0].args[0].int",json:s})[0]),isGreedy:Boolean(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[0].args[1].prim",json:s})[0]),payoutDelay:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[0].int",json:s})[0]),payoutFrequency:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[1].args[0].int",json:s})[0]),minimumPayout:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[1].args[1].int",json:s})[0]),isCheap:Boolean(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[0].args[0].prim",json:s})[0]),paymentConfig:{payForOwnBlocks:Boolean(1&l),payForEndorsements:Boolean(2&l),payGainedFees:Boolean(4&l),payForAccusationGains:Boolean(8&l),subtractLostDepositsWhenAccused:Boolean(16&l),subtractLostRewardsWhenAccused:Boolean(32&l),subtractLostFeesWhenAccused:Boolean(64&l),payForRevelation:Boolean(128&l),subtractLostRewardsWhenMissRevelation:Boolean(256&l),subtractLostFeesWhenMissRevelation:Boolean(512&l),compensateMissedBlocks:!Boolean(1024&l),payForStolenBlocks:Boolean(2048&l),compensateMissedEndorsements:!Boolean(4096&l),compensateLowPriorityEndorsementLoss:!Boolean(8192&l)},overdelegationThreshold:Number(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[1].args[0].int",json:s})[0]),subtractRewardsFromUninvitedDelegation:Boolean(i.JSONPath({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[1].args[1].prim",json:s})[0]),recordManager:i.JSONPath({path:"$.args[0].args[1].args[0].string",json:s})[0],timestamp:new Date(i.JSONPath({path:"$.args[1].string",json:s})[0])}}))}}(t.TCFBakerRegistryHelper||(t.TCFBakerRegistryHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(8),u=r(4),c=r(3),l=r(7),p=r(9);!function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return p.TezosContractUtils.verifyDestination(e,t,"0e3e137841a959521324b4ce20ca2df7")}))},t.verifyScript=function(e){return p.TezosContractUtils.verifyScript(e,"b77ada691b1d630622bea243696c84d7")},t.deployContract=function(e,t,r,o,s,u=!0,c=0,f=15e4,h=5e3){return n(this,void 0,void 0,(function*(){const n=`Pair {} (Pair "${s}" (Pair ${u?"True":"False"} ${c}))`,d=yield l.TezosNodeWriter.sendContractOriginationOperation(e,t,r,0,void 0,o,h,f,'parameter (or (or (or (pair %transfer (address :from) (pair (address :to) (nat :value))) (pair %approve (address :spender) (nat :value))) (or (pair %getAllowance (pair (address :owner) (address :spender)) (contract nat)) (or (pair %getBalance (address :owner) (contract nat)) (pair %getTotalSupply unit (contract nat))))) (or (or (bool %setPause) (address %setAdministrator)) (or (pair %getAdministrator unit (contract address)) (or (pair %mint (address :to) (nat :value)) (pair %burn (address :from) (nat :value))))));\n        storage (pair (big_map %ledger (address :user) (pair (nat :balance) (map :approvals (address :spender) (nat :value)))) (pair (address %admin) (pair (bool %paused) (nat %totalSupply))));\n        code { CAST (pair (or (or (or (pair address (pair address nat)) (pair address nat)) (or (pair (pair address address) (contract nat)) (or (pair address (contract nat)) (pair unit (contract nat))))) (or (or bool address) (or (pair unit (contract address)) (or (pair address nat) (pair address nat))))) (pair (big_map address (pair nat (map address nat))) (pair address (pair bool nat)))); DUP; CAR; DIP { CDR }; IF_LEFT { IF_LEFT { IF_LEFT { DIP { DUP; CDR; CDR; CAR; IF { UNIT; PUSH string "TokenOperationsArePaused"; PAIR; FAILWITH } {  } }; DUP; DUP; CDR; CAR; DIP { CAR }; COMPARE; EQ; IF { DROP } { DUP; CAR; SENDER; COMPARE; EQ; IF {  } { DUP; DIP { DUP; DIP { DIP { DUP }; CAR; SENDER; PAIR; DUP; DIP { CDR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CAR; GET; IF_NONE { PUSH nat 0 } {  } }; DUP; CAR; DIP { SENDER; DIP { DUP; CDR; CDR; DIP { DIP { DUP }; SWAP }; SWAP; SUB; ISNAT; IF_NONE { DIP { DUP }; SWAP; DIP { DUP }; SWAP; CDR; CDR; PAIR; PUSH string "NotEnoughAllowance"; PAIR; FAILWITH } {  } }; PAIR }; PAIR; DIP { DROP; DROP }; DIP { DUP }; SWAP; DIP { DUP; CAR }; SWAP; DIP { CAR }; GET; IF_NONE { PUSH nat 0; DIP { EMPTY_MAP (address) nat }; PAIR; EMPTY_MAP (address) nat } { DUP; CDR }; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; DUP; INT; EQ; IF { DROP; NONE nat } { SOME }; DIP { DIP { DIP { DUP }; SWAP }; SWAP }; SWAP; CDR; CAR; UPDATE; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; CAR; DIP { SOME }; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CDR; CAR; DIP { CAR }; GET; IF_NONE { DUP; CDR; CDR; INT; EQ; IF { NONE (pair nat (map address nat)) } { DUP; CDR; CDR; DIP { EMPTY_MAP (address) nat }; PAIR; SOME } } { DIP { DUP }; SWAP; CDR; CDR; DIP { DUP; CAR }; ADD; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SOME }; SWAP; DUP; DIP { CDR; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; CDR; INT; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { CDR; CDR; PUSH nat 0; SWAP; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DUP; CAR; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; SWAP; SUB; ISNAT; IF_NONE { CAR; DIP { DUP }; SWAP; CDR; CDR; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP }; SWAP; DIP { DUP; CAR; INT; EQ; IF { DUP; CDR; SIZE; INT; EQ; IF { DROP; NONE (pair nat (map address nat)) } { SOME } } { SOME }; SWAP; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; CDR; NEG; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP }; NIL operation; PAIR } { SENDER; PAIR; DIP { DUP; CDR; CDR; CAR; IF { UNIT; PUSH string "TokenOperationsArePaused"; PAIR; FAILWITH } {  } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; DUP; DIP { CAR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CDR; CAR; GET; IF_NONE { PUSH nat 0 } {  }; DUP; INT; EQ; IF { DROP } { DIP { DUP }; SWAP; CDR; CDR; INT; EQ; IF { DROP } { PUSH string "UnsafeAllowanceChange"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP; CAR }; SWAP; DIP { CAR }; GET; IF_NONE { PUSH nat 0; DIP { EMPTY_MAP (address) nat }; PAIR; EMPTY_MAP (address) nat } { DUP; CDR }; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; DUP; INT; EQ; IF { DROP; NONE nat } { SOME }; DIP { DIP { DIP { DUP }; SWAP }; SWAP }; SWAP; CDR; CAR; UPDATE; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; CAR; DIP { SOME }; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; NIL operation; PAIR } } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; DUP; CAR; DIP { CDR }; DUP; DIP { CAR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CDR; GET; IF_NONE { PUSH nat 0 } {  }; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; DUP; CAR; DIP { CDR }; DIP { CAR }; GET; IF_NONE { PUSH nat 0 } { CAR }; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; CDR; CDR; CDR; CDR; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } } } } { IF_LEFT { IF_LEFT { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; NIL operation; PAIR } { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP; CDR }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; NIL operation; PAIR } } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; CDR; CDR; CAR; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { IF_LEFT { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { DUP; CDR; INT; EQ; IF { NONE (pair nat (map address nat)) } { DUP; CDR; DIP { EMPTY_MAP (address) nat }; PAIR; SOME } } { DIP { DUP }; SWAP; CDR; DIP { DUP; CAR }; ADD; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SOME }; SWAP; DUP; DIP { CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; INT; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP; NIL operation; PAIR } { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { CDR; PUSH nat 0; SWAP; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DUP; CAR; DIP { DIP { DUP }; SWAP }; SWAP; CDR; SWAP; SUB; ISNAT; IF_NONE { CAR; DIP { DUP }; SWAP; CDR; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP }; SWAP; DIP { DUP; CAR; INT; EQ; IF { DUP; CDR; SIZE; INT; EQ; IF { DROP; NONE (pair nat (map address nat)) } { SOME } } { SOME }; SWAP; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; NEG; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP; NIL operation; PAIR } } } } };',n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.getAccountBalance=function(t,r,o,i="$.args[0].int"){return n(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(o,"address"),"hex")),a=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===a)throw new Error(`Map ${r} does not contain a record for ${o}`);const l=s.JSONPath({path:i,json:a});return Number(l[0])}))},t.getAccountAllowance=function(t,r,o,i){return n(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(i,"address"),"hex")),a=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===a)throw new Error(`Map ${r} does not contain a record for ${i}/${o}`);let l=new Map;return s.JSONPath({path:"$.args[1][*].args",json:a}).forEach(e=>l[e[0].string]=Number(e[1].int)),l[o]}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return{mapid:Number(s.JSONPath({path:"$.args[0].int",json:r})[0]),supply:Number(s.JSONPath({path:"$.args[3].int",json:r})[0]),administrator:s.JSONPath({path:"$.args[1].string",json:r})[0],paused:s.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}}))},t.getTokenSupply=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return Number(s.JSONPath({path:"$.args[3].int",json:r})[0])}))},t.getAdministrator=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return s.JSONPath({path:"$.args[1].string",json:r})[0]}))},t.getPaused=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return s.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,o,s,u,c,f,h,d){return n(this,void 0,void 0,(function*(){const n=`(Pair "${u}" (Pair "${c}" ${f}))`,g=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,d,h,"transfer",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.ApproveBalanceOperation=function(e,t,r,n,o,s,a=8e5,u){const c=`(Pair "${t}" ${e})`;return l.TezosNodeWriter.constructContractInvocationOperation(o.publicKeyHash,r,n,0,s,u,a,"approve",c,i.TezosParameterFormat.Michelson)},t.approveBalance=function(e,t,r,o,s,u,c,f,h){return n(this,void 0,void 0,(function*(){const n=`(Pair "${u}" ${c})`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"approve",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.activateLedger=function(e,t,r,o,s,u,c){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,c,u,"","(Right (Left (Left False)))",i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.deactivateLedger=function(e,t,r,o,s,u,c){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,c,u,"","(Right (Left (Left True)))",i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.setAdministrator=function(e,t,r,o,s,u,c,f){return n(this,void 0,void 0,(function*(){const n=`(Right (Left (Right "${s}")))`,h=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,u,f,c,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.mint=function(e,t,r,o,s,u,c,f=15e4,h=5e3){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Left (Pair "${u}" ${c})))))`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.burn=function(e,t,r,o,s,u,c,f,h){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Right (Pair "${u}" ${c})))))`,d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,f,"",n,i.TezosParameterFormat.Michelson,a.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))}}(t.Tzip7ReferenceTokenHelper||(t.Tzip7ReferenceTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(4),u=r(3),c=r(7),l=r(9);!function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return l.TezosContractUtils.verifyDestination(e,t,"cdf4fb6303d606686694d80bd485b6a1")}))},t.verifyScript=function(e){return l.TezosContractUtils.verifyScript(e,"000")},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{administrator:s.JSONPath({path:"$.args[0].args[0].string",json:r})[0],tokens:Number(s.JSONPath({path:"$.args[0].args[1].args[0].int",json:r})[0]),balanceMap:Number(s.JSONPath({path:"$.args[0].args[1].args[1].int",json:r})[0]),operatorMap:Number(s.JSONPath({path:"$.args[1].args[0].args[1].int",json:r})[0]),paused:s.JSONPath({path:"$.args[1].args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),metadataMap:Number(s.JSONPath({path:"$.args[1].args[1].args[1].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r,o=0){return n(this,void 0,void 0,(function*(){const n=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(o,"nat"),"hex")),i=yield u.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===i)throw new Error(`Map ${r} does not contain a record for token ${o}`);return{tokenid:Number(s.JSONPath({path:"$.args[0].int",json:i})[0]),symbol:s.JSONPath({path:"$.args[1].args[0].string",json:i})[0],name:s.JSONPath({path:"$.args[1].args[1].args[0].string",json:i})[0],scale:Number(s.JSONPath({path:"$.args[1].args[1].args[1].args[0].int",json:i})[0])}}))},t.transfer=function(e,t,r,o,s,a,u,p=2e5,f=1e3){return n(this,void 0,void 0,(function*(){const n=`{ Pair "${a}" { ${u.map(e=>`(Pair "${e.address}" (Pair ${e.tokenid}  ${e.balance}))`).join(" ; ")} } }`,h=yield c.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,f,p,"transfer",n,i.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.getAccountBalance=function(t,r,o){return n(this,void 0,void 0,(function*(){const n="0x"+a.TezosMessageUtils.writeAddress(o),c=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(""+n,"",i.TezosParameterFormat.Michelson),"hex")),l=yield u.TezosNodeReader.getValueForBigMapKey(t,r,c);if(void 0===l)throw new Error(`Map ${r} does not contain a record for ${o}`);const p=s.JSONPath({path:"$.int",json:l});return Number(p[0])}))}}(t.ChainlinkTokenHelper||(t.ChainlinkTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=r(8),a=o(r(2)),u=r(4),c=r(3),l=r(7),p=r(9);function f(e){return`Pair "${e.destination}" (Pair ${e.token_id} ${e.amount})`}function h(e){return`{ ${e.map(e=>{const t=e.txs.map(e=>f(e)).join("; ");return`Pair "${e.source}" { ${t} }`}).join("; ")} }`}t.TokenTransactionMichelson=f,t.TransferPairMichelson=h,function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return p.TezosContractUtils.verifyDestination(e,t,"cdf4fb6303d606686694d80bd485b6a1")}))},t.verifyScript=function(e){return p.TezosContractUtils.verifyScript(e,"000")},t.deployContract=function(t,r,o,s,i,u,c=!0,f=8e5,h=2e4){return n(this,void 0,void 0,(function*(){const n=c?"True":"False",d=`(Pair (Pair (Pair "${i}" 0) (Pair {} {Elt "" 0x${e.from(u,"utf-8").toString("hex")}})) (Pair (Pair {} ${n}) (Pair {} {})))`,g=yield l.TezosNodeWriter.sendContractOriginationOperation(t,r,o,0,void 0,s,h,f,'parameter (or (or (pair %balance_of (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))))) (or (pair %mint (pair (address %address) (nat %amount)) (pair (map %metadata string bytes) (nat %token_id))) (address %set_administrator))) (or (or (pair %set_metadata (string %k) (bytes %v)) (bool %set_pause)) (or (list %transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) (list %update_operators (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))))))); \n        storage (pair (pair (pair (address %administrator) (nat %all_tokens)) (pair (big_map %ledger (pair address nat) nat) (big_map %metadata string bytes))) (pair (pair (big_map %operators (pair (address %owner) (pair (address %operator) (nat %token_id))) unit) (bool %paused)) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes))) (big_map %total_supply nat nat)))); \n        code { CAST (pair (or (or (pair (list (pair address nat)) (contract (list (pair (pair address nat) nat)))) (or (pair (pair address nat) (pair (map string bytes) nat)) address)) (or (or (pair string bytes) bool) (or (list (pair address (list (pair address (pair nat nat))))) (list (or (pair address (pair address nat)) (pair address (pair address nat))))))) (pair (pair (pair address nat) (pair (big_map (pair address nat) nat) (big_map string bytes))) (pair (pair (big_map (pair address (pair address nat)) unit) bool) (pair (big_map nat (pair nat (map string bytes))) (big_map nat nat))))); UNPAIR; IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; CAR; MAP { DUP 3; GET 5; SWAP; DUP; DUG 2; CDR; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP 3; CAR; GET 3; SWAP; DUP; CDR; SWAP; DUP; DUG 3; CAR; PAIR; MEM; IF { DUP 3; CAR; GET 3; SWAP; DUP; CDR; SWAP; DUP; DUG 3; CAR; PAIR; GET; IF_SOME { } { PUSH int 430; FAILWITH; }; SWAP; PAIR; } { PUSH nat 0; SWAP; PAIR; }; }; NIL operation; DIG 2; CDR; PUSH mutez 0; DIG 3; TRANSFER_TOKENS; CONS; } { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; DUP; GET 4; DUP 3; CAR; CAR; CDR; COMPARE; EQ; IF {} { PUSH string "Token-IDs should be consecutive"; FAILWITH; }; SWAP; DUP; DUG 2; UNPAIR; UNPAIR; CAR; DIG 4; CAR; CAR; CDR; DUP; PUSH nat 1; DUP 7; GET 4; ADD; DUP; DUG 2; COMPARE; LE; IF { DROP; } { SWAP; DROP; }; SWAP; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 3; SWAP; DUP; GET 4; SWAP; DUP; DUG 3; CAR; CAR; PAIR; MEM; IF { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DIG 5; DUP; GET 4; SWAP; DUP; DUG 7; CAR; CAR; PAIR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 541; FAILWITH; }; DUP 7; CAR; CDR; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; } { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; CAR; CDR; SOME; DIG 5; DUP; GET 4; SWAP; DUP; DUG 7; CAR; CAR; PAIR; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; }; SWAP; DUP; DUG 2; GET 5; SWAP; DUP; DUG 2; GET 4; MEM; IF { DROP; } { SWAP; DUP; GET 5; DIG 2; DUP; GET 3; SWAP; DUP; DUG 4; GET 4; PAIR; SOME; DUP 4; GET 4; UPDATE; UPDATE 5; DUP; GET 6; DUP 3; CAR; CDR; SOME; DIG 3; GET 4; UPDATE; UPDATE 6; }; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; CDR; DIG 3; PAIR; PAIR; PAIR; }; NIL operation; }; } { IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; DUP 5; CDR; SOME; DIG 5; CAR; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; SWAP; UNPAIR; CAR; DIG 3; SWAP; PAIR; PAIR; SWAP; PAIR; }; } { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; ITER { DUP; CDR; ITER { DUP 4; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { SENDER; DUP 3; CAR; COMPARE; EQ; }; IF { PUSH bool True; } { DUP 4; GET 3; CAR; SWAP; DUP; DUG 2; GET 3; SENDER; DUP 5; CAR; PAIR 3; MEM; }; IF {} { PUSH string "FA2_NOT_OPERATOR"; FAILWITH; }; DUP 4; GET 5; SWAP; DUP; DUG 2; GET 3; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; LT; IF { DUP; GET 4; DUP 5; CAR; GET 3; DUP 3; GET 3; DUP 5; CAR; PAIR; GET; IF_SOME { } { PUSH int 408; FAILWITH; }; COMPARE; GE; IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH; }; DUP 4; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; GET 3; DUP 8; CAR; PAIR; DUP; DUG 2; GET; IF_SOME { DROP; } { PUSH int 412; FAILWITH; }; DUP 6; GET 4; DIG 9; CAR; GET 3; DUP 8; GET 3; DUP 10; CAR; PAIR; GET; IF_SOME { } { PUSH int 412; FAILWITH; }; SUB; ISNAT; IF_SOME {} { PUSH int 412; FAILWITH; }; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUP; DUG 4; CAR; GET 3; SWAP; DUP; GET 3; SWAP; DUP; DUG 3; CAR; PAIR; MEM; IF { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DIG 5; DUP; GET 3; SWAP; DUP; DUG 7; CAR; PAIR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 415; FAILWITH; }; DIG 6; GET 4; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; } { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; GET 4; SOME; DIG 5; DUP; GET 3; SWAP; CAR; PAIR; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; }; } { DROP; }; }; DROP; }; DROP; } { DUP; ITER { IF_LEFT { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; PUSH (option unit) (Some Unit); DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; } { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; NONE unit; DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; }; }; DROP; }; }; NIL operation; }; PAIR; };',d,a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return{administrator:s.JSONPath({path:"$.args[0].args[0].string",json:r})[0],tokens:Number(s.JSONPath({path:"$.args[0].args[1].int",json:r})[0]),ledger:Number(s.JSONPath({path:"$.args[0].args[2].int",json:r})[0]),metadata:Number(s.JSONPath({path:"$.args[0].args[2].int",json:r})[0]),paused:s.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),operators:Number(s.JSONPath({path:"$.args[1].args[0].int",json:r})[0]),tokenMetadata:Number(s.JSONPath({path:"$.args[2].int",json:r})[0]),totalSupply:Number(s.JSONPath({path:"$.args[3].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r,o=0){return n(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(o,"nat"),"hex")),i=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===i)throw new Error(`Map ${r} does not contain a record for token ${o}`);const a={tokenid:Number(s.JSONPath({path:"$.args[0].int",json:i})[0]),metadata:{}};return i.args[1].forEach(t=>{a.metadata[t.args[0].string]=e.from(t.args[1].bytes,"hex").toString()}),a}))},t.activate=function(e,t,r,o,s,i=8e5,u=2e4){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,u,i,"set_pause","False",a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.deactivate=function(e,t,r,o,s,i=8e5,u=2e4){return n(this,void 0,void 0,(function*(){const n=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,u,i,"set_pause","True",a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.changeAdministrator=function(e,t,r,o,s,i,u=8e5,c=2e4){return n(this,void 0,void 0,(function*(){const n=`"${i}"`,f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,c,u,"set_administrator",n,a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.mint=function(t,r,o,s,i,u,c,f,h,d=8e5,g=2e4){return n(this,void 0,void 0,(function*(){const n=Object.keys(f).sort();let m="";for(let t of n)""!==m&&(m+="; "),m+=`Elt "${t}" 0x${e.from(f[t],"utf-8").toString("hex")}`;const y=`(Pair (Pair "${u}" ${c}) (Pair {${m}} ${h}))`,b=yield l.TezosNodeWriter.sendContractInvocationOperation(t,o,s,r,0,i,g,d,"mint",y,a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(b.operationGroupID)}))},t.transfer=function(e,t,r,o,s,u,c=8e5,f=2e4){return n(this,void 0,void 0,(function*(){const n=h(u),d=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,f,c,"transfer",n,a.TezosParameterFormat.Michelson,i.TezosConstants.HeadBranchOffset,!0);return p.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.AddOperatorsOperation=function(e,t,r,n,o,s=8e5,i=2e4){let u="{";return o.forEach(e=>{"{"!==u&&(u+="; "),u+=`Left (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),u+="}",l.TezosNodeWriter.constructContractInvocationOperation(r.publicKeyHash,t,e,0,n,i,s,"update_operators",u,a.TezosParameterFormat.Michelson)},t.addOperators=function(e,t,r,o,s,i,u=8e5,c=2e4){return n(this,void 0,void 0,(function*(){let n="{";i.forEach(e=>{"{"!==n&&(n+="; "),n+=`Left (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),n+="}";const f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,c,u,"update_operators",n,a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.RemoveOperatorsOperation=function(e,t,r,n,o,s=8e5,i=2e4){let u="{";return o.forEach(e=>{"{"!==u&&(u+="; "),u+=`Right (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),u+="}",l.TezosNodeWriter.constructContractInvocationOperation(r.publicKeyHash,t,e,0,n,i,s,"update_operators",u,a.TezosParameterFormat.Michelson)},t.removeOperators=function(e,t,r,o,s,i,u=8e5,c=2e4){return n(this,void 0,void 0,(function*(){let n="{";i.forEach(e=>{"{"!==n&&(n+="; "),n+=`Right (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),n+="}";const f=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,c,u,"update_operators",n,a.TezosParameterFormat.Michelson);return p.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.getAccountBalance=function(t,r,o,i){return n(this,void 0,void 0,(function*(){const n="0x"+u.TezosMessageUtils.writeAddress(o),l=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(`(Pair ${n} ${i})`,"",a.TezosParameterFormat.Michelson),"hex")),p=yield c.TezosNodeReader.getValueForBigMapKey(t,r,l);if(void 0===p)throw new Error(`Map ${r} does not contain a record for ${o}/${i}`);const f=s.JSONPath({path:"$.int",json:p});return Number(f[0])}))}}(t.MultiAssetTokenHelper||(t.MultiAssetTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=r(4),a=r(3),u=r(7),c=o(r(2)),l=r(9),p=r(8);!function(t){t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return l.TezosContractUtils.verifyDestination(e,t,"17aab0975df6139f4ff29be76a67f348")}))},t.verifyScript=function(e){return l.TezosContractUtils.verifyScript(e,"000")},t.deployContract=function(t,r,o,s,i,a,p=!0,f=8e5,h=2e4){return n(this,void 0,void 0,(function*(){const n=p?"True":"False",d=`(Pair (Pair (Pair "${i}" 0) (Pair {} {Elt ""  0x${e.from(a,"utf-8").toString("hex")}})) (Pair (Pair {} ${n}) (Pair {} {})))`,g=yield u.TezosNodeWriter.sendContractOriginationOperation(t,r,o,0,void 0,s,h,f,'parameter (or (or (pair %balance_of (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))))) (or (pair %mint (pair (address %address) (nat %amount)) (pair (map %metadata string bytes) (nat %token_id))) (address %set_administrator))) (or (or (pair %set_metadata (string %k) (bytes %v)) (bool %set_pause)) (or (list %transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) (list %update_operators (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))))))); \n        storage (pair (pair (pair (address %administrator) (nat %all_tokens)) (pair (big_map %ledger address nat) (big_map %metadata string bytes))) (pair (pair (big_map %operators (pair (address %owner) (pair (address %operator) (nat %token_id))) unit) (bool %paused)) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes))) (big_map %total_supply nat nat)))); \n        code { CAST (pair (or (or (pair (list (pair address nat)) (contract (list (pair (pair address nat) nat)))) (or (pair (pair address nat) (pair (map string bytes) nat)) address)) (or (or (pair string bytes) bool) (or (list (pair address (list (pair address (pair nat nat))))) (list (or (pair address (pair address nat)) (pair address (pair address nat))))))) (pair (pair (pair address nat) (pair (big_map address nat) (big_map string bytes))) (pair (pair (big_map (pair address (pair address nat)) unit) bool) (pair (big_map nat (pair nat (map string bytes))) (big_map nat nat))))); UNPAIR; IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; CAR; MAP { DUP 3; GET 5; SWAP; DUP; DUG 2; CDR; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP 3; CAR; GET 3; SWAP; DUP; DUG 2; CAR; MEM; IF { DUP 3; CAR; GET 3; SWAP; DUP; DUG 2; CAR; GET; IF_SOME { } { PUSH int 430; FAILWITH; }; SWAP; PAIR; } { PUSH nat 0; SWAP; PAIR; }; }; NIL operation; DIG 2; CDR; PUSH mutez 0; DIG 3; TRANSFER_TOKENS; CONS; } { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; EQ; IF {} { PUSH string "single-asset: token-id <> 0"; FAILWITH; }; DUP; GET 4; DUP 3; CAR; CAR; CDR; COMPARE; EQ; IF {} { PUSH string "Token-IDs should be consecutive"; FAILWITH; }; SWAP; DUP; DUG 2; UNPAIR; UNPAIR; CAR; DIG 4; CAR; CAR; CDR; DUP; PUSH nat 1; DUP 7; GET 4; ADD; DUP; DUG 2; COMPARE; LE; IF { DROP; } { SWAP; DROP; }; SWAP; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 3; SWAP; DUP; DUG 2; CAR; CAR; MEM; IF { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; CAR; CAR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 541; FAILWITH; }; DUP 7; CAR; CDR; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; } { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; CAR; CDR; SOME; DUP 6; CAR; CAR; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; }; SWAP; DUP; DUG 2; GET 5; SWAP; DUP; DUG 2; GET 4; MEM; IF { DROP; } { SWAP; DUP; GET 5; DIG 2; DUP; GET 3; SWAP; DUP; DUG 4; GET 4; PAIR; SOME; DUP 4; GET 4; UPDATE; UPDATE 5; DUP; GET 6; DUP 3; CAR; CDR; SOME; DIG 3; GET 4; UPDATE; UPDATE 6; }; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; CDR; DIG 3; PAIR; PAIR; PAIR; }; NIL operation; }; } { IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; DUP 5; CDR; SOME; DIG 5; CAR; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; SWAP; UNPAIR; CAR; DIG 3; SWAP; PAIR; PAIR; SWAP; PAIR; }; } { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; ITER { DUP; CDR; ITER { DUP; GET 3; PUSH nat 0; COMPARE; EQ; IF {} { PUSH string "single-asset: token-id <> 0"; FAILWITH; }; DUP 4; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { SENDER; DUP 3; CAR; COMPARE; EQ; }; IF { PUSH bool True; } { DUP 4; GET 3; CAR; SWAP; DUP; DUG 2; GET 3; SENDER; DUP 5; CAR; PAIR 3; MEM; }; IF {} { PUSH string "FA2_NOT_OPERATOR"; FAILWITH; }; DUP 4; GET 5; SWAP; DUP; DUG 2; GET 3; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; LT; IF { DUP; GET 4; DUP 5; CAR; GET 3; DUP 4; CAR; GET; IF_SOME { } { PUSH int 408; FAILWITH; }; COMPARE; GE; IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH; }; DUP 4; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 7; CAR; DUP; DUG 2; GET; IF_SOME { DROP; } { PUSH int 412; FAILWITH; }; DUP 6; GET 4; DIG 9; CAR; GET 3; DUP 9; CAR; GET; IF_SOME { } { PUSH int 412; FAILWITH; }; SUB; ISNAT; IF_SOME {} { PUSH int 412; FAILWITH; }; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUP; DUG 4; CAR; GET 3; SWAP; DUP; DUG 2; CAR; MEM; IF { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; CAR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 415; FAILWITH; }; DIG 6; GET 4; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; } { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; GET 4; SOME; DIG 5; CAR; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; }; } { DROP; }; }; DROP; }; DROP; } { DUP; ITER { IF_LEFT { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; PUSH (option unit) (Some Unit); DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; } { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; NONE unit; DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; }; }; DROP; }; }; NIL operation; }; PAIR; };',d,c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield a.TezosNodeReader.getContractStorage(e,t);return{administrator:s.JSONPath({path:"$.args[0].args[0].args[0].string",json:r})[0],tokens:Number(s.JSONPath({path:"$.args[0].args[0].args[1].int",json:r})[0]),ledger:Number(s.JSONPath({path:"$.args[0].args[1].int",json:r})[0]),metadata:Number(s.JSONPath({path:"$.args[0].args[2].int",json:r})[0]),paused:s.JSONPath({path:"$.args[1].args[1].prim",json:r})[0].toString().toLowerCase().startsWith("t"),operators:Number(s.JSONPath({path:"$.args[1].args[0].int",json:r})[0]),tokenMetadata:Number(s.JSONPath({path:"$.args[2].int",json:r})[0]),totalSupply:Number(s.JSONPath({path:"$.args[3].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r){return n(this,void 0,void 0,(function*(){const n=i.TezosMessageUtils.encodeBigMapKey(e.from(i.TezosMessageUtils.writePackedData(0,"nat"),"hex")),o=yield a.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===o)throw new Error(`Map ${r} does not contain a record for token 0`);const u={tokenid:Number(s.JSONPath({path:"$.args[0].int",json:o})[0]),metadata:{}};return o.args[1].forEach(t=>{u.metadata[t.args[0].string]=e.from(t.args[1].bytes,"hex").toString()}),u}))},t.activate=function(e,t,r,o,s,i=8e5,a=2e4){return n(this,void 0,void 0,(function*(){const n=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,a,i,"set_pause","False",c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.deactivate=function(e,t,r,o,s,i=8e5,a=2e4){return n(this,void 0,void 0,(function*(){const n=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,a,i,"set_pause","True",c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.changeAdministrator=function(e,t,r,o,s,i,a=8e5,p=2e4){return n(this,void 0,void 0,(function*(){const n=`"${i}"`,f=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,p,a,"set_administrator",n,c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.mint=function(t,r,o,s,i,a,p,f,h=8e5,d=2e4){return n(this,void 0,void 0,(function*(){const n=Object.keys(f).sort();let g="";for(let t of n)""!==g&&(g+="; "),g+=`Elt "${t}" 0x${e.from(f[t],"utf-8").toString("hex")}`;const m=`(Pair (Pair "${a}" ${p}) (Pair {${g}} 1))`,y=yield u.TezosNodeWriter.sendContractInvocationOperation(t,o,s,r,0,i,d,h,"mint",m,c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(y.operationGroupID)}))},t.transfer=function(e,t,r,o,s,a,f,h=8e5,d=2e4){return n(this,void 0,void 0,(function*(){const n=`{ Pair 0x${i.TezosMessageUtils.writeAddress(a)} { ${f.map(e=>"( Pair 0x"+i.TezosMessageUtils.writeAddress(e.address)+" ( Pair 0 "+e.amount+" ) )").join(" ; ")} } }`,g=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,d,h,"transfer",n,c.TezosParameterFormat.Michelson,p.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.addOperators=function(e,t,r,o,s,i,a=8e5,p=2e4){return n(this,void 0,void 0,(function*(){let n="{";i.forEach(e=>{"{"!==n&&(n+="; "),n+=`Left (Pair "${e.owner}" (Pair "${e.operator}" 0))`}),n+="}";const f=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,p,a,"update_operators",n,c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.removeOperators=function(e,t,r,o,s,i,a=8e5,p=2e4){return n(this,void 0,void 0,(function*(){let n="{";i.forEach(e=>{"{"!==n&&(n+="; "),n+=`Right (Pair "${e.owner}" (Pair "${e.operator}" 0))`}),n+="}";const f=yield u.TezosNodeWriter.sendContractInvocationOperation(e,r,o,t,0,s,p,a,"update_operators",n,c.TezosParameterFormat.Michelson);return l.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.getAccountBalance=function(t,r,o,u="$.int"){return n(this,void 0,void 0,(function*(){const n=i.TezosMessageUtils.encodeBigMapKey(e.from(i.TezosMessageUtils.writePackedData(o,"address"),"hex")),c=yield a.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===c)throw new Error(`Map ${r} does not contain a record for ${o}`);return Number(s.JSONPath({path:u,json:c})[0])}))}}(t.SingleAssetTokenHelper||(t.SingleAssetTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=r(8),a=o(r(2)),u=r(10),c=r(4),l=r(3),p=r(7),f=r(9);!function(t){function r(t,r,o){return n(this,void 0,void 0,(function*(){const n=e.from(c.TezosMessageUtils.writePackedData(o,"",a.TezosParameterFormat.Michelson),"hex"),i=c.TezosMessageUtils.writePackedData(n,"bytes"),p=c.TezosMessageUtils.encodeBigMapKey(e.from(i,"hex")),f=yield l.TezosNodeReader.getValueForBigMapKey(t,r,p);if(void 0===f)throw new Error(`Could not get data from map ${r} for '${o}'`);const h=s.JSONPath({path:"$.bytes",json:f})[0];return JSON.parse(u.TezosLanguageUtil.hexToMicheline(h.slice(2)).code)}))}t.verifyDestination=function(e,t){return n(this,void 0,void 0,(function*(){return f.TezosContractUtils.verifyDestination(e,t,"187c967006ca95a648c770fdd76947ef")}))},t.verifyScript=function(e){return f.TezosContractUtils.verifyScript(e,"ffcad1e376a6c8915780fe6676aceec6")},t.getAccountBalance=function(e,t,o){return n(this,void 0,void 0,(function*(){const n=yield r(e,t,`(Pair "ledger" 0x${c.TezosMessageUtils.writeAddress(o)})`);return Number(s.JSONPath({path:"$.args[0].int",json:n})[0])}))},t.getOperatorList=function(e,t){return n(this,void 0,void 0,(function*(){const n=yield r(e,t,'"operators"');let o=[];for(const e of n)o.push(c.TezosMessageUtils.readAddress(e.bytes));return o}))},t.getTokenMetadata=function(e,t=31){return n(this,void 0,void 0,(function*(){return yield r(e,t,'"tokenMetadata"')}))},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{mapid:Number(s.JSONPath({path:"$.args[0].int",json:r})[0]),scale:8}}))},t.getTokenSupply=function(e,t=31){return n(this,void 0,void 0,(function*(){const n=yield r(e,t,'"totalSupply"');return Number(s.JSONPath({path:"$.int",json:n})[0])}))},t.getPaused=function(e,t=31){return n(this,void 0,void 0,(function*(){const n=yield r(e,t,'"paused"');return s.JSONPath({path:"$.prim",json:n})[0].toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,o,s,u,c,l,h=25e4,d=1e3){return n(this,void 0,void 0,(function*(){const n=`(Pair "${u}" (Pair "${c}" ${l}))`,g=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,d,h,"transfer",n,a.TezosParameterFormat.Michelson,i.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.approveBalance=function(e,t,r,o,s,u,c,l=25e4,h=1e3){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Right (Left (Right (Right (Right (Pair "${u}" ${c})))))))))`,d=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,h,l,"",n,a.TezosParameterFormat.Michelson,i.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.mintBalance=function(e,t,r,o,s,i,u,c=25e4,l=1e3){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Right (Right (Left (Left (Left (Pair "${i}" ${u})))))))))`,h=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,l,c,"",n,a.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.addOperator=function(e,t,r,o,s,i,u=25e4,c=1e3){return n(this,void 0,void 0,(function*(){const n=`(Right (Right (Right (Right (Right (Left (Right (Left "${i}" ))))))))`,l=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,c,u,"",n,a.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))}}(t.TzbtcTokenHelper||(t.TzbtcTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6),i=o(r(2)),a=r(4),u=r(3),c=r(7),l=r(9),p=r(18),f=r(8),h=r(2),d="d48b45bd77d2300026fe617c5ba7670e",g="5e3c30607da21a0fc30f7be61afb15c7",m="7b9b5b7e7f0283ff6388eb783e23c452",y="",b="",P="";!function(t){t.verifyDestination=function(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield l.TezosContractUtils.verifyDestination(e,t,d),s=yield l.TezosContractUtils.verifyDestination(e,r,g),i=yield l.TezosContractUtils.verifyDestination(e,o,m);return n&&s&&i}))},t.verifyScript=function(e,t,r){const n=l.TezosContractUtils.verifyScript(e,y),o=l.TezosContractUtils.verifyScript(t,b),s=l.TezosContractUtils.verifyScript(r,P);return n&&o&&s},t.getSimpleStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield u.TezosNodeReader.getContractStorage(e,t);return{balanceMap:Number(s.JSONPath({path:"$.args[1].args[1].int",json:r})[0]),approvalsMap:Number(s.JSONPath({path:"$.args[1].args[0].args[1].int",json:r})[0]),supply:Number(s.JSONPath({path:"$.args[3].int",json:r})[0]),administrator:s.JSONPath({path:"$.args[1].args[0].args[0].string",json:r})[0],paused:s.JSONPath({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),pauseGuardian:s.JSONPath({path:"$.args[1].args[2].string",json:r})[0],outcomeMap:Number(s.JSONPath({path:"$.args[0].args[0].args[1].int",json:r})[0]),swapMap:Number(s.JSONPath({path:"$.args[0].args[1].int",json:r})[0])}}))},t.getAccountBalance=function(t,r,o){return n(this,void 0,void 0,(function*(){const n=a.TezosMessageUtils.encodeBigMapKey(e.from(a.TezosMessageUtils.writePackedData(o,"address"),"hex")),i=yield u.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===i)return 0;const c=s.JSONPath({path:"$.int",json:i});return Number(c)}))},t.transferBalance=function(e,t,r,o,s,a,u,p,h=51300,d=70){return n(this,void 0,void 0,(function*(){const n=`Pair "${a}" (Pair "${u}" ${p})`,g=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,d,h,"transfer",n,i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.depositToOven=function(e,t,r,o,s,a,u=15e4,p=10){return n(this,void 0,void 0,(function*(){const n=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,a,s,p,u,"","Unit",i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))},t.withdrawFromOven=function(e,t,r,o,s,a,u=121e3,p=0){return n(this,void 0,void 0,(function*(){const n=""+a,h=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,s,p,u,"withdraw",n,i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.listOvens=function(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield p.TezosConseilClient.getBigMapData(e,t);if(void 0===n)throw new Error("Could not fetch map data!");const{maps:s}=n;let i=void 0;for(let e=0;e<s.length;e++)if(s[e].definition.index===o){i=s[e];break}if(void 0===i)throw new Error("Could not find specified map ID!");const{content:u}=i;return u.map(e=>({key:a.TezosMessageUtils.readAddress(e.key.replace(/\"/g,"").replace(/\n/,"").replace("0x","")),value:a.TezosMessageUtils.readAddress(e.value.replace(/\"/g,"").replace(/\n/,"").replace("0x",""))})).filter(e=>r===e.value).map(e=>e.key)}))},t.deployOven=function(e,t,r,o,s,u,p=115e3,d=1100){return n(this,void 0,void 0,(function*(){const n=void 0!==u?`Some "${u}"`:"None",g='Pair "createOven" 0x'+a.TezosMessageUtils.writePackedData(`Pair ${n} "${r.publicKeyHash}"`,"pair (option key_hash) address",h.TezosParameterFormat.Michelson),m=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,s,0,o,d,p,"runEntrypointLambda",g,i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0),y=l.TezosContractUtils.clearRPCOperationGroupHash(m.operationGroupID);return{operationHash:y,ovenAddress:a.TezosMessageUtils.calculateContractAddress(y,0)}}))},t.setOvenBaker=function(e,t,r,o,s,a,u=23500,p=0){return n(this,void 0,void 0,(function*(){const n=`Some "${a}"`,h=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,s,0,o,p,u,"setDelegate",n,i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.clearOvenBaker=function(e,t,r,o,s,a=23500,u=0){return n(this,void 0,void 0,(function*(){const n=yield c.TezosNodeWriter.sendContractInvocationOperation(e,t,r,s,0,o,u,a,"setDelegate","None",i.TezosParameterFormat.Michelson,f.TezosConstants.HeadBranchOffset,!0);return l.TezosContractUtils.clearRPCOperationGroupHash(n.operationGroupID)}))}}(t.WrappedTezosHelper||(t.WrappedTezosHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(30),i=o(r(15)),a=o(r(11)).default.log,u=i.default.fetch;!function(e){function t(e,t){return n(this,void 0,void 0,(function*(){return u(`${e.url}/v2/metadata/${t}`,{method:"GET",headers:{apiKey:e.apiKey,Referrer:i.default.Referrer}}).then(r=>{if(!r.ok)throw new s.ConseilRequestError(r.status,r.statusText,`${e.url}/v2/metadata/${t}`,null);return r}).then(r=>r.json().catch(r=>{a.error(`ConseilMetadataClient.executeMetadataQuery parsing failed for ${e.url}/v2/metadata/${t} with ${r}`)}))}))}e.executeMetadataQuery=t,e.getPlatforms=function(e){return n(this,void 0,void 0,(function*(){return t(e,"platforms")}))},e.getNetworks=function(e,r){return n(this,void 0,void 0,(function*(){return t(e,r+"/networks")}))},e.getEntities=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/entities`)}))},e.getAttributes=function(e,r,o,s){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${s}/attributes`)}))},e.getAttributeValues=function(e,r,o,s,i){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${s}/${i}`)}))},e.getAttributeValuesForPrefix=function(e,r,o,s,i,a){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${s}/${i}/${encodeURIComponent(a)}`)}))}}(t.ConseilMetadataClient||(t.ConseilMetadataClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.STRING="String",e.INT="Int",e.DECIMAL="Decimal",e.BOOLEAN="Boolean",e.ACCOUNT_ADDRESS="AccountAddress",e.HASH="Hash",e.DATETIME="DateTime",e.CURRENCY="Currency"}(t.AttrbuteDataType||(t.AttrbuteDataType={})),function(e){e.PRIMARYKEY="PrimaryKey",e.UNIQUEKEY="UniqueKey",e.NONKEY="NonKey"}(t.AttrbuteKeyType||(t.AttrbuteKeyType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Yay=0]="Yay",e[e.Nay=1]="Nay",e[e.Pass=2]="Pass"}(t.BallotVote||(t.BallotVote={}))}])}));