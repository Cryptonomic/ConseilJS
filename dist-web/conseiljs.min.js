/*! For license information please see conseiljs.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.conseiljs=t():e.conseiljs=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=55)}([function(e,t,r){"use strict";(function(e){var n=r(57),o=r(58),i=r(35);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return E(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=r;i<a;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var p=!0,f=0;f<u;f++)if(c(e,i+f)!==c(t,f)){p=!1;break}if(p)return i}return-1}function v(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function _(e,t,r,n){return j(B(t,e.length-r),e,r,n)}function P(e,t,r,n){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function $(e,t,r,n){return P(e,t,r,n)}function A(e,t,r,n){return j(L(t),e,r,n)}function S(e,t,r,n){return j(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return p(null,e)},u.allocUnsafeSlow=function(e){return p(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(n,o),l=e.slice(t,r),p=0;p<a;++p)if(c[p]!==l[p]){i=c[p],s=l[p];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return P(this,e,t,r);case"latin1":case"binary":return $(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function D(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=z(e[i]);return o}function R(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function M(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,i){return i||M(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return i||M(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=u.isBuffer(e)?e:B(new u(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function L(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(12))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TezosParameterFormat=t.OperationKindType=void 0,function(e){e.SeedNonceRevelation="seed_nonce_revelation",e.Delegation="delegation",e.Transaction="transaction",e.AccountActivation="activate_account",e.Origination="origination",e.Reveal="reveal",e.Endorsement="endorsement",e.Ballot="ballot",e.DoubleEndorsementEvidence="double_endorsement_evidence",e.DoubleBakingEvidence="double_baking_evidence",e.Proposal="proposals"}(t.OperationKindType||(t.OperationKindType={})),function(e){e.Michelson="michelson",e.Micheline="micheline",e.MichelsonLambda="michelsonlambda"}(t.TezosParameterFormat||(t.TezosParameterFormat={}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosNodeReader=void 0;const i=r(5),s=r(98),a=r(7),u=o(r(18)),c=o(r(13)).default.log,l=u.default.fetch;!function(e){function t(e,t){const r=`${e}/${t}`;return l(r,{method:"get"}).then(n=>{if(!n.ok)throw c.error(`TezosNodeReader.performGetRequest error: ${n.status} for ${t} on ${e}`),new s.TezosRequestError(n.status,n.statusText,r,null);return n}).then(r=>{const n=r.json();return c.debug(`TezosNodeReader.performGetRequest response: ${n} for ${t} on ${e}`),n})}function r(e,r="head",n="main"){return t(e,`chains/${n}/blocks/${r}`).then(e=>e)}function o(e,r,n,o="main"){return t(e,`chains/${o}/blocks/${r}/context/contracts/${n}`).then(e=>e)}function u(e,r,o,i="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${i}/blocks/${r}/context/contracts/${o}/manager_key`);return n?n.toString():""}))}e.getDelegate=function(e,t){return n(this,void 0,void 0,(function*(){return(yield o(e,"head",t)).delegate}))},e.getBlock=r,e.getBlockHead=function(e){return r(e)},e.getBlockAtOffset=function(e,o,i="main"){return n(this,void 0,void 0,(function*(){if(o<=0)return r(e);const n=yield r(e);return t(e,`chains/${i}/blocks/${Number(n.header.level)-o}`).then(e=>e)}))},e.getBlockAtLevel=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){return t(e,`chains/${o}/blocks/${r}`).then(e=>e)}))},e.getAccountForBlock=o,e.getCounterForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/blocks/head/context/contracts/${r}/counter`).then(e=>e.toString());return parseInt(n.toString(),10)}))},e.getSpendableBalanceForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/blocks/head/context/contracts/${r}`).then(e=>e);return parseInt(n.balance.toString(),10)}))},e.getAccountManagerForBlock=u,e.isImplicitAndEmpty=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield o(e,"head",t),n=t.toLowerCase().startsWith("tz"),i=0===Number(r.balance);return n&&i}))},e.isManagerKeyRevealedForAccount=function(e,t){return n(this,void 0,void 0,(function*(){return(yield u(e,"head",t)).length>0}))},e.getContractStorage=function(e,r,n="head",o="main"){return t(e,`chains/${o}/blocks/${n}/context/contracts/${r}/storage`)},e.getValueForBigMapKey=function(e,r,n,o="head",i="main"){return t(e,`chains/${i}/blocks/${o}/context/big_maps/${r}/${n}`)},e.getMempoolOperation=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){const n=yield t(e,`chains/${o}/mempool/pending_operations`).catch(()=>{});return(0,i.JSONPath)({path:`$.applied[?(@.hash=='${r}')]`,json:n})[0]}))},e.estimateBranchTimeout=function(e,t,o="main"){return n(this,void 0,void 0,(function*(){const n=r(e,t,o),i=r(e,"head",o);var s=yield Promise.all([n,i]).then(e=>Number(e[1].header.level)-Number(e[0].header.level));return a.TezosConstants.MaxBranchOffset-s}))},e.getMempoolOperationsForAccount=function(e,r,o="main"){return n(this,void 0,void 0,(function*(){return(yield t(e,`chains/${o}/mempool/pending_operations`).catch(()=>{})).applied.filter(e=>e.contents.some(e=>e.source===r||e.destination===r)).map(e=>(e.contents=e.contents.filter(e=>e.source===r||e.destination===r),e))}))},e.getChainId=function(e,r="main"){return n(this,void 0,void 0,(function*(){return t(e,`chains/${r}/chain_id`).then(e=>e.toString())}))},e.awaitOperationConfirmation=function(t,r,o,i=10){return n(this,void 0,void 0,(function*(){let n=r;if(n<0){n=(yield e.getBlockHead(t)).header.level}for(;n<r+i;)try{const r=yield e.getBlock(t,""+(n+1));n=r.header.level;const i=r.operations[3].concat(r.operations[2]).filter(e=>e.hash===o);if(1===i.length)return i[0];yield new Promise(e=>setTimeout(e,a.TezosConstants.DefaultBlockTime))}catch(e){yield new Promise(e=>setTimeout(e,1e4))}throw new Error(`Did not observe operation ${o} between ${r} and ${n}`)}))}}(t.TezosNodeReader||(t.TezosNodeReader={}))},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosMessageUtils=void 0;const a=s(r(60)),u=s(r(50)),c=i(r(22)),l=r(11),p=r(2),f=r(52);!function(t){function r(t){if(t<0)throw new Error("Use writeSignedInt to encode negative numbers");return e.from(e.from(function(e){if(e<128)return("0"+e.toString(16)).slice(-2);let t="";if(e>2147483648){let r=(0,u.default)(e);for(;r.greater(0);)t=("0"+r.and(127).toString(16)).slice(-2)+t,r=r.shiftRight(7)}else{let r=e;for(;r>0;)t=("0"+(127&r).toString(16)).slice(-2)+t,r>>=7}return t}(t),"hex").map((e,t)=>0===t?e:128^e).reverse()).toString("hex")}function n(e){if(0===e||"0"===e)return"00";let t=(0,u.default)(e).abs();const r=t.bitLength().toJSNumber();let n=[];for(let o=0;o<r;o+=7){let i=u.default.zero;0===o?(i=t.and(63),t=t.shiftRight(6)):(i=t.and(127),t=t.shiftRight(7)),e<0&&0===o&&(i=i.or(64)),o+7<r&&(i=i.or(128)),n.push(i.toJSNumber())}return r%7==0&&(n[n.length-1]=128|n[n.length-1],n.push(1)),n.map(e=>("0"+e.toString(16)).slice(-2)).join("")}function o(t){return function(e){if(2===e.length)return parseInt(e,16);if(e.length<=8){let t=parseInt(e.slice(-2),16);for(let r=1;r<e.length/2;r++)t+=parseInt(e.slice(-2*r-2,-2*r),16)<<7*r;return t}let t=(0,u.default)(parseInt(e.slice(-2),16));for(let r=1;r<e.length/2;r++)t=t.add((0,u.default)(parseInt(e.slice(-2*r-2,-2*r),16)).shiftLeft(7*r));return t.toJSNumber()}(e.from(e.from(t,"hex").reverse().map((e,t)=>0===t?e:127&e)).toString("hex"))}function i(t){const r=!(64&e.from(t.slice(0,2),"hex")[0]),n=e.from(t,"hex").map((e,t)=>0===t?63&e:127&e);let o=u.default.zero;for(let e=n.length-1;e>=0;e--)o=0===e?o.or(n[e]):o.or((0,u.default)(n[e]).shiftLeft(7*e-1));return r?o.toJSNumber():o.negate().toJSNumber()}function s(e){return v(e.length)+e.split("").map(e=>e.charCodeAt(0).toString(16)).join("")}function h(e){if(0===parseInt(e.substring(0,8),16))return"";const t=e.slice(8);let r="";for(let e=0;e<t.length;e+=2)r+=String.fromCharCode(parseInt(t.substring(e,e+2),16));return r}function d(t){if(44!==t.length&&42!==t.length)throw new Error("Incorrect hex length to parse an address");let r=44===t.length?t.substring(0,4):"00"+t.substring(0,2),n=44===t.length?4:2;if("0000"===r)return a.default.encode(e.from("06a19f"+t.substring(n),"hex"));if("0001"===r)return a.default.encode(e.from("06a1a1"+t.substring(n),"hex"));if("0002"===r)return a.default.encode(e.from("06a1a4"+t.substring(n),"hex"));if("01"===t.substring(0,2)&&44===t.length)return a.default.encode(e.from("025a79"+t.substring(2,42),"hex"));throw new Error("Unrecognized address type")}function g(t,r){const n=t instanceof e?t:e.from(t);if("tz1"===r)return d("0000"+n.toString("hex"));if("tz2"===r)return d("0001"+n.toString("hex"));if("tz3"===r)return d("0002"+n.toString("hex"));if("kt1"===r)return d(`01${n.toString("hex")}00`);throw new Error(`Unrecognized address hint, '${r}'`)}function b(e){const t=a.default.decode(e).slice(3).toString("hex");if(e.startsWith("tz1"))return"0000"+t;if(e.startsWith("tz2"))return"0001"+t;if(e.startsWith("tz3"))return"0002"+t;if(e.startsWith("KT1"))return"01"+t+"00";throw new Error("Unrecognized address prefix: "+e.substring(0,3))}function m(t){if(66!==t.length&&68!==t.length)throw new Error(`Incorrect hex length, ${t.length} to parse a key`);let r=t.substring(0,2);if("00"===r)return a.default.encode(e.from("0d0f25d9"+t.substring(2),"hex"));if("01"===r&&68===t.length)return a.default.encode(e.from("03fee256"+t.substring(2),"hex"));if("02"===r&&68===t.length)return a.default.encode(e.from("03b28b7f"+t.substring(2),"hex"));throw new Error("Unrecognized key type")}function y(t,r=""){const n=t instanceof e?t:e.from(t);if("op"===r)return a.default.encode(e.from("0574"+n.toString("hex"),"hex"));if("p"===r)return a.default.encode(e.from("02aa"+n.toString("hex"),"hex"));if("expr"===r)return a.default.encode(e.from("0d2c401b"+n.toString("hex"),"hex"));if("chain_id"===r)return a.default.encode(e.from("575200"+n.toString("hex"),"hex"));if(""===r)return a.default.encode(n);throw new Error(`Unsupported hint, '${r}'`)}function v(e){return("0000000"+e.toString(16)).slice(-8)}function _(t,r){return e.from(c.blake2b(t,null,r))}t.writeBoolean=function(e){return e?"ff":"00"},t.readBoolean=function(e){return parseInt(e,16)>0},t.writeInt=r,t.writeSignedInt=n,t.readInt=o,t.readSignedInt=i,t.findInt=function(e,t,r=!1){let n="",s=0;for(;t+2*s<e.length;){let r=t+2*s,o=r+2,i=e.substring(r,o);if(n+=i,s+=1,parseInt(i,16)<128)break}return r?{value:i(n),length:2*s}:{value:o(n),length:2*s}},t.writeString=s,t.readString=h,t.readAddress=d,t.readAddressWithHint=g,t.writeAddress=b,t.readBranch=function(t){if(64!==t.length)throw new Error("Incorrect hex length to parse a branch hash");return a.default.encode(e.from("0134"+t,"hex"))},t.writeBranch=function(e){return a.default.decode(e).slice(2).toString("hex")},t.readPublicKey=m,t.writePublicKey=function(e){if(e.startsWith("edpk"))return"00"+a.default.decode(e).slice(4).toString("hex");if(e.startsWith("sppk"))return"01"+a.default.decode(e).slice(4).toString("hex");if(e.startsWith("p2pk"))return"02"+a.default.decode(e).slice(4).toString("hex");throw new Error("Unrecognized key type")},t.readKeyWithHint=function(t,r){const n=t instanceof e?t:e.from(t);if("edsk"===r)return a.default.encode(e.from("2bf64e07"+n.toString("hex"),"hex"));if("edpk"===r)return m("00"+n.toString("hex"));if("sppk"===r)return m("01"+n.toString("hex"));if("p2pk"===r)return m("02"+n.toString("hex"));throw new Error(`Unrecognized key hint, '${r}'`)},t.writeKeyWithHint=function(e,t){if("edsk"===t||"edpk"===t||"sppk"===t||"p2pk"===t)return a.default.decode(e).slice(4);throw new Error(`Unrecognized key hint, '${t}'`)},t.readSignatureWithHint=function(t,r){const n=t instanceof e?t:e.from(t);if("edsig"===r||r===f.SignerCurve.ED25519)return a.default.encode(e.from("09f5cd8612"+n.toString("hex"),"hex"));if("spsig"===r||r===f.SignerCurve.SECP256K1)return a.default.encode(e.from("0d7365133f"+n.toString("hex"),"hex"));if("p2sig"===r||r===f.SignerCurve.SECP256R1)return a.default.encode(e.from("36f02c34"+n.toString("hex"),"hex"));throw new Error(`Unrecognized signature hint, '${r}'`)},t.writeSignatureWithHint=function(e,t){if("edsig"===t||t===f.SignerCurve.ED25519)return a.default.decode(e).slice("edsig".length);if("spsig"===t||t===f.SignerCurve.SECP256K1)return a.default.decode(e).slice("spsig".length);if("p2sig"===t||t===f.SignerCurve.SECP256R1)return a.default.decode(e).slice("p2sig".length);throw new Error(`Unrecognized key hint, '${t}'`)},t.readBufferWithHint=y,t.writeBufferWithHint=function(e,t=""){if(""===t)return a.default.decode(e);if("chain_id"===t)return a.default.decode(e).slice("Net".length);throw new Error(`Unsupported hint, '${t}'`)},t.computeOperationHash=function(e){return y(_(e.bytes,32),"op")},t.computeKeyHash=function(e,t="tz1"){return g(_(e,20),t)},t.writePackedData=function(e,t,o=p.TezosParameterFormat.Micheline){switch(t){case"int":return"0500"+n(e);case"nat":return"0500"+r(e);case"string":return"0501"+s(e);case"key_hash":{const t=b(e).slice(2);return`050a${v(t.length/2)}${t}`}case"address":{const t=b(e);return`050a${v(t.length/2)}${t}`}case"bytes":{const t=e.toString("hex");return`050a${v(t.length/2)}${t}`}default:try{if(o===p.TezosParameterFormat.Micheline)return"05"+l.TezosLanguageUtil.translateMichelineToHex(e);if(o===p.TezosParameterFormat.Michelson){const t=l.TezosLanguageUtil.translateMichelsonToMicheline(e);return"05"+l.TezosLanguageUtil.translateMichelineToHex(t)}throw new Error(`Unsupported format, ${o}, provided`)}catch(e){throw new Error(`Unrecognized data type or format: '${t}', '${o}': ${e}`)}}},t.readPackedData=function(e,t){switch(t){case"int":return i(e.slice(4));case"nat":return o(e.slice(4));case"string":return h(e.slice(4));case"key_hash":return d("00"+e.slice(12));case"address":return d(e.slice(12));case"bytes":return e.slice(12);case"michelson":return l.TezosLanguageUtil.normalizeMichelsonWhiteSpace(l.TezosLanguageUtil.hexToMichelson(e.slice(2)).code);default:return l.TezosLanguageUtil.hexToMicheline(e.slice(2)).code}},t.encodeBigMapKey=function(e){return y(_(e,32),"expr")},t.simpleHash=_,t.calculateContractAddress=function(e,t){const r=a.default.decode(e).slice(2);let n=[];for(let e=0;e<r.length;e++)n.push(r[e]);n=n.concat([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]);const o=c.blake2b(new Uint8Array(n),null,20),i=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(new Uint8Array([2,90,121]),o);return a.default.encode(i)}}(t.TezosMessageUtils||(t.TezosMessageUtils={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,r){return(a=s()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&i(o,r.prototype),o}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)})(e)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.r(t),r.d(t,"JSONPath",(function(){return m}));var h=Object.prototype.hasOwnProperty;function d(e,t){return(e=e.slice()).push(t),e}function g(e,t){return(t=t.slice()).unshift(e),t}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,e);var t,r,n=(t=a,r=s(),function(){var e,n=o(t);if(r){var i=o(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return c(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,t.value=e,t.name="NewError",t}return a}(u(Error));function m(e,t,r,o,i){if(!(this instanceof m))try{return new m(e,t,r,o,i)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(i=o,o=r,r=t,t=e,e=null);var s=e&&"object"===n(e);if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!h.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||o||null,this.otherTypeCallback=e.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){var a={path:s?e.path:t};s?"json"in e&&(a.json=e.json):a.json=r;var u=this.evaluate(a);if(!u||"object"!==n(u))throw new b(u);return u}}m.prototype.evaluate=function(e,t,r,o){var i=this,s=this.parent,a=this.parentProperty,u=this.flatten,c=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=o||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===n(e)&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!h.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');t=e.json,u=h.call(e,"flatten")?e.flatten:u,this.currResultType=h.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=h.call(e,"sandbox")?e.sandbox:this.currSandbox,c=h.call(e,"wrap")?e.wrap:c,this.currPreventEval=h.call(e,"preventEval")?e.preventEval:this.currPreventEval,r=h.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=h.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,s=h.call(e,"parent")?e.parent:s,a=h.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(s=s||null,a=a||null,Array.isArray(e)&&(e=m.toPathString(e)),(e||""===e)&&t){var l=m.toPathArray(e);"$"===l[0]&&l.length>1&&l.shift(),this._hasParentSelector=null;var p=this._trace(l,t,["$"],s,a,r).filter((function(e){return e&&!e.isParentSelector}));return p.length?c||1!==p.length||p[0].hasArrExpr?p.reduce((function(e,t){var r=i._getPreferredOutput(t);return u&&Array.isArray(r)?e=e.concat(r):e.push(r),e}),[]):this._getPreferredOutput(p[0]):c?[]:void 0}},m.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":var r=Array.isArray(e.path)?e.path:m.toPathArray(e.path);return e.pointer=m.toPointer(r),e.path="string"==typeof e.path?e.path:m.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return m.toPathString(e[t]);case"pointer":return m.toPointer(e.path);default:throw new TypeError("Unknown result type")}},m.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:m.toPathString(e.path),t(n,r,e)}},m.prototype._trace=function(e,t,r,o,i,s,a,u){var c,l=this;if(!e.length)return c={path:r,value:t,parent:o,parentProperty:i,hasArrExpr:a},this._handleCallback(c,s,"value"),c;var f=e[0],b=e.slice(1),m=[];function y(e){Array.isArray(e)?e.forEach((function(e){m.push(e)})):m.push(e)}if(("string"!=typeof f||u)&&t&&h.call(t,f))y(this._trace(b,t[f],d(r,f),t,f,s,a));else if("*"===f)this._walk(f,b,t,r,o,i,s,(function(e,t,r,n,o,i,s,a){y(l._trace(g(e,r),n,o,i,s,a,!0,!0))}));else if(".."===f)y(this._trace(b,t,r,o,i,s,a)),this._walk(f,b,t,r,o,i,s,(function(e,t,r,o,i,s,a,u){"object"===n(o[e])&&y(l._trace(g(t,r),o[e],d(i,e),o,e,u,!0))}));else{if("^"===f)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:b,isParentSelector:!0};if("~"===f)return c={path:d(r,f),value:i,parent:o,parentProperty:null},this._handleCallback(c,s,"property"),c;if("$"===f)y(this._trace(b,t,r,null,null,s,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(f))y(this._slice(f,b,t,r,o,i,s));else if(0===f.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(f,b,t,r,o,i,s,(function(e,t,r,n,o,i,s,a){l._eval(t.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),n[e],e,o,i,s)&&y(l._trace(g(e,r),n,o,i,s,a,!0))}))}else if("("===f[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");y(this._trace(g(this._eval(f,t,r[r.length-1],r.slice(0,-1),o,i),b),t,r,o,i,s,a))}else if("@"===f[0]){var v=!1,_=f.slice(1,-2);switch(_){case"scalar":t&&["object","function"].includes(n(t))||(v=!0);break;case"boolean":case"string":case"undefined":case"function":n(t)===_&&(v=!0);break;case"integer":!Number.isFinite(t)||t%1||(v=!0);break;case"number":Number.isFinite(t)&&(v=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(v=!0);break;case"object":t&&n(t)===_&&(v=!0);break;case"array":Array.isArray(t)&&(v=!0);break;case"other":v=this.currOtherTypeCallback(t,r,o,i);break;case"null":null===t&&(v=!0);break;default:throw new TypeError("Unknown value type "+_)}if(v)return c={path:r,value:t,parent:o,parentProperty:i},this._handleCallback(c,s,"value"),c}else if("`"===f[0]&&t&&h.call(t,f.slice(1))){var P=f.slice(1);y(this._trace(b,t[P],d(r,P),t,P,s,a,!0))}else if(f.includes(",")){var $,A=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}(f.split(","));try{for(A.s();!($=A.n()).done;){var S=$.value;y(this._trace(g(S,b),t,r,o,i,s,!0))}}catch(e){A.e(e)}finally{A.f()}}else!u&&t&&h.call(t,f)&&y(this._trace(b,t[f],d(r,f),t,f,s,a,!0))}if(this._hasParentSelector)for(var T=0;T<m.length;T++){var w=m[T];if(w&&w.isParentSelector){var E=this._trace(w.expr,t,w.path,o,i,s,a);if(Array.isArray(E)){m[T]=E[0];for(var I=E.length,D=1;D<I;D++)T++,m.splice(T,0,E[D])}else m[T]=E}}return m},m.prototype._walk=function(e,t,r,o,i,s,a,u){if(Array.isArray(r))for(var c=r.length,l=0;l<c;l++)u(l,e,t,r,o,i,s,a);else r&&"object"===n(r)&&Object.keys(r).forEach((function(n){u(n,e,t,r,o,i,s,a)}))},m.prototype._slice=function(e,t,r,n,o,i,s){if(Array.isArray(r)){var a=r.length,u=e.split(":"),c=u[2]&&Number.parseInt(u[2])||1,l=u[0]&&Number.parseInt(u[0])||0,p=u[1]&&Number.parseInt(u[1])||a;l=l<0?Math.max(0,l+a):Math.min(a,l),p=p<0?Math.max(0,p+a):Math.min(a,p);for(var f=[],h=l;h<p;h+=c){this._trace(g(h,t),r,n,o,i,s,!0).forEach((function(e){f.push(e)}))}return f}},m.prototype._eval=function(e,t,r,n,o,i){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=i,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=o,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=r,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=m.toPathString(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},m.cache={},m.toPathString=function(e){for(var t=e,r=t.length,n="$",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+=/^[\*0-9]+$/.test(t[o])?"["+t[o]+"]":"['"+t[o]+"']");return n},m.toPointer=function(e){for(var t=e,r=t.length,n="",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+="/"+t[o].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n},m.toPathArray=function(e){var t=m.cache;if(t[e])return t[e].concat();var r=[],n=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(e,t){return"[#"+(r.push(t)-1)+"]"})).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,(function(e,t){return"['"+t.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?r[t[1]]:e}));return t[e]=n,t[e].concat()};m.prototype.vm={runInNewContext:function(e,t){var r=Object.keys(t),n=[];!function(e,t,r){for(var n=e.length,o=0;o<n;o++){r(e[o])&&t.push(e.splice(o--,1)[0])}}(r,n,(function(e){return"function"==typeof t[e]}));var o=r.map((function(e,r){return t[e]})),i=n.reduce((function(e,r){var n=t[r].toString();return/function/.test(n)||(n="function "+n),"var "+r+"="+n+";"+e}),"");/(["'])use strict\1/.test(e=i+e)||r.includes("arguments")||(e="var arguments = undefined;"+e);var s=(e=e.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),u=s>-1?e.slice(0,s+1)+" return "+e.slice(s+1):" return "+e;return a(Function,l(r).concat([u])).apply(void 0,l(o))}}},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosNodeWriter=void 0;const u=i(r(22)),c=i(r(2)),l=r(7),p=r(26),f=r(3),h=r(54),d=r(4),g=r(11),b=r(99),m=a(r(18)).default.fetch,y=a(r(13)).default.log,v=new RegExp(/.*Counter [0-9]{1,} already used for contract.*/,"gm");let _={};!function(t){function r(e,t,r={}){const n=`${e}/${t}`,o=JSON.stringify(r);return y.debug(`TezosNodeWriter.performPostRequest sending ${o}\n->\n${n}`),m(n,{method:"post",body:o,headers:{"Content-Type":"application/json"}})}function n(e,t){y.debug("TezosNodeWriter.forgeOperations: "+JSON.stringify(t));let r=d.TezosMessageUtils.writeBranch(e);return t.forEach(e=>r+=h.TezosMessageCodec.encodeOperation(e)),y.debug("TezosNodeWriter.forgeOperations: "+r),r}function o(e,t,n,o,i,a="main"){return s(this,void 0,void 0,(function*(){const s=[{protocol:n,branch:t,contents:o,signature:i.signature}],u=yield r(e,`chains/${a}/blocks/head/helpers/preapply/operations`,s),c=yield u.text();let l;try{y.debug("TezosNodeWriter.preapplyOperation received "+c),l=JSON.parse(c)}catch(e){throw y.error("TezosNodeWriter.preapplyOperation failed to parse response"),new Error(`Could not parse JSON from response of chains/${a}/blocks/head/helpers/preapply/operation: '${c}' for ${s}`)}return R(c),l}))}function i(e,t,n="main"){return s(this,void 0,void 0,(function*(){const o=yield r(e,"injection/operation?chain="+n,t.bytes.toString("hex")),i=yield o.text();return R(i),i}))}function a(t,r,a,u=l.TezosConstants.HeadBranchOffset){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeReader.getBlockAtOffset(t,u),c=s.hash.slice(0,51),p=n(c,r),h=yield a.signOperation(e.from(l.TezosConstants.OperationGroupWatermark+p,"hex")),g={bytes:e.concat([e.from(p,"hex"),h]),signature:d.TezosMessageUtils.readSignatureWithHint(h,a.getSignerCurve())},b=yield o(t,c,s.protocol,r,g),m=yield i(t,g);return{results:b[0],operationGroupID:m}}))}function P(e,t,r,n,o){return s(this,void 0,void 0,(function*(){const i=yield f.TezosNodeReader.isManagerKeyRevealedForAccount(e,r),s=n+1;if(i)return o.map((e,t)=>Object.assign(Object.assign({},e),{counter:""+(s+t)}));{const e={kind:"reveal",source:r,fee:l.TezosConstants.DefaultKeyRevealFee.toString(),counter:s.toString(),gas_limit:l.TezosConstants.DefaultKeyRevealGasLimit.toString(),storage_limit:l.TezosConstants.DefaultKeyRevealStorageLimit.toString(),public_key:t};return o.forEach((e,t)=>{const r=n+2+t;e.counter=r.toString()}),[e,...o]}}))}function $(e,t,r,n,o=l.TezosConstants.DefaultDelegationFee,i=l.TezosConstants.HeadBranchOffset,u=!1){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c={kind:"delegation",source:r.publicKeyHash,fee:o.toString(),counter:s.toString(),storage_limit:l.TezosConstants.DefaultDelegationStorageLimit.toString(),gas_limit:l.TezosConstants.DefaultDelegationGasLimit.toString(),delegate:n},p=yield D(e,r,s,c,u);return a(e,p,t,i)}))}function A(e,t,r,n,o,i,s,a,u,l){let p=void 0,f=void 0;return u===c.TezosParameterFormat.Michelson?(p=JSON.parse(g.TezosLanguageUtil.translateMichelsonToMicheline(s)),y.debug(`TezosNodeWriter.constructContractOriginationOperation code translation:\n${s}\n->\n${JSON.stringify(p)}`),f=JSON.parse(g.TezosLanguageUtil.translateMichelsonToMicheline(a)),y.debug(`TezosNodeWriter.constructContractOriginationOperation storage translation:\n${a}\n->\n${JSON.stringify(f)}`)):u===c.TezosParameterFormat.Micheline&&(p=JSON.parse(s),f=JSON.parse(a)),{kind:"origination",source:e.publicKeyHash,fee:n.toString(),counter:l.toString(),gas_limit:i.toString(),storage_limit:o.toString(),balance:t.toString(),delegate:r,script:{code:p,storage:f}}}function S(e,t,r,n,o,i,u,p,h,d,g=c.TezosParameterFormat.Micheline,b=l.TezosConstants.HeadBranchOffset,m=!1){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c=T(r.publicKeyHash,s,n,o,i,u,p,h,d,g),l=yield D(e,r,s,c,m);return a(e,l,t,b)}))}function T(e,t,r,n,o,i,s,a,u,l=c.TezosParameterFormat.Micheline){let p={destination:r,amount:n.toString(),storage_limit:i.toString(),gas_limit:s.toString(),counter:t.toString(),fee:o.toString(),source:e,kind:"transaction"};if(void 0!==u){if(l===c.TezosParameterFormat.Michelson){const e=g.TezosLanguageUtil.translateParameterMichelsonToMicheline(u);p.parameters={entrypoint:a||"default",value:JSON.parse(e)}}else if(l===c.TezosParameterFormat.Micheline)p.parameters={entrypoint:a||"default",value:JSON.parse(u)};else if(l===c.TezosParameterFormat.MichelsonLambda){const e=g.TezosLanguageUtil.translateMichelsonToMicheline("code "+u);p.parameters={entrypoint:a||"default",value:JSON.parse(e)}}}else void 0!==a&&(p.parameters={entrypoint:a,value:[]});return p}function w(e,t,r){return s(this,void 0,void 0,(function*(){let o=[];for(let n=0;n<r.length;n++){let i={gas:0,storageCost:0};if(n>0){const o=r.slice(0,n);i=yield E(e,t,...o)}const s=r.slice(0,n+1),a=yield E(e,t,...s),u=a.gas-i.gas,c=a.storageCost-i.storageCost;o.push({gas:u+l.TezosConstants.GasLimitPadding,storageCost:c+l.TezosConstants.StorageLimitPadding})}const i=1===r.filter(e=>"reveal"===e.kind).length?1270:0,s=o.map(e=>e.gas).reduce((e,t)=>e+t,0),a=o.map(e=>e.storageCost).reduce((e,t)=>e+t,0),u=n("BMLxA4tQjiu1PT2x3dMiijgvMTQo8AVxkPBPpdtM8hCfiyiC1jz",r).length/2+64;let c=i+Math.ceil(s/10)+l.TezosConstants.BaseOperationFee+u+l.TezosConstants.DefaultBakerVig;const p=Math.ceil(a*l.TezosConstants.StorageRate);return Number(r[0].fee)<c&&(c+=16),y.debug("group estimate",o,c,p),{operationResources:o,estimatedFee:c,estimatedStorageBurn:p}}))}function E(e,t,...r){return s(this,void 0,void 0,(function*(){const o=Math.min(Math.floor(l.TezosConstants.BlockGasCap/[...r].length),l.TezosConstants.OperationGasCap).toString(),i=[...r].map(e=>Object.assign(Object.assign({},e),{gas_limit:o,storage_limit:l.TezosConstants.OperationStorageCap.toString()})),s=yield I(e,t,i);let a=0,u=0,c=0;for(let e of s.contents){try{a+=Math.ceil(parseInt(e.metadata.operation_result.consumed_milligas)/1e3)||0,u+=parseInt(e.metadata.operation_result.paid_storage_size_diff)||0,"origination"===e.kind||e.metadata.operation_result.allocated_destination_contract?u+=l.TezosConstants.EmptyAccountStorageBurn:"reveal"===e.kind&&(c+=1270)}catch(e){}const t=e.metadata.internal_operation_results;if(void 0!==t)for(const e of t){const t=e.result;a+=Math.ceil(parseInt(t.consumed_milligas)/1e3)||0,u+=parseInt(t.paid_storage_size_diff)||0,"origination"===e.kind&&(u+=l.TezosConstants.EmptyAccountStorageBurn)}}const p=n("BMLxA4tQjiu1PT2x3dMiijgvMTQo8AVxkPBPpdtM8hCfiyiC1jz",r).length/2+64,f=c+Math.ceil(a/10)+l.TezosConstants.BaseOperationFee+p+l.TezosConstants.DefaultBakerVig,h=Math.ceil(u*l.TezosConstants.StorageRate);return y.debug(`TezosNodeWriter.estimateOperation; gas: ${a}, storage: ${u}, fee estimate: ${f}, burn estimate: ${h}`),{gas:a,storageCost:u,estimatedFee:f,estimatedStorageBurn:h}}))}function I(e,t,n,o="NetXdQprcVkpaWU"){return s(this,void 0,void 0,(function*(){const i=yield r(e,`chains/${t}/blocks/head/helpers/scripts/run_operation`,{chain_id:o,operation:{branch:"BL94i2ShahPx3BoNs6tJdXDdGeoJ9ukwujUA2P8WJwULYNdimmq",contents:n,signature:"edsigu6xFLH2NpJ1VcYshpjW99Yc1TAL1m2XBqJyXrxcZQgBMo8sszw2zm626yjpA3pWMhjpsahLrWdmvX9cqhd4ZEUchuBuFYy"}}),s=yield i.text();R(s);return JSON.parse(s)}))}function D(e,t,r,n,o=!1){return s(this,void 0,void 0,(function*(){const i=yield P(e,t.publicKey,t.publicKeyHash,r-1,[n]);if(o){const t=yield w(e,"main",i);i[0].fee=t.estimatedFee.toString();for(let e=0;e<i.length;e++)i[e].gas_limit=t.operationResources[e].gas.toString(),i[e].storage_limit=t.operationResources[e].storageCost.toString()}return i}))}function R(e){let t="";try{const r=JSON.parse(e),n=Array.isArray(r)?r:[r];"kind"in n[0]?t=n.map(e=>e.msg?v.test(e.msg)?`(${e.kind}: ${e.id}, counter already used)`:`(${e.kind}: ${e.id}, ${e.msg})`:`(${e.kind}: ${e.id})`).join(", "):1===n.length&&1===n[0].contents.length&&"activate_account"===n[0].contents[0].kind||(t=n.map(e=>e.contents).map(e=>e.map(e=>e.metadata.operation_result).concat(e.flatMap(e=>e.metadata.internal_operation_results).filter(e=>!!e).map(e=>e.result)).map(e=>function(e){if("applied"!==e.status){let t=e.status;if(e.errors&&e.errors.length>0)try{t+=e.errors.map(e=>`(${e.kind}: ${e.id})`).join(", ")}catch(t){y.error(`failed to parse errors from '${e}'\n, PLEASE report this to the maintainers`)}return t}return""}(e)).filter(e=>e.length>0).join(", ")).join(", "))}catch(r){if(e.startsWith("Failed to parse the request body: "))t=e.slice(34);else{const t=e.replace(/\"/g,"").replace(/\n/,"");51===t.length&&"o"===t.charAt(0)||y.error(`failed to parse errors: '${r}' from '${e}'\n, PLEASE report this to the maintainers`)}}if(t.length>0){y.debug("errors found in response:\n"+e);let r=new p.ServiceResponseError(200,"","","",e);throw r.message=t,r}}t.forgeOperations=n,t.forgeOperationsRemotely=function(e,t,n,o="main"){return s(this,void 0,void 0,(function*(){y.debug("TezosNodeWriter.forgeOperations:"),y.debug(JSON.stringify(n)),y.warn("forgeOperationsRemotely() is not intrinsically trustless");const i=yield r(e,`chains/${o}/blocks/head/helpers/forge/operations`,{branch:t,contents:n}),s=(yield i.text()).replace(/\n/g,"").replace(/['"]+/g,"");let a=Array.from(n.map(e=>e.kind)),u=!1;for(let e of a)if(u=["reveal","transaction","delegation","origination"].includes(e),u)break;if(u){const e=h.TezosMessageCodec.parseOperationGroup(s);for(let t=0;t<n.length;t++){const r=n[t],o=e[t];if("transaction"===r.kind){if(o.kind!==r.kind||o.fee!==r.fee||o.amount!==r.amount||o.destination!==r.destination)throw new Error("Forged transaction failed validation.")}else if("delegation"===r.kind){if(o.kind!==r.kind||o.fee!==r.fee||o.delegate!==r.delegate)throw new Error("Forged delegation failed validation.")}else if("origination"===r.kind&&(o.kind!==r.kind||o.fee!==r.fee||o.balance!==r.balance||o.spendable!==r.spendable||o.delegatable!==r.delegatable||o.delegate!==r.delegate||void 0!==o.script))throw new Error("Forged origination failed validation.")}}return s}))},t.packDataRemotely=function(e,t,n,o=l.TezosConstants.OperationGasCap,i="main"){return s(this,void 0,void 0,(function*(){y.debug("TezosNodeWriter.packDataRemotely:"),y.debug(JSON.stringify(t)),y.warn("packDataRemotely() is not intrinsically trustless");const s=yield r(e,`chains/${i}/blocks/head/helpers/scripts/pack_data`,{data:t,type:n,gas:""+o}),a=yield s.json();try{return a.packed}catch(e){throw new Error(`Could not pack ${t} as ${n}; error ${e}`)}}))},t.preapplyOperation=o,t.injectOperation=i,t.sendOperation=a,t.queueOperation=function(e,t,r,n,o=25){const i=u.blake2s(`${e}${n.publicKeyHash}`,null,16);_[i]||(_[i]=b.TezosOperationQueue.createQueue(e,r,n,o)),_[i].addOperations(...t)},t.getQueueStatus=function(e,t){const r=u.blake2s(`${e}${t.publicKeyHash}`,null,16);return _[r]?_[r].getStatus():-1},t.appendRevealOperation=P,t.sendTransactionOperation=function(e,t,r,n,o,i=l.TezosConstants.DefaultSimpleTransactionFee,u=l.TezosConstants.HeadBranchOffset,c=!1){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,p={destination:n,amount:o.toString(),storage_limit:l.TezosConstants.DefaultTransactionStorageLimit+"",gas_limit:l.TezosConstants.DefaultTransactionGasLimit+"",counter:s.toString(),fee:i.toString(),source:r.publicKeyHash,kind:"transaction"},h=yield D(e,r,s,p,c);return a(e,h,t,u)}))},t.sendDelegationOperation=$,t.sendUndelegationOperation=function(e,t,r,n=l.TezosConstants.DefaultDelegationFee,o=l.TezosConstants.HeadBranchOffset,i=!1){return s(this,void 0,void 0,(function*(){return $(e,t,r,void 0,n,o,i)}))},t.sendContractOriginationOperation=function(e,t,r,n,o,i,u,p,h,d,g=c.TezosParameterFormat.Micheline,b=l.TezosConstants.HeadBranchOffset,m=!1){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c=A(r,n,o,i,u,p,h,d,g,s),l=yield D(e,r,s,c,m);return a(e,l,t,b)}))},t.constructContractOriginationOperation=A,t.sendContractInvocationOperation=S,t.constructContractInvocationOperation=T,t.sendContractPing=function(e,t,r,n,o,i,a,u){return s(this,void 0,void 0,(function*(){return S(e,t,r,n,0,o,i,a,u,void 0)}))},t.sendKeyRevealOperation=function(e,t,r,n=l.TezosConstants.DefaultKeyRevealFee,o=l.TezosConstants.HeadBranchOffset){return s(this,void 0,void 0,(function*(){const i=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,s={kind:"reveal",source:r.publicKeyHash,fee:n+"",counter:i.toString(),gas_limit:"10000",storage_limit:"0",public_key:r.publicKey};return a(e,[s],t,o)}))},t.sendIdentityActivationOperation=function(e,t,r,n){return a(e,[{kind:"activate_account",pkh:r.publicKeyHash,secret:n}],t)},t.testContractInvocationOperation=function(e,t,r,n,o,i,a,u,l,p,h=c.TezosParameterFormat.Micheline){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c=T(r.publicKeyHash,s,n,o,i,a,u,l,p,h);return E(e,t,c)}))},t.testContractDeployOperation=function(e,t,r,n,o,i,a,u,l,p,h=c.TezosParameterFormat.Micheline){return s(this,void 0,void 0,(function*(){const s=(yield f.TezosNodeReader.getCounterForAccount(e,r.publicKeyHash))+1,c=A(r,n,o,i,a,u,l,p,h,s);return E(e,t,c)}))},t.estimateOperationGroup=w,t.estimateOperation=E,t.dryRunOperation=I,t.prepareOperationGroup=function(e,t,r,n,o=!1){return s(this,void 0,void 0,(function*(){const i=yield P(e,t.publicKey,t.publicKeyHash,r,n);if(o){const t=yield w(e,"main",i);i[0].fee=t.estimatedFee.toString();for(let e=0;e<i.length;e++)i[e].gas_limit=t.operationResources[e].gas.toString(),i[e].storage_limit=t.operationResources[e].storageCost.toString()}return i}))},t.parseRPCError=R,t.runView=function(e,t,n,o,i,a,u="NetXdQprcVkpaWU"){return s(this,void 0,void 0,(function*(){const s=yield r(e,`chains/${t}/blocks/head/helpers/scripts/run_script_view`,{contract:n,view:o,input:i,chain_id:u,unparsing_mode:"Readable",level:a}),c=yield s.text();return JSON.parse(c)}))}}(t.TezosNodeWriter||(t.TezosNodeWriter={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TezosConstants=void 0,function(e){e.OperationGroupWatermark="03",e.DefaultSimpleTransactionFee=1420,e.DefaultTransactionStorageLimit=496,e.DefaultTransactionGasLimit=10600,e.DefaultDelegationFee=1258,e.DefaultDelegationStorageLimit=0,e.DefaultDelegationGasLimit=1100,e.DefaultAccountOriginationFee=1266,e.DefaultAccountOriginationStorageLimit=496,e.DefaultAccountOriginationGasLimit=10600,e.DefaultKeyRevealFee=1270,e.DefaultKeyRevealStorageLimit=0,e.DefaultKeyRevealGasLimit=1100,e.P005ManagerContractWithdrawalGasLimit=26283,e.P005ManagerContractDepositGasLimit=15285,e.P005ManagerContractWithdrawalStorageLimit=496,e.P001StorageRate=1e3,e.P007StorageRate=250,e.StorageRate=e.P007StorageRate,e.BaseOperationFee=100,e.P009BlockGasCap=104e5,e.P010BlockGasCap=52e5,e.P016BlockGasCap=26e5,e.P007OperationGasCap=104e4,e.OperationGasCap=e.P007OperationGasCap,e.BlockGasCap=e.P016BlockGasCap,e.P010OperationStorageCap=6e4,e.P011OperationStorageCap=32768,e.OperationStorageCap=e.P011OperationStorageCap,e.EmptyAccountStorageBurn=257,e.DefaultBakerVig=200,e.GasLimitPadding=1e3,e.StorageLimitPadding=25,e.HeadBranchOffset=54,e.MaxBranchOffset=64,e.DefaultBatchDelay=25,e.P009BlockTime=60,e.P010BlockTime=30,e.DefaultBlockTime=e.P010BlockTime,e.GenesisBlockTime=new Date(2018,5,30,12,7,32)}(t.TezosConstants||(t.TezosConstants={}))},function(e,t,r){var n=r(0),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosContractUtils=void 0;const a=i(r(22)),u=r(11),c=r(3);!function(t){t.verifyDestination=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=yield c.TezosNodeReader.getAccountForBlock(t,"head",r);if(!o.script)throw new Error("No code found at "+r);const i=e.from(a.blake2s(JSON.stringify(o.script.code),null,16)).toString("hex");if(i!==n)throw new Error(`Contract code hash "${i}" doesn't match expected ${n}`);return!0}))},t.verifyScript=function(t,r){const n=e.from(a.blake2s(u.TezosLanguageUtil.preProcessMichelsonScript(t).join("\n"),null,16)).toString("hex");if(n!==r)throw new Error(`Contract code hash "${n}" doesn't match expected ${r}`);return!0},t.clearRPCOperationGroupHash=function(e){return e.replace(/\"/g,"").replace(/\n/,"")}}(t.TezosContractUtils||(t.TezosContractUtils={}))}).call(this,r(0).Buffer)},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,c=[],l=!1,p=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosLanguageUtil=void 0;const s=i(r(59)),a=i(r(96)),u=i(r(53)),c=r(4),l=["prim","args","annots"];!function(t){function r(e){const t=new u.Parser(u.Grammar.fromCompiled(a.default));return d(e).forEach(e=>{t.feed(e)}),t.results[0]}function n(e,t){let r=e;e.script&&(r=e.script);for(let e=0;e<r.length;e++)if(r[e].prim===t)return JSON.stringify(r[e],null,1);throw new Error(t+" key was not found")}function o(e){const t=new u.Parser(u.Grammar.fromCompiled(s.default));return t.feed(g(e)),t.results.join("")}function i(t){let r=0;const n=parseInt(t.substring(r,r+8),16);r+=8;const o=e.from(t.substring(r,r+2*n),"hex").toString();return r+=2*n,{code:o,consumed:r}}function p(e,t){return s.getKeywordForCode(parseInt(e.substring(t,t+2),16))}function f(e,t){return p(e,t).slice(1,-1)}function h(e,t=!0){const r=i(e);return{code:t?r.code.split(" ").map(e=>`"${e}"`).join(", "):r.code,consumed:r.consumed}}function d(e){let t=new Map;t.parameter=e.search(/(^|\s+)parameter/m),t.storage=e.search(/(^|\s+)storage/m),t.code=e.search(/(^|\s+)code/m);const r=Object.values(t).sort((e,t)=>Number(e)-Number(t));t[Object.keys(t).find(e=>t[e]===r[0])+""]=e.substring(r[0],r[1]),t[Object.keys(t).find(e=>t[e]===r[1])+""]=e.substring(r[1],r[2]),t[Object.keys(t).find(e=>t[e]===r[2])+""]=e.substring(r[2]);return[t.parameter,t.storage,t.code].map(e=>e.trim().split("\n").map(e=>e.replace(/\#[\s\S]+$/,"").trim()).filter(e=>e.length>0).join(" "))}function g(e){return e.replace(/\n/g," ").replace(/ +/g," ").replace(/\[{/g,"[ {").replace(/}\]/g,"} ]").replace(/},{/g,"}, {").replace(/\]}/g,"] }").replace(/":"/g,'": "').replace(/":\[/g,'": [').replace(/{"/g,'{ "').replace(/"}/g,'" }').replace(/,"/g,', "').replace(/","/g,'", "').replace(/\[\[/g,"[ [").replace(/\]\]/g,"] ]").replace(/\["/g,'[ "').replace(/"\]/g,'" ]').replace(/\[ +\]/g,"[]").trim()}t.hexToMicheline=function e(t){if(t.length<2)throw new Error(`Malformed Micheline fragment '${t}'`);let r="",n=0,o=t.substring(n,n+2);n+=2;try{switch(o){case"00":{const e=c.TezosMessageUtils.findInt(t.substring(n),0,!0);r+=`{ "int": "${e.value}" }`,n+=e.length;break}case"01":{const e=i(t.substring(n));r+=`{ "string": "${e.code}" }`,n+=e.consumed;break}case"02":{const o=parseInt(t.substring(n,n+8),16);n+=8;let i=[],s=0;for(;s<o;){let r=e(t.substring(n));i.push(r.code),s+=r.consumed/2,n+=r.consumed}r+=0===o?"[]":`[ ${i.join(", ")} ]`;break}case"03":r+=`{ "prim": ${p(t,n)} }`,n+=2;break;case"04":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const e=h(t.substring(n));r+=`"annots": [ ${e.code} ] }`,n+=e.consumed;break}case"05":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));r+=`"args": [ ${o.code} ] }`,n+=o.consumed;break}case"06":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));r+=`"args": [ ${o.code} ], `,n+=o.consumed;const i=h(t.substring(n));r+=`"annots": [ ${i.code} ] }`,n+=i.consumed;break}case"07":{r+=`{ "prim": ${p(t,n)}, `,n+=2;let o=[],i=e(t.substring(n));o.push(i.code),n+=i.consumed,i=e(t.substring(n)),o.push(i.code),n+=i.consumed,r+=`"args": [ ${o.join(", ")} ] }`;break}case"08":{r+=`{ "prim": ${p(t,n)}, `,n+=2;const o=e(t.substring(n));n+=o.consumed;const i=e(t.substring(n));n+=i.consumed,r+=`"args": [ ${o.code}, ${i.code} ], `;const s=h(t.substring(n));r+=`"annots": [ ${s.code} ] }`,n+=s.consumed;break}case"09":{r+=`{ "prim": ${p(t,n)}, `,n+=2;let o=e("02"+t.substring(n));if(r+='"args": '+o.code,n+=o.consumed-2,"00000000"!==t.substring(n,n+8)){const e=h(t.substring(n));e.code.length>2&&(r+=`, "annots": [ ${e.code} ] }`),n+=e.consumed}else r+=" }",n+=8;break}case"0a":{const e=parseInt(t.substring(n,n+8),16);n+=8,r+=`{ "bytes": "${t.substring(n,n+2*e)}" }`,n+=2*e;break}default:throw new Error(`Unknown Micheline field type '${o}' at offset ${n} of '${t}'`)}}catch(e){const o=`Nested hex parsing error (${e.message}) after: ${t}, ${n}, ${r}`;throw new Error(o)}return{code:r,consumed:n}},t.hexToMichelson=function e(t){if(t.length<2)throw new Error(`Malformed Michelson fragment '${t}'`);let r="",n=0,o=t.substring(n,n+2);n+=2;try{switch(o){case"00":{const e=c.TezosMessageUtils.findInt(t.substring(n),0,!0);r+=""+e.value,n+=e.length;break}case"01":{const e=i(t.substring(n));r+=`"${e.code}"`,n+=e.consumed;break}case"02":{const o=parseInt(t.substring(n,n+8),16);n+=8;let i=[],s=0;for(;s<o;){let r=e(t.substring(n));i.push(r.code),s+=r.consumed/2,n+=r.consumed}r+=0===o?"[]":`[ ${i.join(" ")} ]`;break}case"03":r+=`( ${f(t,n)} )`,n+=2;break;case"04":{r+=`( ${f(t,n)} `,n+=2;const e=h(t.substring(n),!1);r+=` ${e.code} )`,n+=e.consumed;break}case"05":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));r+=` ${o.code} )`,n+=o.consumed;break}case"06":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));r+=` ${o.code} `,n+=o.consumed;const i=h(t.substring(n),!1);r+=` ${i.code} )`,n+=i.consumed;break}case"07":{r+=`( ${f(t,n)} `,n+=2;let o=[],i=e(t.substring(n));o.push(i.code),n+=i.consumed,i=e(t.substring(n)),o.push(i.code),n+=i.consumed,r+=` ${o.join(" ")} )`;break}case"08":{r+=`( ${f(t,n)} `,n+=2;const o=e(t.substring(n));n+=o.consumed;const i=e(t.substring(n));n+=i.consumed,r+=` ${o.code} ${i.code} `;const s=h(t.substring(n),!1);r+=` ${s.code} )`,n+=s.consumed;break}case"09":{r+=`( ${f(t,n)} `,n+=2;let o=e("02"+t.substring(n));if(r+='"args": '+o.code,n+=o.consumed-2,"00000000"!==t.substring(n,n+8)){const e=h(t.substring(n),!1);e.code.length>2&&(r+=` ${e.code} )`),n+=e.consumed}else r+=" )",n+=8;break}case"0a":{const e=parseInt(t.substring(n,n+8),16);n+=8,r+="0x"+t.substring(n,n+2*e),n+=2*e;break}default:throw new Error(`Unknown Michelson field type '${o}' at offset ${n} of '${t}'`)}}catch(e){const o=`Nested hex parsing error (${e.message}) after: ${t}, ${n}, ${r}`;throw new Error(o)}return{code:r,consumed:n}},t.translateMichelsonToMicheline=r,t.translateParameterMichelsonToMicheline=function(e){return r(e)},t.translateMichelsonToHex=function(e){return function(e){const t=JSON.parse(e);let r=[];return r.push(n(t,"code")),r.push(n(t,"storage")),r}(r(e)).map(e=>g(e)).map(e=>o(e)).reduce((e,t)=>e+("0000000"+(t.length/2).toString(16)).slice(-8)+t,"")},t.translateMichelineToHex=o,t.overrideKeywordList=function(e){s.setKeywordList(e)},t.restoreKeywordList=function(){s.setKeywordList(s.DefaultMichelsonKeywords)},t.preProcessMichelsonScript=d,t.normalizePrimitiveRecordOrder=function e(t){return Array.isArray(t)?t.map(e):"object"==typeof t?Object.keys(t).sort((e,t)=>l.indexOf(e)-l.indexOf(t)).reduce((r,n)=>Object.assign(Object.assign({},r),{[n]:e(t[n])}),{}):t},t.normalizeMichelineWhiteSpace=g,t.normalizeMichelsonWhiteSpace=function(e){return e.replace(/\s{2,}/g," ").replace(/\( /g,"(").replace(/ \)/g,")")},t.stripComments=function(e){return e.trim().split("\n").map(e=>e.replace(/\#[\s\S]+$/,"").trim()).filter(e=>e.length>0).join(" ")}}(t.TezosLanguageUtil||(t.TezosLanguageUtil={}))}).call(this,r(0).Buffer)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static setLogger(e){Object.assign(this.log,e)}}t.default=n,n.log={}},function(e,t,r){"use strict";var n=r(25),o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=p;var i=Object.create(r(21));i.inherits=r(1);var s=r(46),a=r(31);i.inherits(p,s);for(var u=o(a.prototype),c=0;c<u.length;c++){var l=u[c];p.prototype[l]||(p.prototype[l]=a.prototype[l])}function p(e){if(!(this instanceof p))return new p(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";var n={};function o(e,t,r){r||(r=Error);var o=function(e){var r,n;function o(r,n,o){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,o))||this}return n=e,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(r);o.prototype.name=r.name,o.prototype.code=e,n[e]=o}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(37),i=r(41);r(1)(c,o);for(var s=n(i.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=i.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(10))},function(e,t,r){var n=r(8).Buffer;function o(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,o=this._blockSize,i=e.length,s=this._len,a=0;a<i;){for(var u=s%o,c=Math.min(i-a,o-u),l=0;l<c;l++)r[u+l]=e[a+l];a+=c,(s+=c)%o==0&&this._update(r)}return this._len+=i,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static setFetch(e){this.actualFetch=e}}t.default=n,n.fetch=(e,t)=>n.actualFetch(e,t)},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,o,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var o,i,s,a;if(c(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):b(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var c=u.length,l=b(u,c);for(r=0;r<c;++r)i(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";var n=r(67).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=p,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=s(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(0).Buffer)},function(e,t,r){var n=r(94),o=r(95);e.exports={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:o.blake2s,blake2sHex:o.blake2sHex,blake2sInit:o.blake2sInit,blake2sUpdate:o.blake2sUpdate,blake2sFinal:o.blake2sFinal}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosConseilClient=void 0;const i=r(24),s=o(r(13)),a=r(7),u=r(33),c=r(27),l=s.default.log;!function(e){function t(e,t,r,o){return n(this,void 0,void 0,(function*(){return u.ConseilDataClient.executeEntityQuery(e,"tezos",t,r,o)}))}function r(e,r){return n(this,void 0,void 0,(function*(){const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addOrdering(c.ConseilQueryBuilder.blankQuery(),"level",i.ConseilSortDirection.DESC),1);return(yield t(e,r,"blocks",n))[0]}))}function o(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"blocks",o)}))}function s(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"operations",o)}))}function p(e,t,o,u=10,p=a.TezosConstants.DefaultBlockTime){return n(this,void 0,void 0,(function*(){if(u<=0)throw new Error("Invalid duration");const n=(yield r(e,t)).level,a=(new Date).getTime()-18e4,f=a+18e4+u*p*1e3;l.debug(`TezosConseilClient.awaitOperationConfirmation looking for ${o} since ${n} at ${new Date(a).toUTCString()}, +${u}`);let h=n,d=c.ConseilQueryBuilder.blankQuery();for(d=c.ConseilQueryBuilder.addPredicate(d,"operation_group_hash",i.ConseilOperator.EQ,[o],!1),d=c.ConseilQueryBuilder.addPredicate(d,"timestamp",i.ConseilOperator.AFTER,[a],!1),d=c.ConseilQueryBuilder.setLimit(d,1);n+u>h;){const o=yield s(e,t,d);if(o.length>0)return o[0];if(h=(yield r(e,t)).level,n+u<h)break;if((new Date).getTime()>f)break;yield new Promise(e=>setTimeout(e,1e3*p))}throw new Error(`Did not observe ${o} on ${t} in ${u} block${u>1?"s":""} since ${n}`)}))}e.getTezosEntityData=t,e.getBlockHead=r,e.getBlock=function(e,o,s){return n(this,void 0,void 0,(function*(){if("head"===s)return r(e,o);const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"hash",i.ConseilOperator.EQ,[s],!1),1);return(yield t(e,o,"blocks",n))[0]}))},e.getBlockByLevel=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"level",i.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"blocks",n))[0]}))},e.getAccount=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"account_id",i.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"accounts",n))[0]}))},e.getOperationGroup=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"hash",i.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"operation_groups",n))[0]}))},e.getOperation=function(e,r,o){return n(this,void 0,void 0,(function*(){const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"operation_group_hash",i.ConseilOperator.EQ,[o],!1),1);return(yield t(e,r,"operations",n))[0]}))},e.getBlocks=o,e.getAccounts=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"accounts",o)}))},e.getOperationGroups=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"operation_groups",o)}))},e.getOperations=s,e.getFeeStatistics=function(e,r,o){return n(this,void 0,void 0,(function*(){let n=c.ConseilQueryBuilder.blankQuery();return n=c.ConseilQueryBuilder.addPredicate(n,"kind",i.ConseilOperator.EQ,[o]),n=c.ConseilQueryBuilder.addOrdering(n,"timestamp",i.ConseilSortDirection.DESC),n=c.ConseilQueryBuilder.setLimit(n,1),t(e,r,"fees",n)}))},e.getProposals=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"proposals",o)}))},e.getBakers=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"bakers",o)}))},e.getBallots=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,r,"ballots",o)}))},e.awaitOperationConfirmation=p,e.awaitOperationForkConfirmation=function(e,t,s,a,u){return n(this,void 0,void 0,(function*(){const n=yield p(e,t,s,a),l=n.block_level,f=n.block_hash;let h=l;for(yield new Promise(e=>setTimeout(e,50*u*1e3));h<l+u;){if(h=(yield r(e,t)).level,h>=l+u)break;yield new Promise(e=>setTimeout(e,6e4))}let d=c.ConseilQueryBuilder.blankQuery();d=c.ConseilQueryBuilder.addFields(d,"level","hash","predecessor"),d=c.ConseilQueryBuilder.addPredicate(d,"level",i.ConseilOperator.BETWEEN,[l-1,l+u]),d=c.ConseilQueryBuilder.setLimit(d,2*u);const g=yield o(e,t,d);return g.length===u+2?function(e,t,r){try{return e.sort((e,t)=>parseInt(e.level)-parseInt(t.level)).reduce((n,o,i)=>{if(!n)throw new Error("Block sequence mismatch");return i>1?o.predecessor===e[i-1].hash:1===i?n&&o.level===t&&o.hash===r&&o.predecessor===e[i-1].hash:0===i||void 0},!0)}catch(e){return!1}}(g,l,f):function(e,t,r,n){throw new Error("Not implemented")}()}))},e.getBigMapData=function(e,r){return n(this,void 0,void 0,(function*(){if(!r.startsWith("KT1"))throw new Error("Invalid address");const n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addFields(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"account_id",i.ConseilOperator.EQ,[r],!1),"big_map_id"),100),o=yield t(e,e.network,"originated_account_maps",n);if(o.length<1)return;const s=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"big_map_id",o.length>1?i.ConseilOperator.IN:i.ConseilOperator.EQ,o.map(e=>e.big_map_id),!1),100),a=yield t(e,e.network,"big_maps",s),u=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.addFields(c.ConseilQueryBuilder.addPredicate(c.ConseilQueryBuilder.blankQuery(),"big_map_id",o.length>1?i.ConseilOperator.IN:i.ConseilOperator.EQ,o.map(e=>e.big_map_id),!1),"big_map_id","key","value"),1e3),l=yield t(e,e.network,"big_map_contents",u);let p=[];for(const e of a){const t={index:Number(e.big_map_id),key:e.key_type,value:e.value_type};let r=[];for(const e of l.filter(e=>e.big_map_id===t.index))r.push({key:JSON.stringify(e.key),value:JSON.stringify(e.value)});p.push({definition:t,content:r})}return{contract:r,maps:p}}))},e.getBigMapValueForKey=function(e,r,o="",s=-1){return n(this,void 0,void 0,(function*(){if(!o.startsWith("KT1"))throw new Error("Invalid address");if(r.length<1)throw new Error("Invalid key");if(s<0&&0===o.length)throw new Error("One of contract or mapIndex must be specified");if(s<0&&o.length>0){let r=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.blankQuery(),1);r=c.ConseilQueryBuilder.addFields(r,"big_map_id"),r=c.ConseilQueryBuilder.addPredicate(r,"account_id",i.ConseilOperator.EQ,[o],!1),r=c.ConseilQueryBuilder.addOrdering(r,"big_map_id",i.ConseilSortDirection.DESC);const n=yield t(e,e.network,"originated_account_maps",r);if(n.length<1)throw new Error("Could not find any maps for "+o);s=n[0]}let n=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.blankQuery(),1);n=c.ConseilQueryBuilder.addFields(n,"value"),n=c.ConseilQueryBuilder.addPredicate(n,"key",i.ConseilOperator.EQ,[r],!1),n=c.ConseilQueryBuilder.addPredicate(n,"big_map_id",i.ConseilOperator.EQ,[s],!1);const a=yield t(e,e.network,"big_map_contents",n);if(a.length<1)throw new Error(`Could not a value for key ${r} in map ${s}`);return a[0]}))},e.getEntityQueryForId=function(e){let t=c.ConseilQueryBuilder.setLimit(c.ConseilQueryBuilder.blankQuery(),1);if("number"==typeof e){if(Number(e)<0)throw new Error("Invalid numeric id parameter");return{entity:"blocks",query:c.ConseilQueryBuilder.addPredicate(t,"level",i.ConseilOperator.EQ,[e],!1)}}if("string"==typeof e){const r=String(e);if(r.startsWith("tz1")||r.startsWith("tz2")||r.startsWith("tz3")||r.startsWith("KT1"))return{entity:"accounts",query:c.ConseilQueryBuilder.addPredicate(t,"account_id",i.ConseilOperator.EQ,[e],!1)};if(r.startsWith("B"))return{entity:"blocks",query:c.ConseilQueryBuilder.addPredicate(t,"hash",i.ConseilOperator.EQ,[e],!1)};if(r.startsWith("o"))return t=c.ConseilQueryBuilder.setLimit(t,1e3),t=c.ConseilQueryBuilder.addPredicate(t,"operation_group_hash",i.ConseilOperator.EQ,[e],!1),t=c.ConseilQueryBuilder.addOrdering(t,"operation_order",i.ConseilSortDirection.DESC),{entity:"operations",query:t}}throw new Error("Invalid id parameter")},e.countKeysInMap=function(e,t){return n(this,void 0,void 0,(function*(){let r=c.ConseilQueryBuilder.blankQuery();r=c.ConseilQueryBuilder.addFields(r,"key"),r=c.ConseilQueryBuilder.addPredicate(r,"big_map_id",i.ConseilOperator.EQ,[t]),r=c.ConseilQueryBuilder.addAggregationFunction(r,"key",i.ConseilFunction.count),r=c.ConseilQueryBuilder.setLimit(r,1);const n=yield u.ConseilDataClient.executeEntityQuery(e,"tezos",e.network,"big_map_contents",r);try{return n[0].count_key}catch(e){return-1}}))}}(t.TezosConseilClient||(t.TezosConseilClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConseilOutput=t.ConseilFunction=t.ConseilOperator=t.ConseilSortDirection=void 0,function(e){e.ASC="asc",e.DESC="desc"}(t.ConseilSortDirection||(t.ConseilSortDirection={})),function(e){e.BETWEEN="between",e.EQ="eq",e.IN="in",e.LIKE="like",e.LT="lt",e.BEFORE="before",e.GT="gt",e.AFTER="after",e.STARTSWITH="startsWith",e.ENDSWITH="endsWith",e.ISNULL="isnull"}(t.ConseilOperator||(t.ConseilOperator={})),function(e){e.avg="avg",e.count="count",e.max="max",e.min="min",e.sum="sum"}(t.ConseilFunction||(t.ConseilFunction={})),function(e){e.csv="csv",e.json="json"}(t.ConseilOutput||(t.ConseilOutput={}))},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,o)}));default:for(i=new Array(a-1),s=0;s<i.length;)i[s++]=arguments[s];return t.nextTick((function(){e.apply(null,i)}))}}}:e.exports=t}).call(this,r(10))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceResponseError=t.ServiceRequestError=void 0;class n extends Error{constructor(e,t,r,n){super(),this.httpStatus=e,this.httpMessage=t,this.serverURL=r,this.request=n}}t.ServiceRequestError=n;class o extends Error{constructor(e,t,r,n,o){super(),this.httpStatus=e,this.httpMessage=t,this.serverURL=r,this.request=n,this.response=o}}t.ServiceResponseError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConseilQueryBuilder=void 0;const n=r(24);!function(e){e.blankQuery=function(){return{fields:[],predicates:[],orderBy:[],aggregation:[],limit:100}},e.addFields=function(e,...t){let r=Object.assign({},e),n=new Set(e.fields);return t.forEach(e=>n.add(e)),r.fields=Array.from(n.values()),r},e.addPredicate=function(e,t,r,o,i=!1,s){if(r===n.ConseilOperator.BETWEEN&&2!==o.length)throw new Error("BETWEEN operation requires a list of two values.");if(r===n.ConseilOperator.IN&&o.length<2)throw new Error("IN operation requires a list of two or more values.");if(1!==o.length&&r!==n.ConseilOperator.IN&&r!==n.ConseilOperator.BETWEEN&&r!==n.ConseilOperator.ISNULL)throw new Error(`invalid values list for ${r}.`);let a=Object.assign({},e);return a.predicates.push({field:t,operation:r,set:o,inverse:i,group:s}),a},e.addOrdering=function(e,t,r=n.ConseilSortDirection.ASC){let o=Object.assign({},e);return o.orderBy.push({field:t,direction:r}),o},e.setLimit=function(e,t){if(t<1)throw new Error("Limit cannot be less than one.");let r=Object.assign({},e);return r.limit=t,r},e.setOutputType=function(e,t){let r=Object.assign({},e);return r.output=t,r},e.addAggregationFunction=function(e,t,r){if(!e.fields.includes(t))throw new Error("Cannot apply an aggregation function on a field not being returned.");let n=Object.assign({},e);return n.aggregation.push({field:t,function:r}),n},e.addExtendedParameter=function(e,t,r){return e[t]=r,e},e.removeParameter=function(e,t){return e.hasOwnProperty(t)&&delete e[t],e}}(t.ConseilQueryBuilder||(t.ConseilQueryBuilder={}))},function(e,t,r){"use strict";var n=r(15).codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||i.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,p=!0,a||i.call(t)},h=function(e){i.call(t,e)},d=function(){var e;return s&&!p?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",d),t.req?g():t.on("request",g)),t.on("end",f),t.on("finish",l),!1!==r.error&&t.on("error",h),t.on("close",d),function(){t.removeListener("complete",l),t.removeListener("abort",d),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",d)}}},function(e,t,r){(t=e.exports=r(46)).Stream=t,t.Readable=t,t.Writable=r(31),t.Duplex=r(14),t.Transform=r(49),t.PassThrough=r(85)},function(e,t,r){var n=r(0),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n,o){var i=r(25);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=y;var a,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:i.nextTick;y.WritableState=m;var c=Object.create(r(21));c.inherits=r(1);var l={deprecate:r(42)},p=r(47),f=r(30).Buffer,h=(void 0!==o?o:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var d,g=r(48);function b(){}function m(e,t){a=a||r(14),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===e.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,o);else{var s=$(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||P(e,r),n?u(_,e,r,s,o):_(e,r,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(e){if(a=a||r(14),!(d.call(y,this)||this instanceof a))return new y(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function v(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function _(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function P(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,v(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,p=r.callback;if(v(e,t,!1,t.objectMode?1:c.length,c,l,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function $(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=$(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(A,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(y,p),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&(e&&e._writableState instanceof m)}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=e,f.isBuffer(n)||n instanceof h);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=b),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),i.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),i.nextTick(n,s),o=!1),o}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,n,o,i);return u}(this,o,a,e,t,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(10),r(83).setImmediate,r(12))},function(e,t,r){var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function n(e){return e&&"[object RegExp]"===t.call(e)}function o(e){return e&&"object"==typeof e&&!n(e)&&!Array.isArray(e)}function i(e){return"("+e+")"}function s(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function a(e){if("string"==typeof e)return"(?:"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(n(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");if(e.unicode)throw new Error("RegExp /u flag is not allowed");return e.source}throw new Error("Not a pattern: "+e)}function u(t,r){if(o(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var i={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var s in r)e.call(r,s)&&(i[s]=r[s]);if("string"==typeof i.type&&t!==i.type)throw new Error("Type transform cannot be a string (type '"+i.type+"' for token '"+t+"')");var a=i.match;return i.match=Array.isArray(a)?a:a?[a]:[],i.match.sort((function(e,t){return n(e)&&n(t)?0:n(t)?-1:n(e)?1:t.length-e.length})),i}function c(e){return Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.include)for(var o=[].concat(n.include),i=0;i<o.length;i++)t.push({include:o[i]});else{if(!n.type)throw new Error("Rule has no type: "+JSON.stringify(n));t.push(u(n.type,n))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),r=[],n=0;n<t.length;n++){var i=t[n],s=e[i],a=[].concat(s);if("include"!==i){var c=[];a.forEach((function(e){o(e)?(c.length&&r.push(u(i,c)),r.push(u(i,e)),c=[]):c.push(e)})),c.length&&r.push(u(i,c))}else for(var l=0;l<a.length;l++)r.push({include:a[l]})}return r}(e)}var l=u("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var n=null,o=Object.create(null),u=!0,c=[],p=[],f=0;f<e.length;f++)e[f].fallback&&(u=!1);for(f=0;f<e.length;f++){var h=e[f];if(h.include)throw new Error("Inheritance is not allowed in stateless lexers");if(h.error||h.fallback){if(n)throw!h.fallback==!n.fallback?new Error("Multiple "+(h.fallback?"fallback":"error")+" rules not allowed (for token '"+h.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+h.defaultType+"')");n=h}var d=h.match;if(u)for(;d.length&&"string"==typeof d[0]&&1===d[0].length;)o[d.shift().charCodeAt(0)]=h;if(h.pop||h.push||h.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+h.defaultType+"')");if(h.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+h.defaultType+"')")}if(0!==d.length){u=!1,c.push(h);var g=s(d.map(a)),b=new RegExp(g);if(b.test(""))throw new Error("RegExp matches empty string: "+b);if(new RegExp("|"+g).exec("").length-1>0)throw new Error("RegExp has capture groups: "+b+"\nUse (?:  ) instead");if(!h.lineBreaks&&b.test("\n"))throw new Error("Rule should declare lineBreaks: "+b);p.push(i(g))}}var m=n&&n.fallback,y=r&&!m?"ym":"gm",v=r||m?"":"|";return{regexp:new RegExp(s(p)+v,y),groups:c,fast:o,error:n||l}}function f(e,t,r){var n=e&&(e.push||e.next);if(n&&!r[n])throw new Error("Missing state '"+n+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var h=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};h.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},h.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},h.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},h.prototype.popState=function(){this.setState(this.stack.pop())},h.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var d=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function g(){return this.value}if(h.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},h.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(s=this.fast[r.charCodeAt(e)])return this._token(s,r.charAt(e),e);var n=this.re;n.lastIndex=e;var o=d(n,r),i=this.error;if(null==o)return this._token(i,r.slice(e,r.length),e);var s=this._getGroup(o),a=o[0];return i.fallback&&o.index!==e?(this.queuedGroup=s,this.queuedText=a,this._token(i,r.slice(e,o.index),e)):this._token(s,a,e)}},h.prototype._token=function(e,t,r){var n=0;if(e.lineBreaks){var o=/\n/g,i=1;if("\n"===t)n=1;else for(;o.exec(t);)n++,i=o.lastIndex}var s={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:g,offset:r,lineBreaks:n,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=n,0!==n?this.col=a-i+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(s,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),s},"undefined"!=typeof Symbol&&Symbol.iterator){var b=function(e){this.lexer=e};b.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},b.prototype[Symbol.iterator]=function(){return this},h.prototype[Symbol.iterator]=function(){return new b(this)}}return h.prototype.formatError=function(e,t){var r=e.text,n=e.offset,o=e.lineBreaks?r.indexOf("\n"):r.length,i=Math.max(0,n-e.col+1),s=this.buffer.substring(i,n+o);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+s+"\n",t+="  "+Array(e.col).join(" ")+"^"},h.prototype.clone=function(){return new h(this.states,this.state)},h.prototype.has=function(e){return!0},{compile:function(e){var t=p(c(e));return new h({start:t},"start")},states:function(e,t){var r=e.$all?c(e.$all):[];delete e.$all;var n=Object.getOwnPropertyNames(e);t||(t=n[0]);for(var o=Object.create(null),i=0;i<n.length;i++){var s=n[i];o[s]=c(e[s]).concat(r)}for(i=0;i<n.length;i++){s=n[i];for(var a=o[s],u=Object.create(null),l=0;l<a.length;l++){var d=a[l];if(d.include){var g=[l,1];if(d.include!==s&&!u[d.include]){u[d.include]=!0;var b=o[d.include];if(!b)throw new Error("Cannot include nonexistent state '"+d.include+"' (in state '"+s+"')");for(var m=0;m<b.length;m++){var y=b[m];-1===a.indexOf(y)&&g.push(y)}}a.splice.apply(a,g),l--}}}var v=Object.create(null);for(i=0;i<n.length;i++)s=n[i],v[s]=p(o[s],!0);for(i=0;i<n.length;i++){var _=n[i],P=v[_],$=P.groups;for(l=0;l<$.length;l++)f($[l],_,v);var A=Object.getOwnPropertyNames(P.fast);for(l=0;l<A.length;l++)f(P.fast[A[l]],_,v)}return new h(v,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),r=Object.create(null),n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],s=e[i];(Array.isArray(s)?s:[s]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+i+"')");t[e]=i}))}function a(e){return JSON.stringify(e)}var u="";for(var c in u+="switch (value.length) {\n",r){var l=r[c];u+="case "+c+":\n",u+="switch (value) {\n",l.forEach((function(e){var r=t[e];u+="case "+a(e)+": return "+a(r)+"\n"})),u+="}\n"}return u+="}\n",Function("value",u)}}})?n.apply(t,o):n)||(e.exports=i)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConseilDataClient=void 0;const i=r(34),s=o(r(18)),a=o(r(13)).default.log,u=s.default.fetch;!function(e){e.executeEntityQuery=function(e,t,r,o,s){return n(this,void 0,void 0,(function*(){const n=`${e.url}/v2/data/${t}/${r}/${o}`;return a.debug(`ConseilDataClient.executeEntityQuery request: ${n}, ${JSON.stringify(s)}`),u(n,{method:"post",headers:{apiKey:e.apiKey,"Content-Type":"application/json"},cache:"no-store",body:JSON.stringify(s)}).then(e=>{if(!e.ok)throw a.error(`ConseilDataClient.executeEntityQuery request: ${n}, ${JSON.stringify(s)}, failed with ${e.statusText}(${e.status})`),new i.ConseilRequestError(e.status,e.statusText,n,s);return e}).then(e=>{const t=e.headers.get("content-type").toLowerCase().includes("application/json"),r=t?e.json():e.text();return a.debug("ConseilDataClient.executeEntityQuery response: "+(t?JSON.stringify(r):r)),r})}))}}(t.ConseilDataClient||(t.ConseilDataClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConseilResponseError=t.ConseilRequestError=void 0;const n=r(26);class o extends n.ServiceRequestError{constructor(e,t,r,n){super(e,t,r,null),this.conseilQuery=n}toString(){return`ConseilRequestError for ${this.serverURL} with ${this.httpStatus} and ${this.httpMessage}`}}t.ConseilRequestError=o;class i extends n.ServiceResponseError{constructor(e,t,r,n,o){super(e,t,r,null,o),this.conseilQuery=n}}t.ConseilResponseError=i},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=r(8).Buffer,o=r(63).Transform;function i(e){o.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(1)(i,o),i.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,o=0;this._blockOffset+e.length-o>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[o++];this._update(),this._blockOffset=0}for(;o<e.length;)r[this._blockOffset++]=e[o++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},function(e,t,r){"use strict";(function(t,n){var o;e.exports=T,T.ReadableState=S;r(19).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=r(38),a=r(0).Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,l=r(64);c=l&&l.debuglog?l.debuglog("stream"):function(){};var p,f,h,d=r(65),g=r(39),b=r(40).getHighWaterMark,m=r(15).codes,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,P=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1)(T,s);var $=g.errorOrDestroy,A=["error","close","destroy","pause","resume"];function S(e,t,n){o=o||r(16),e=e||{},"boolean"!=typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(20).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function T(e){if(o=o||r(16),!(this instanceof T))return new T(e);var t=this instanceof o;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function w(e,t,r,n,o){c("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,s);else if(o||(i=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),i)$(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?$(e,new P):E(e,s,t,!0);else if(s.ended)$(e,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?E(e,s,t,!1):C(e,s)):E(e,s,t,!1)}else n||(s.reading=!1,C(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function E(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),C(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=g.destroy,T.prototype._undestroy=g.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},T.prototype.unshift=function(e){return w(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){p||(p=r(20).StringDecoder);var t=new p(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,x(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function U(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function M(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(z,t,e))}function z(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function B(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):D(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,o=t.needReadable;return c("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",o=!0),t.ended||t.reading?c("reading or ended",o=!1):o&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(r,t))),null===(n=e>0?k(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){$(this,new _("_read()"))},T.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,c("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:b;function a(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",d),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",b),r.removeListener("data",f),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,x(e))}}(r);e.on("drain",l);var p=!1;function f(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!p&&(c("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function h(t){c("onerror",t),b(),e.removeListener("error",h),0===i(e,"error")&&$(e,t)}function d(){e.removeListener("finish",g),b()}function g(){c("onfinish"),e.removeListener("close",d),b()}function b(){c("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",g),e.emit("pipe",r),o.flowing||(c("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,c("on readable",o.length,o.reading),o.length?D(this):o.reading||n.nextTick(N,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(U,this),r},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(U,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(M,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(c("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<A.length;i++)e.on(A[i],this.emit.bind(this,A[i]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(68)),f(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=k,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===h&&(h=r(69)),h(T,e,t)})}).call(this,r(12),r(10))},function(e,t,r){e.exports=r(19).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(o,this,e)):t.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(n,s):(s._writableState.errorEmitted=!0,t.nextTick(r,s,e)):t.nextTick(r,s,e):i?(t.nextTick(n,s),i(e)):t.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(10))},function(e,t,r){"use strict";var n=r(15).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=T,T.WritableState=S;var s={deprecate:r(42)},a=r(38),u=r(0).Buffer,c=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,p=r(39),f=r(40).getHighWaterMark,h=r(15).codes,d=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,P=h.ERR_UNKNOWN_ENCODING,$=p.errorOrDestroy;function A(){}function S(e,t,s){i=i||r(16),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,o=r.sync,i=r.writecb;if("function"!=typeof i)throw new b;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,o,i){--t.pendingcb,r?(n.nextTick(i,o),n.nextTick(C,e,t),e._writableState.errorEmitted=!0,$(e,o)):(i(o),e._writableState.errorEmitted=!0,$(e,o),C(e,t))}(e,r,o,t,i);else{var s=D(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),o?n.nextTick(E,e,r,s,i):E(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(e){var t=this instanceof(i=i||r(16));if(!t&&!l.call(T,this))return new T(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function w(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function E(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),C(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,w(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,p=r.callback;if(w(e,t,!1,t.objectMode?1:c.length,c,l,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&$(e,r),t.prefinished=!0,e.emit("prefinish"),C(e,t)}))}function C(e,t){var r=D(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return r}r(1)(T,a),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===T&&(e&&e._writableState instanceof S)}})):l=function(e){return e instanceof this},T.prototype.pipe=function(){$(this,new m)},T.prototype.write=function(e,t,r){var o,i=this._writableState,s=!1,a=!i.objectMode&&(o=e,u.isBuffer(o)||o instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=A),i.ending?function(e,t){var r=new _;$(e,r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,o){var i;return null===r?i=new v:"string"==typeof r||t.objectMode||(i=new d("chunk",["string","Buffer"],r)),!i||($(e,i),n.nextTick(o,i),!1)}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else w(e,t,!1,a,n,o,i);return c}(this,i,a,e,t,r)),s},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new P(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,r){r(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,r){var o=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||function(e,t,r){t.ending=!0,C(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,o,r),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=p.destroy,T.prototype._undestroy=p.undestroy,T.prototype._destroy=function(e,t){t(e)}}).call(this,r(12),r(10))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(12))},function(e,t,r){"use strict";e.exports=l;var n=r(15).codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(16);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",p)}function p(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(1)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new o("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){var n=r(1),o=r(17),i=r(8).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function p(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,a=0|this._d,u=0|this._e,d=0|this._f,g=0|this._g,b=0|this._h,m=0;m<16;++m)r[m]=e.readInt32BE(4*m);for(;m<64;++m)r[m]=0|(((t=r[m-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[m-7]+h(r[m-15])+r[m-16];for(var y=0;y<64;++y){var v=b+f(u)+c(u,d,g)+s[y]+r[y]|0,_=p(n)+l(n,o,i)|0;b=g,g=d,d=u,u=a+v|0,a=i,i=o,o=n,n=v+_|0}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=g+this._g|0,this._h=b+this._h|0},u.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u},function(e,t,r){var n=r(1),o=r(17),i=r(8).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function p(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function b(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function m(e,t){return e>>>0<t>>>0?1:0}n(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,o=0|this._ch,i=0|this._dh,a=0|this._eh,u=0|this._fh,y=0|this._gh,v=0|this._hh,_=0|this._al,P=0|this._bl,$=0|this._cl,A=0|this._dl,S=0|this._el,T=0|this._fl,w=0|this._gl,E=0|this._hl,I=0;I<32;I+=2)t[I]=e.readInt32BE(4*I),t[I+1]=e.readInt32BE(4*I+4);for(;I<160;I+=2){var D=t[I-30],R=t[I-30+1],C=h(D,R),O=d(R,D),U=g(D=t[I-4],R=t[I-4+1]),N=b(R,D),M=t[I-14],x=t[I-14+1],k=t[I-32],F=t[I-32+1],z=O+x|0,B=C+M+m(z,O)|0;B=(B=B+U+m(z=z+N|0,N)|0)+k+m(z=z+F|0,F)|0,t[I]=B,t[I+1]=z}for(var L=0;L<160;L+=2){B=t[L],z=t[L+1];var j=l(r,n,o),W=l(_,P,$),G=p(r,_),H=p(_,r),Q=f(a,S),q=f(S,a),J=s[L],K=s[L+1],V=c(a,u,y),Y=c(S,T,w),Z=E+q|0,X=v+Q+m(Z,E)|0;X=(X=(X=X+V+m(Z=Z+Y|0,Y)|0)+J+m(Z=Z+K|0,K)|0)+B+m(Z=Z+z|0,z)|0;var ee=H+W|0,te=G+j+m(ee,H)|0;v=y,E=w,y=u,w=T,u=a,T=S,a=i+X+m(S=A+Z|0,A)|0,i=o,A=$,o=n,$=P,n=r,P=_,r=X+te+m(_=Z+ee|0,Z)|0}this._al=this._al+_|0,this._bl=this._bl+P|0,this._cl=this._cl+$|0,this._dl=this._dl+A|0,this._el=this._el+S|0,this._fl=this._fl+T|0,this._gl=this._gl+w|0,this._hl=this._hl+E|0,this._ah=this._ah+r+m(this._al,_)|0,this._bh=this._bh+n+m(this._bl,P)|0,this._ch=this._ch+o+m(this._cl,$)|0,this._dh=this._dh+i+m(this._dl,A)|0,this._eh=this._eh+a+m(this._el,S)|0,this._fh=this._fh+u+m(this._fl,T)|0,this._gh=this._gh+y+m(this._gl,w)|0,this._hh=this._hh+v+m(this._hl,E)|0},u.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u},function(e,t,r){"use strict";(function(t,n){var o=r(25);e.exports=v;var i,s=r(35);v.ReadableState=y;r(19).EventEmitter;var a=function(e,t){return e.listeners(t).length},u=r(47),c=r(30).Buffer,l=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var p=Object.create(r(21));p.inherits=r(1);var f=r(80),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=r(81),b=r(48);p.inherits(v,u);var m=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var n=t instanceof(i=i||r(14));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(20).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function v(e){if(i=i||r(14),!(this instanceof v))return new v(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function _(e,t,r,n,o){var i,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,A(e)}(e,s)):(o||(i=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,t)),i?e.emit("error",i):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):P(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):T(e,s)):P(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),T(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=b.destroy,v.prototype._undestroy=b.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},v.prototype.unshift=function(e){return _(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return d||(d=r(20).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};function $(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(S,e):S(e))}function S(e){h("emit readable"),e.emit("readable"),D(e)}function T(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(w,e,t))}function w(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function E(e){h("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,o=r.data;e-=o.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++n}return t.length-=n,o}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,o=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,s),0===(e-=s)){s===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++o}return t.length-=o,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}v.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):A(this),null;if(0===(e=$(e,t))&&t.ended)return 0===t.length&&C(this),null;var n,o=t.needReadable;return h("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",o=!0),t.ended||t.reading?h("reading or ended",o=!1):o&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=$(r,t))),null===(n=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:v;function c(t,n){h("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,h("cleanup"),e.removeListener("close",m),e.removeListener("finish",y),e.removeListener("drain",p),e.removeListener("error",b),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",v),r.removeListener("data",g),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function l(){h("onend"),e.end()}i.endEmitted?o.nextTick(u):r.once("end",u),e.on("unpipe",c);var p=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",p);var f=!1;var d=!1;function g(t){h("ondata"),d=!1,!1!==e.write(t)||d||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==U(i.pipes,e))&&!f&&(h("false write response, pause",i.awaitDrain),i.awaitDrain++,d=!0),r.pause())}function b(t){h("onerror",t),v(),e.removeListener("error",b),0===a(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",y),v()}function y(){h("onfinish"),e.removeListener("close",m),v()}function v(){h("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",b),e.once("close",m),e.once("finish",y),e.emit("pipe",r),i.flowing||(h("pipe resume"),r.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},v.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):o.nextTick(E,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(I,e,t))}(this,e)),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(h("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<m.length;i++)e.on(m[i],this.emit.bind(this,m[i]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=R}).call(this,r(12),r(10))},function(e,t,r){e.exports=r(19).EventEmitter},function(e,t,r){"use strict";var n=r(25);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(o,this,e)):n.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,n.nextTick(o,r,e)):n.nextTick(o,r,e):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";e.exports=s;var n=r(14),o=Object.create(r(21));function i(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=r(1),o.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){var n,o=function(e){"use strict";var t=1e7,r=9007199254740992,n=p(r),i="function"==typeof BigInt;function s(e,t,r,n){return void 0===e?s[0]:void 0!==t&&(10!=+t||r)?B(e,t,r,n):H(e)}function a(e,t){this.value=e,this.sign=t,this.isSmall=!1}function u(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){this.value=e}function l(e){return-r<e&&e<r}function p(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){h(e);var r=e.length;if(r<4&&I(e,n)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function d(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function g(e){return e>0?Math.floor(e):Math.ceil(e)}function b(e,r){var n,o,i=e.length,s=r.length,a=new Array(i),u=0,c=t;for(o=0;o<s;o++)u=(n=e[o]+r[o]+u)>=c?1:0,a[o]=n-u*c;for(;o<i;)u=(n=e[o]+u)===c?1:0,a[o++]=n-u*c;return u>0&&a.push(u),a}function m(e,t){return e.length>=t.length?b(e,t):b(t,e)}function y(e,r){var n,o,i=e.length,s=new Array(i),a=t;for(o=0;o<i;o++)n=e[o]-a+r,r=Math.floor(n/a),s[o]=n-r*a,r+=1;for(;r>0;)s[o++]=r%a,r=Math.floor(r/a);return s}function v(e,t){var r,n,o=e.length,i=t.length,s=new Array(o),a=0;for(r=0;r<i;r++)(n=e[r]-a-t[r])<0?(n+=1e7,a=1):a=0,s[r]=n;for(r=i;r<o;r++){if(!((n=e[r]-a)<0)){s[r++]=n;break}n+=1e7,s[r]=n}for(;r<o;r++)s[r]=e[r];return h(s),s}function _(e,t,r){var n,o,i=e.length,s=new Array(i),c=-t;for(n=0;n<i;n++)o=e[n]+c,c=Math.floor(o/1e7),o%=1e7,s[n]=o<0?o+1e7:o;return"number"==typeof(s=f(s))?(r&&(s=-s),new u(s)):new a(s,r)}function P(e,t){var r,n,o,i,s=e.length,a=t.length,u=d(s+a);for(o=0;o<s;++o){i=e[o];for(var c=0;c<a;++c)r=i*t[c]+u[o+c],n=Math.floor(r/1e7),u[o+c]=r-1e7*n,u[o+c+1]+=n}return h(u),u}function $(e,r){var n,o,i=e.length,s=new Array(i),a=t,u=0;for(o=0;o<i;o++)n=e[o]*r+u,u=Math.floor(n/a),s[o]=n-u*a;for(;u>0;)s[o++]=u%a,u=Math.floor(u/a);return s}function A(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function S(e,r,n){return new a(e<t?$(r,e):P(r,p(e)),n)}function T(e){var t,r,n,o,i=e.length,s=d(i+i);for(n=0;n<i;n++){r=0-(o=e[n])*o;for(var a=n;a<i;a++)t=o*e[a]*2+s[n+a]+r,r=Math.floor(t/1e7),s[n+a]=t-1e7*r;s[n+i]=r}return h(s),s}function w(e,t){var r,n,o,i,s=e.length,a=d(s);for(o=0,r=s-1;r>=0;--r)o=(i=1e7*o+e[r])-(n=g(i/t))*t,a[r]=0|n;return[a,0|o]}function E(e,r){var n,o=H(r);if(i)return[new c(e.value/o.value),new c(e.value%o.value)];var l,b=e.value,m=o.value;if(0===m)throw new Error("Cannot divide by zero");if(e.isSmall)return o.isSmall?[new u(g(b/m)),new u(b%m)]:[s[0],e];if(o.isSmall){if(1===m)return[e,s[0]];if(-1==m)return[e.negate(),s[0]];var y=Math.abs(m);if(y<t){l=f((n=w(b,y))[0]);var _=n[1];return e.sign&&(_=-_),"number"==typeof l?(e.sign!==o.sign&&(l=-l),[new u(l),new u(_)]):[new a(l,e.sign!==o.sign),new u(_)]}m=p(y)}var P=I(b,m);if(-1===P)return[s[0],e];if(0===P)return[s[e.sign===o.sign?1:-1],s[0]];l=(n=b.length+m.length<=200?function(e,r){var n,o,i,s,a,u,c,l=e.length,p=r.length,h=t,g=d(r.length),b=r[p-1],m=Math.ceil(h/(2*b)),y=$(e,m),v=$(r,m);for(y.length<=l&&y.push(0),v.push(0),b=v[p-1],o=l-p;o>=0;o--){for(n=h-1,y[o+p]!==b&&(n=Math.floor((y[o+p]*h+y[o+p-1])/b)),i=0,s=0,u=v.length,a=0;a<u;a++)i+=n*v[a],c=Math.floor(i/h),s+=y[o+a]-(i-c*h),i=c,s<0?(y[o+a]=s+h,s=-1):(y[o+a]=s,s=0);for(;0!==s;){for(n-=1,i=0,a=0;a<u;a++)(i+=y[o+a]-h+v[a])<0?(y[o+a]=i+h,i=0):(y[o+a]=i,i=1);s+=i}g[o]=n}return y=w(y,m)[0],[f(g),f(y)]}(b,m):function(e,t){for(var r,n,o,i,s,a=e.length,u=t.length,c=[],l=[];a;)if(l.unshift(e[--a]),h(l),I(l,t)<0)c.push(0);else{o=1e7*l[(n=l.length)-1]+l[n-2],i=1e7*t[u-1]+t[u-2],n>u&&(o=1e7*(o+1)),r=Math.ceil(o/i);do{if(I(s=$(t,r),l)<=0)break;r--}while(r);c.push(r),l=v(l,s)}return c.reverse(),[f(c),f(l)]}(b,m))[0];var A=e.sign!==o.sign,S=n[1],T=e.sign;return"number"==typeof l?(A&&(l=-l),l=new u(l)):l=new a(l,A),"number"==typeof S?(T&&(S=-S),S=new u(S)):S=new a(S,T),[l,S]}function I(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function D(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function R(e,t){for(var r,n,i,s=e.prev(),a=s,u=0;a.isEven();)a=a.divide(2),u++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(i=o(t[n]).modPow(a,e)).isUnit()&&!i.equals(s)){for(r=u-1;0!=r;r--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(s))continue e}return!1}return!0}a.prototype=Object.create(s.prototype),u.prototype=Object.create(s.prototype),c.prototype=Object.create(s.prototype),a.prototype.add=function(e){var t=H(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new a(y(r,Math.abs(n)),this.sign):new a(m(r,n),this.sign)},a.prototype.plus=a.prototype.add,u.prototype.add=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(l(r+n))return new u(r+n);n=p(Math.abs(n))}return new a(y(n,Math.abs(r)),r<0)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){return new c(this.value+H(e).value)},c.prototype.plus=c.prototype.add,a.prototype.subtract=function(e){var t=H(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?_(r,Math.abs(n),this.sign):function(e,t,r){var n;return I(e,t)>=0?n=v(e,t):(n=v(t,e),r=!r),"number"==typeof(n=f(n))?(r&&(n=-n),new u(n)):new a(n,r)}(r,n,this.sign)},a.prototype.minus=a.prototype.subtract,u.prototype.subtract=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new u(r-n):_(n,Math.abs(r),r>=0)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){return new c(this.value-H(e).value)},c.prototype.minus=c.prototype.subtract,a.prototype.negate=function(){return new a(this.value,!this.sign)},u.prototype.negate=function(){var e=this.sign,t=new u(-this.value);return t.sign=!e,t},c.prototype.negate=function(){return new c(-this.value)},a.prototype.abs=function(){return new a(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},a.prototype.multiply=function(e){var r,n,o,i=H(e),u=this.value,c=i.value,l=this.sign!==i.sign;if(i.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((r=Math.abs(c))<t)return new a($(u,r),l);c=p(r)}return n=u.length,o=c.length,new a(-.012*n-.012*o+15e-6*n*o>0?function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return P(t,r);n=Math.ceil(n/2);var o=t.slice(n),i=t.slice(0,n),s=r.slice(n),a=r.slice(0,n),u=e(i,a),c=e(o,s),l=e(m(i,o),m(a,s)),p=m(m(u,A(v(v(l,u),c),n)),A(c,2*n));return h(p),p}(u,c):P(u,c),l)},a.prototype.times=a.prototype.multiply,u.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new u(e.value*this.value):S(Math.abs(e.value),p(Math.abs(this.value)),this.sign!==e.sign)},a.prototype._multiplyBySmall=function(e){return 0===e.value?s[0]:1===e.value?this:-1===e.value?this.negate():S(Math.abs(e.value),this.value,this.sign!==e.sign)},u.prototype.multiply=function(e){return H(e)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,c.prototype.multiply=function(e){return new c(this.value*H(e).value)},c.prototype.times=c.prototype.multiply,a.prototype.square=function(){return new a(T(this.value),!1)},u.prototype.square=function(){var e=this.value*this.value;return l(e)?new u(e):new a(T(p(Math.abs(this.value))),!1)},c.prototype.square=function(e){return new c(this.value*this.value)},a.prototype.divmod=function(e){var t=E(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=u.prototype.divmod=a.prototype.divmod,a.prototype.divide=function(e){return E(this,e)[0]},c.prototype.over=c.prototype.divide=function(e){return new c(this.value/H(e).value)},u.prototype.over=u.prototype.divide=a.prototype.over=a.prototype.divide,a.prototype.mod=function(e){return E(this,e)[1]},c.prototype.mod=c.prototype.remainder=function(e){return new c(this.value%H(e).value)},u.prototype.remainder=u.prototype.mod=a.prototype.remainder=a.prototype.mod,a.prototype.pow=function(e){var t,r,n,o=H(e),i=this.value,a=o.value;if(0===a)return s[1];if(0===i)return s[0];if(1===i)return s[1];if(-1===i)return o.isEven()?s[1]:s[-1];if(o.sign)return s[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(i,a)))return new u(g(t));for(r=this,n=s[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},u.prototype.pow=a.prototype.pow,c.prototype.pow=function(e){var t=H(e),r=this.value,n=t.value,o=BigInt(0),i=BigInt(1),a=BigInt(2);if(n===o)return s[1];if(r===o)return s[0];if(r===i)return s[1];if(r===BigInt(-1))return t.isEven()?s[1]:s[-1];if(t.isNegative())return new c(o);for(var u=this,l=s[1];(n&i)===i&&(l=l.times(u),--n),n!==o;)n/=a,u=u.square();return l},a.prototype.modPow=function(e,t){if(e=H(e),(t=H(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=s[1],n=this.mod(t);for(e.isNegative()&&(e=e.multiply(s[-1]),n=n.modInv(t));e.isPositive();){if(n.isZero())return s[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},c.prototype.modPow=u.prototype.modPow=a.prototype.modPow,a.prototype.compareAbs=function(e){var t=H(e),r=this.value,n=t.value;return t.isSmall?1:I(r,n)},u.prototype.compareAbs=function(e){var t=H(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(e){var t=this.value,r=H(e).value;return(t=t>=0?t:-t)===(r=r>=0?r:-r)?0:t>r?1:-1},a.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:I(r,n)*(this.sign?-1:1)},a.prototype.compareTo=a.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,r=H(e).value;return t===r?0:t>r?1:-1},c.prototype.compareTo=c.prototype.compare,a.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals=a.prototype.eq=a.prototype.equals,a.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=a.prototype.neq=a.prototype.notEquals,a.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater=a.prototype.gt=a.prototype.greater,a.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser=a.prototype.lt=a.prototype.lesser,a.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=a.prototype.geq=a.prototype.greaterOrEquals,a.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=a.prototype.leq=a.prototype.lesserOrEquals,a.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},a.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},a.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=u.prototype.isPositive,a.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=u.prototype.isNegative,a.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},a.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},a.prototype.isDivisibleBy=function(e){var t=H(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy=a.prototype.isDivisibleBy,a.prototype.isPrime=function(e){var t=D(this);if(void 0!==t)return t;var r=this.abs(),n=r.bitLength();if(n<=64)return R(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*n.toJSNumber(),s=Math.ceil(!0===e?2*Math.pow(i,2):i),a=[],u=0;u<s;u++)a.push(o(u+2));return R(r,a)},c.prototype.isPrime=u.prototype.isPrime=a.prototype.isPrime,a.prototype.isProbablePrime=function(e,t){var r=D(this);if(void 0!==r)return r;for(var n=this.abs(),i=void 0===e?5:e,s=[],a=0;a<i;a++)s.push(o.randBetween(2,n.minus(2),t));return R(n,s)},c.prototype.isProbablePrime=u.prototype.isProbablePrime=a.prototype.isProbablePrime,a.prototype.modInv=function(e){for(var t,r,n,i=o.zero,s=o.one,a=H(e),u=this.abs();!u.isZero();)t=a.divide(u),r=i,n=a,i=s,a=u,s=r.subtract(t.multiply(s)),u=n.subtract(t.multiply(u));if(!a.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},c.prototype.modInv=u.prototype.modInv=a.prototype.modInv,a.prototype.next=function(){var e=this.value;return this.sign?_(e,1,this.sign):new a(y(e,1),this.sign)},u.prototype.next=function(){var e=this.value;return e+1<r?new u(e+1):new a(n,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},a.prototype.prev=function(){var e=this.value;return this.sign?new a(y(e,1),!0):_(e,1,this.sign)},u.prototype.prev=function(){var e=this.value;return e-1>-r?new u(e-1):new a(n,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var C=[1];2*C[C.length-1]<=t;)C.push(2*C[C.length-1]);var O=C.length,U=C[O-1];function N(e){return Math.abs(e)<=t}function M(e,t,r){t=H(t);for(var n=e.isNegative(),i=t.isNegative(),s=n?e.not():e,a=i?t.not():t,u=0,c=0,l=null,p=null,f=[];!s.isZero()||!a.isZero();)u=(l=E(s,U))[1].toJSNumber(),n&&(u=U-1-u),c=(p=E(a,U))[1].toJSNumber(),i&&(c=U-1-c),s=l[0],a=p[0],f.push(r(u,c));for(var h=0!==r(n?1:0,i?1:0)?o(-1):o(0),d=f.length-1;d>=0;d-=1)h=h.multiply(U).add(o(f[d]));return h}a.prototype.shiftLeft=function(e){var t=H(e).toJSNumber();if(!N(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;t>=O;)r=r.multiply(U),t-=O-1;return r.multiply(C[t])},c.prototype.shiftLeft=u.prototype.shiftLeft=a.prototype.shiftLeft,a.prototype.shiftRight=function(e){var t,r=H(e).toJSNumber();if(!N(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=O;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=E(n,U))[1].isNegative()?t[0].prev():t[0],r-=O-1}return(t=E(n,C[r]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=u.prototype.shiftRight=a.prototype.shiftRight,a.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not=a.prototype.not,a.prototype.and=function(e){return M(this,e,(function(e,t){return e&t}))},c.prototype.and=u.prototype.and=a.prototype.and,a.prototype.or=function(e){return M(this,e,(function(e,t){return e|t}))},c.prototype.or=u.prototype.or=a.prototype.or,a.prototype.xor=function(e){return M(this,e,(function(e,t){return e^t}))},c.prototype.xor=u.prototype.xor=a.prototype.xor;function x(e){var r=e.value,n="number"==typeof r?r|1<<30:"bigint"==typeof r?r|BigInt(1<<30):r[0]+r[1]*t|1073758208;return n&-n}function k(e,t){return e=H(e),t=H(t),e.greater(t)?e:t}function F(e,t){return e=H(e),t=H(t),e.lesser(t)?e:t}function z(e,t){if(e=H(e).abs(),t=H(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,o=s[1];e.isEven()&&t.isEven();)r=F(x(e),x(t)),e=e.divide(r),t=t.divide(r),o=o.multiply(r);for(;e.isEven();)e=e.divide(x(e));do{for(;t.isEven();)t=t.divide(x(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return o.isUnit()?e:e.multiply(o)}a.prototype.bitLength=function(){var e=this;return e.compareTo(o(0))<0&&(e=e.negate().subtract(o(1))),0===e.compareTo(o(0))?o(0):o(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,s=n.e,a=i.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*s+1}:{p:i,e:2*s}}return{p:o(1),e:0}}(e,o(2)).e).add(o(1))},c.prototype.bitLength=u.prototype.bitLength=a.prototype.bitLength;var B=function(e,t,r,n){r=r||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());var o,i=e.length,s=Math.abs(t),a={};for(o=0;o<r.length;o++)a[r[o]]=o;for(o=0;o<i;o++){if("-"!==(l=e[o])&&(l in a&&a[l]>=s)){if("1"===l&&1===s)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=H(t);var u=[],c="-"===e[0];for(o=c?1:0;o<e.length;o++){var l;if((l=e[o])in a)u.push(H(a[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var p=o;do{o++}while(">"!==e[o]&&o<e.length);u.push(H(e.slice(p+1,o)))}}return L(u,t,c)};function L(e,t,r){var n,o=s[0],i=s[1];for(n=e.length-1;n>=0;n--)o=o.add(e[n].times(i)),i=i.times(t);return r?o.negate():o}function j(e,t){if((t=o(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var i,s=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){i=a.divmod(t),a=i.quotient;var u=i.remainder;u.isNegative()&&(u=t.minus(u).abs(),a=a.next()),s.push(u.toJSNumber())}return s.push(a.toJSNumber()),{value:s.reverse(),isNegative:n}}function W(e,t,r){var n=j(e,t);return(n.isNegative?"-":"")+n.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,r)})).join("")}function G(e){if(l(+e)){var t=+e;if(t===g(t))return i?new c(BigInt(t)):new u(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var o=n[1];if("+"===o[0]&&(o=o.slice(1)),(o=+o)!==g(o)||!l(o))throw new Error("Invalid integer: "+o+" is not a valid exponent.");var s=n[0],p=s.indexOf(".");if(p>=0&&(o-=s.length-p-1,s=s.slice(0,p)+s.slice(p+1)),o<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(o+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(i)return new c(BigInt(r?"-"+e:e));for(var f=[],d=e.length,b=d-7;d>0;)f.push(+e.slice(b,d)),(b-=7)<0&&(b=0),d-=7;return h(f),new a(f,r)}function H(e){return"number"==typeof e?function(e){if(i)return new c(BigInt(e));if(l(e)){if(e!==g(e))throw new Error(e+" is not an integer.");return new u(e)}return G(e.toString())}(e):"string"==typeof e?G(e):"bigint"==typeof e?new c(e):e}a.prototype.toArray=function(e){return j(this,e)},u.prototype.toArray=function(e){return j(this,e)},c.prototype.toArray=function(e){return j(this,e)},a.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return W(this,e,t);for(var r,n=this.value,o=n.length,i=String(n[--o]);--o>=0;)r=String(n[o]),i+="0000000".slice(r.length)+r;return(this.sign?"-":"")+i},u.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?W(this,e,t):String(this.value)},c.prototype.toString=u.prototype.toString,c.prototype.toJSON=a.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},a.prototype.valueOf=function(){return parseInt(this.toString(),10)},a.prototype.toJSNumber=a.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Q=0;Q<1e3;Q++)s[Q]=H(Q),Q>0&&(s[-Q]=H(-Q));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=k,s.min=F,s.gcd=z,s.lcm=function(e,t){return e=H(e).abs(),t=H(t).abs(),e.divide(z(e,t)).multiply(t)},s.isInstance=function(e){return e instanceof a||e instanceof u||e instanceof c},s.randBetween=function(e,r,n){e=H(e),r=H(r);var o=n||Math.random,i=F(e,r),a=k(e,r).subtract(i).add(1);if(a.isSmall)return i.add(Math.floor(o()*a));for(var u=j(a,t).value,c=[],l=!0,p=0;p<u.length;p++){var f=l?u[p]+(p+1<u.length?u[p+1]/t:0):t,h=g(o()*f);c.push(h),h<u[p]&&(l=!1)}return i.add(s.fromArray(c,t,!1))},s.fromArray=function(e,t,r){return L(e.map(H),H(t||10),r)},s}();e.hasOwnProperty("exports")&&(e.exports=o),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}).call(this,r(93)(e))},function(e,t,r){(function(t){function r(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){var r;if(e instanceof Uint8Array)r=e;else if(e instanceof t)r=new Uint8Array(e);else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");r=new Uint8Array(t.from(e,"utf8"))}return r},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,n){for(var o="\n"+e+" = ",i=0;i<t.length;i+=2){if(32===n)o+=r(t[i]).toUpperCase(),o+=" ",o+=r(t[i+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);o+=r(t[i+1]).toUpperCase(),o+=r(t[i]).toUpperCase()}i%6==4?o+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(o+=" ")}console.log(o)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),o=new Uint8Array(t),i=0;i<t;i++)o[i]=i%256;var s=(new Date).getTime();for(console.log("Generated random input in "+(s-n)+"ms"),n=s,i=0;i<r;i++){var a=e(o),u=(new Date).getTime(),c=u-n;n=u,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}}}).call(this,r(0).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyStoreCurve=t.KeyStoreType=t.SignerCurve=void 0,function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.SECP256R1=2]="SECP256R1"}(t.SignerCurve||(t.SignerCurve={})),function(e){e[e.Mnemonic=0]="Mnemonic",e[e.Fundraiser=1]="Fundraiser",e[e.Hardware=2]="Hardware"}(t.KeyStoreType||(t.KeyStoreType={})),function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.SECP256R1=2]="SECP256R1"}(t.KeyStoreCurve||(t.KeyStoreCurve={}))},function(e,t,r){var n,o;n=this,o=function(){function e(t,r,n){return this.id=++e.highestId,this.name=t,this.symbols=r,this.postprocess=n,this}function t(e,t,r,n){this.rule=e,this.dot=t,this.reference=r,this.data=[],this.wantedBy=n,this.isComplete=this.dot===e.symbols.length}function r(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function n(e,t){this.rules=e,this.start=t||this.rules[0].name;var r=this.byName={};this.rules.forEach((function(e){r.hasOwnProperty(e.name)||(r[e.name]=[]),r[e.name].push(e)}))}function o(){this.reset("")}function i(e,t,i){if(e instanceof n){var s=e;i=t}else s=n.fromCompiled(e,t);for(var a in this.grammar=s,this.options={keepHistory:!1,lexer:s.lexer||new o},i||{})this.options[a]=i[a];this.lexer=this.options.lexer,this.lexerState=void 0;var u=new r(s,0);this.table=[u],u.wants[s.start]=[],u.predict(s.start),u.process(),this.current=0}return e.highestId=0,e.prototype.toString=function(e){function t(e){return e.literal?JSON.stringify(e.literal):e.type?"%"+e.type:e.toString()}var r=void 0===e?this.symbols.map(t).join(" "):this.symbols.slice(0,e).map(t).join(" ")+"  "+this.symbols.slice(e).map(t).join(" ");return this.name+"  "+r},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var r=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return r.left=this,r.right=e,r.isComplete&&(r.data=r.build()),r},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,i.fail))},r.prototype.process=function(e){for(var t=this.states,r=this.wants,n=this.completed,o=0;o<t.length;o++){var s=t[o];if(s.isComplete){if(s.finish(),s.data!==i.fail){for(var a=s.wantedBy,u=a.length;u--;){var c=a[u];this.complete(c,s)}if(s.reference===this.index){var l=s.rule.name;(this.completed[l]=this.completed[l]||[]).push(s)}}}else{if("string"!=typeof(l=s.rule.symbols[s.dot])){this.scannable.push(s);continue}if(r[l]){if(r[l].push(s),n.hasOwnProperty(l)){var p=n[l];for(u=0;u<p.length;u++){var f=p[u];this.complete(s,f)}}}else r[l]=[s],this.predict(l)}}},r.prototype.predict=function(e){for(var r=this.grammar.byName[e]||[],n=0;n<r.length;n++){var o=r[n],i=this.wants[e],s=new t(o,0,this.index,i);this.states.push(s)}},r.prototype.complete=function(e,t){var r=e.nextState(t);this.states.push(r)},n.fromCompiled=function(t,r){var o=t.Lexer;t.ParserStart&&(r=t.ParserStart,t=t.ParserRules);var i=new n(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),r);return i.lexer=o,i},o.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},o.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},o.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},o.prototype.formatError=function(e,t){var r=this.buffer;if("string"==typeof r){var n=r.indexOf("\n",this.index);-1===n&&(n=r.length);var o=r.substring(this.lastLineBreak,n),i=this.index-this.lastLineBreak;return t+=" at line "+this.line+" col "+i+":\n\n",t+="  "+o+"\n",t+="  "+Array(i).join(" ")+"^"}return t+" at index "+(this.index-1)},i.fail={},i.prototype.feed=function(e){var t,n=this.lexer;for(n.reset(e,this.lexerState);t=n.next();){var i=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var s=this.current+1,a=new r(this.grammar,s);this.table.push(a);for(var u=void 0!==t.text?t.text:t.value,c=n.constructor===o?t.value:t,l=i.scannable,p=l.length;p--;){var f=l[p],h=f.rule.symbols[f.dot];if(h.test?h.test(c):h.type?h.type===t.type:h.literal===u){var d=f.nextState({data:c,token:t,isToken:!0,reference:s-1});a.states.push(d)}}if(a.process(),0===a.states.length){var g=new Error(this.reportError(t));throw g.offset=this.current,g.token=t,g}this.options.keepHistory&&(i.lexerState=n.save()),this.current++}return i&&(this.lexerState=n.save()),this.results=this.finish(),this},i.prototype.reportError=function(e){var t=[],r=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e);t.push(this.lexer.formatError(e,"Syntax error")),t.push("Unexpected "+r+". Instead, I was expecting to see one of the following:\n");var n=this.table.length-2;return this.table[n].states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t})).map((function(e){return this.buildFirstStateStack(e,[])}),this).forEach((function(e){var r=e[0],n=r.rule.symbols[r.dot],o=this.getSymbolDisplay(n);t.push("A "+o+" based on:"),this.displayStateStack(e,t)}),this),t.push(""),t.join("\n")},i.prototype.displayStateStack=function(e,t){for(var r,n=0,o=0;o<e.length;o++){var i=e[o],s=i.rule.toString(i.dot);s===r?n++:(n>0&&t.push("     "+n+" more lines identical to this"),n=0,t.push("    "+s)),r=s}},i.prototype.getSymbolDisplay=function(e){var t=typeof e;if("string"===t)return e;if("object"===t&&e.literal)return JSON.stringify(e.literal);if("object"===t&&e instanceof RegExp)return"character matching "+e;if("object"===t&&e.type)return e.type+" token";throw new Error("Unknown symbol type: "+e)},i.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var r=e.wantedBy[0],n=[e].concat(t),o=this.buildFirstStateStack(r,n);return null===o?null:[e].concat(o)},i.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},i.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},i.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},i.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(r){r.rule.name===t&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==i.fail&&e.push(r)})),e.map((function(e){return e.data}))},{Parser:i,Grammar:n,Rule:e}},e.exports?e.exports=o():n.nearley=o()},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TezosMessageCodec=void 0;const n=r(4),o=r(11),i=new Map([[0,"endorsement"],[1,"seedNonceRevelation"],[2,"doubleEndorsementEvidence"],[3,"doubleBakingEvidence"],[4,"accountActivation"],[5,"proposal"],[6,"ballot"],[7,"reveal"],[8,"transaction"],[9,"origination"],[10,"delegation"],[107,"reveal"],[108,"transaction"],[109,"origination"],[110,"delegation"]]),s=[...i.keys()].reduce((e,t)=>{const r=i.get(t)||"";return e[r]>t?e:Object.assign(Object.assign({},e),{[r]:t})},new Map);!function(t){function r(e){return i.get(n.TezosMessageUtils.readInt(e))||""}function a(e){return r(e.substring(64,66))}function u(e,t,r=!0){switch(t){case"endorsement":case"seedNonceRevelation":case"doubleEndorsementEvidence":case"doubleBakingEvidence":case"accountActivation":case"proposal":throw new Error("Unsupported operation type: "+t);case"ballot":return l(e,r);case"reveal":return f(e,r);case"transaction":return d(e,r);case"origination":return b(e,r);case"delegation":return y(e,r);default:throw new Error("Unsupported operation type: "+t)}}function c(e){let t=n.TezosMessageUtils.writeInt(s.accountActivation);return t+=n.TezosMessageUtils.writeAddress(e.pkh).slice(4),t+=e.secret,t}function l(t,o=!0){if("ballot"!==r(o?t.substring(64,66):t.substring(0,2)))throw new Error("Provided operation is not a ballot");let i=0,s="";o?(s=n.TezosMessageUtils.readBranch(t.substring(i,i+64)),i+=66):i+=2;const a=n.TezosMessageUtils.readAddress(t.substring(i,i+42));i+=42;const u=parseInt(t.substring(i,i+8),16);i+=8;const c=n.TezosMessageUtils.readBufferWithHint(e.from(t.substring(i,i+64),"hex"),"p");i+=64;const l=parseInt(t.substring(i,i+1),16);let p;i+=2,t.length>i&&(p=r(t.substring(i,i+2)));return{operation:{kind:"ballot",source:a,period:u,proposal:c,vote:l},branch:s,next:p,nextoffset:p?i:-1}}function p(e){let t=n.TezosMessageUtils.writeInt(s.ballot);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=("00000000"+e.period.toString(16)).slice(-8),t+=n.TezosMessageUtils.writeBufferWithHint(e.proposal).toString("hex").slice(4),t+=("00"+e.vote.toString(16)).slice(-2),t}function f(e,t=!0){let o=t?e.substring(64,66):e.substring(0,2);if("reveal"!==r(o))throw new Error("Provided operation is not a reveal.");let i=0,s="";t?(s=n.TezosMessageUtils.readBranch(e.substring(i,i+64)),i+=66):i+=2;let a="";parseInt(o,16)<100?(a=n.TezosMessageUtils.readAddress(e.substring(i,i+44)),i+=44):(a=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42);let u=n.TezosMessageUtils.findInt(e,i);i+=u.length;let c=n.TezosMessageUtils.findInt(e,i);i+=c.length;let l=n.TezosMessageUtils.findInt(e,i);i+=l.length;let p=n.TezosMessageUtils.findInt(e,i);i+=p.length;let f,h=n.TezosMessageUtils.readPublicKey(e.substring(i,i+66));i+=66,e.length>i&&(f=r(e.substring(i,i+2)));return{operation:{kind:"reveal",source:a,public_key:h,fee:u.value+"",gas_limit:l.value+"",storage_limit:p.value+"",counter:c.value+""},branch:s,next:f,nextoffset:f?i:-1}}function h(e){if("reveal"!==e.kind)throw new Error("Incorrect operation type.");let t=n.TezosMessageUtils.writeInt(s.reveal);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writePublicKey(e.public_key),t}function d(t,i=!0){let s=i?t.substring(64,66):t.substring(0,2);if("transaction"!==r(s))throw new Error("Provided operation is not a transaction.");let a=0,u="";i?(u=n.TezosMessageUtils.readBranch(t.substring(a,a+64)),a+=66):a+=2;let c="";parseInt(s,16)<100?(c=n.TezosMessageUtils.readAddress(t.substring(a,a+44)),a+=44):(c=n.TezosMessageUtils.readAddress(t.substring(a,a+42)),a+=42);let l=n.TezosMessageUtils.findInt(t,a);a+=l.length;let p=n.TezosMessageUtils.findInt(t,a);a+=p.length;let f=n.TezosMessageUtils.findInt(t,a);a+=f.length;let h=n.TezosMessageUtils.findInt(t,a);a+=h.length;let d=n.TezosMessageUtils.findInt(t,a);a+=d.length;let g=n.TezosMessageUtils.readAddress(t.substring(a,a+44));a+=44;let b=n.TezosMessageUtils.readBoolean(t.substring(a,a+2));a+=2;let m,y="";if(b&&parseInt(s,16)<100){const e=parseInt(t.substring(a,a+8),16);a+=8;const r=o.TezosLanguageUtil.hexToMicheline(t.substring(a));if(y=r.code,r.consumed!==2*e)throw new Error("Failed to parse transaction parameters: length mismatch");a+=2*e}else if(b&&parseInt(s,16)>100){const r=parseInt(t.substring(a,a+2),16);a+=2;let n="";if(255===r){const r=parseInt(t.substring(a,a+2),16);a+=2,n=e.from(t.substring(a,a+2*r),"hex").toString(),a+=2*r}else 0===r?n="default":1===r?n="root":2===r?n="do":3===r?n="set_delegate":4===r&&(n="remove_delegate");const i=parseInt(t.substring(a,a+8),16);a+=8;const s=o.TezosLanguageUtil.hexToMicheline(t.substring(a)),u=s.code;if(s.consumed!==2*i)throw new Error("Failed to parse transaction parameters: length mismatch");a+=2*i,y={entrypoint:n,value:u}}t.length>a&&(m=r(t.substring(a,a+2)));return{operation:{kind:"transaction",source:c,destination:g,amount:d.value.toString(),fee:l.value.toString(),gas_limit:f.value.toString(),storage_limit:h.value.toString(),counter:p.value.toString(),parameters:y},branch:u,next:m,nextoffset:m?a:-1}}function g(e){if("transaction"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(s.transaction);if(t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.amount)),t+=n.TezosMessageUtils.writeAddress(e.destination),e.parameters){const r=e.parameters,n=o.TezosLanguageUtil.normalizeMichelineWhiteSpace(JSON.stringify(r.value)),i=o.TezosLanguageUtil.translateMichelineToHex(n);"default"!==r.entrypoint&&""!==r.entrypoint||"030b"!==i?(t+="ff","default"===r.entrypoint||""===r.entrypoint?t+="00":"root"===r.entrypoint?t+="01":"do"===r.entrypoint?t+="02":"set_delegate"===r.entrypoint?t+="03":"remove_delegate"===r.entrypoint?t+="04":t+="ff"+("0"+r.entrypoint.length.toString(16)).slice(-2)+r.entrypoint.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),t+=("0000000"+(i.length/2).toString(16)).slice(-8)+i):t+="00"}else t+="00";return t}function b(e,t=!0){let i=t?e.substring(64,66):e.substring(0,2);if("origination"!==r(i))throw new Error("Provided operation is not an origination.");let s=0,a="";t?(a=n.TezosMessageUtils.readBranch(e.substring(s,s+64)),s+=66):s+=2;let u="";parseInt(i,16)<100?(u=n.TezosMessageUtils.readAddress(e.substring(s,s+44)),s+=44):(u=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42);let c=n.TezosMessageUtils.findInt(e,s);s+=c.length;let l=n.TezosMessageUtils.findInt(e,s);s+=l.length;let p=n.TezosMessageUtils.findInt(e,s);s+=p.length;let f=n.TezosMessageUtils.findInt(e,s);s+=f.length;let h="";parseInt(i,16)<100&&(h=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42);let d=n.TezosMessageUtils.findInt(e,s);s+=d.length;let g=!1,b=!1;parseInt(i,16)<100&&(g=n.TezosMessageUtils.readBoolean(e.substring(s,s+2)),s+=2,b=n.TezosMessageUtils.readBoolean(e.substring(s,s+2)),s+=2);let m=n.TezosMessageUtils.readBoolean(e.substring(s,s+2));s+=2;let y="";m&&(y=n.TezosMessageUtils.readAddress(e.substring(s,s+42)),s+=42);let v=!0;parseInt(i,16)<100&&(v=n.TezosMessageUtils.readBoolean(e.substring(s,s+2)),s+=2);let _,P={};if(v){let t=parseInt(e.substring(s,s+8),16);s+=8;const r=o.TezosLanguageUtil.hexToMicheline(e.substring(s,s+2*t)).code;s+=2*t;let n=parseInt(e.substring(s,s+8),16);s+=8;const i=o.TezosLanguageUtil.hexToMicheline(e.substring(s,s+2*n)).code;s+=2*n,P=JSON.parse(`{ "script": [ ${r}, ${i} ] }`)}e.length>s&&(_=r(e.substring(s,s+2)));let $={kind:"origination",source:u,balance:d.value+"",delegate:m?y:void 0,fee:c.value+"",gas_limit:p.value+"",storage_limit:f.value+"",counter:l.value+"",script:v?P:void 0};parseInt(i,16)<100&&($.manager_pubkey=h,$.spendable=g,$.delegatable=b);return{operation:$,branch:a,next:_,nextoffset:_?s:-1}}function m(e){if("origination"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(s.origination);if(t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.balance)),void 0!==e.delegate?(t+=n.TezosMessageUtils.writeBoolean(!0),t+=n.TezosMessageUtils.writeAddress(e.delegate).slice(2)):t+=n.TezosMessageUtils.writeBoolean(!1),e.script){let r=[];r.push(e.script.code),r.push(e.script.storage),t+=r.map(o.TezosLanguageUtil.normalizePrimitiveRecordOrder).map(e=>o.TezosLanguageUtil.normalizeMichelineWhiteSpace(JSON.stringify(e))).map(e=>o.TezosLanguageUtil.translateMichelineToHex(e)).reduce((e,t)=>e+("0000000"+(t.length/2).toString(16)).slice(-8)+t,"")}return t}function y(e,t=!0){let o=t?e.substring(64,66):e.substring(0,2);if("delegation"!==r(o))throw new Error("Provided operation is not a delegation.");let i=0,s="";t?(s=n.TezosMessageUtils.readBranch(e.substring(i,i+64)),i+=66):i+=2;let a="";parseInt(o,16)<100?(a=n.TezosMessageUtils.readAddress(e.substring(i,i+44)),i+=44):(a=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42);let u=n.TezosMessageUtils.findInt(e,i);i+=u.length;let c=n.TezosMessageUtils.findInt(e,i);i+=c.length;let l=n.TezosMessageUtils.findInt(e,i);i+=l.length;let p=n.TezosMessageUtils.findInt(e,i);i+=p.length;let f=n.TezosMessageUtils.readBoolean(e.substring(i,i+2));i+=2;let h,d="";f&&(d=n.TezosMessageUtils.readAddress(e.substring(i,i+42)),i+=42),e.length>i&&(h=r(e.substring(i,i+2)));return{operation:{kind:"delegation",source:a,delegate:f?d:void 0,fee:u.value+"",gas_limit:l.value+"",storage_limit:p.value+"",counter:c.value+""},branch:s,next:h,nextoffset:h?i:-1}}function v(e){if("delegation"!==e.kind)throw new Error("Incorrect operation type");let t=n.TezosMessageUtils.writeInt(s.delegation);return t+=n.TezosMessageUtils.writeAddress(e.source).slice(2),t+=n.TezosMessageUtils.writeInt(parseInt(e.fee)),t+=n.TezosMessageUtils.writeInt(parseInt(e.counter)),t+=n.TezosMessageUtils.writeInt(parseInt(e.gas_limit)),t+=n.TezosMessageUtils.writeInt(parseInt(e.storage_limit)),void 0!==e.delegate&&""!==e.delegate?(t+=n.TezosMessageUtils.writeBoolean(!0),t+=n.TezosMessageUtils.writeAddress(e.delegate).slice(2)):t+=n.TezosMessageUtils.writeBoolean(!1),t}t.getOperationType=r,t.idFirstOperation=a,t.parseOperation=u,t.encodeOperation=function(e){if(e.hasOwnProperty("pkh")&&e.hasOwnProperty("secret"))return c(e);if(e.hasOwnProperty("kind")){const t=e;if("reveal"===t.kind)return h(e);if("transaction"===t.kind)return g(e);if("origination"===t.kind)return m(e);if("delegation"===t.kind)return v(e)}if(e.hasOwnProperty("vote"))return p(e);throw new Error("Unsupported message type")},t.encodeActivation=c,t.parseBallot=l,t.encodeBallot=p,t.parseReveal=f,t.encodeReveal=h,t.parseTransaction=d,t.encodeTransaction=g,t.parseOrigination=b,t.encodeOrigination=m,t.parseDelegation=y,t.encodeDelegation=v,t.parseOperationGroup=function(e){let t=[],r=u(e,a(e));t.push(r.operation);let n=0;for(;r.next;)n+=r.nextoffset,r=u(e.substring(n),r.next,!1),t.push(r.operation);return t}}(t.TezosMessageCodec||(t.TezosMessageCodec={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(18)),a=i(r(13));s.default.setFetch(window.fetch.bind(window)),a.default.setLogger(console),o(r(56),t),o(r(11),t),o(r(54),t),o(r(4),t),o(r(3),t),o(r(6),t),o(r(9),t),o(r(100),t),o(r(101),t),o(r(102),t),o(r(103),t),o(r(105),t),o(r(106),t),o(r(107),t),o(r(108),t),o(r(109),t),o(r(110),t),o(r(111),t),o(r(112),t),o(r(113),t),o(r(23),t),o(r(33),t),o(r(114),t),o(r(27),t),o(r(115),t),o(r(24),t),o(r(7),t),o(r(116),t),o(r(2),t),o(r(117),t),o(r(118),t),o(r(52),t)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosContractIntrospector=void 0;const a=r(23),u=r(11),c=i(r(97)),l=i(r(53));!function(e){function t(e){const t=new l.Parser(l.Grammar.fromCompiled(c.default));t.feed(u.TezosLanguageUtil.normalizeMichelineWhiteSpace(u.TezosLanguageUtil.stripComments(e)));const r=t.results[0];return 1===r.length&&(r[0].name="default"),r}function r(e){return t(u.TezosLanguageUtil.preProcessMichelsonScript(e)[0])}e.generateEntryPointsFromParams=t,e.generateEntryPointsFromCode=r,e.generateEntryPointsFromAddress=function(e,t,n){return s(this,void 0,void 0,(function*(){return r((yield a.TezosConseilClient.getAccount(e,t,n)).script)}))}}(t.TezosContractIntrospector||(t.TezosContractIntrospector={}))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),s=n[0],a=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,p=a>0?s-4:s;for(r=0;r<p;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(l(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=256*i+e[t+p],p+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+p],p+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=c}return(h?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=l?(a=0,s=l):s+p>=1?(a=(t*u-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+h]=255&s,h+=d,s/=256,c-=8);e[r+h-d]|=128*g}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};function s(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeywordForCode=t.getCodeForKeyword=t.setKeywordList=t.DefaultMichelsonKeywords=void 0;const a=r(4),u=i(r(32));t.DefaultMichelsonKeywords=['"parameter"','"storage"','"code"','"False"','"Elt"','"Left"','"None"','"Pair"','"Right"','"Some"','"True"','"Unit"','"PACK"','"UNPACK"','"BLAKE2B"','"SHA256"','"SHA512"','"ABS"','"ADD"','"AMOUNT"','"AND"','"BALANCE"','"CAR"','"CDR"','"CHECK_SIGNATURE"','"COMPARE"','"CONCAT"','"CONS"','"CREATE_ACCOUNT"','"CREATE_CONTRACT"','"IMPLICIT_ACCOUNT"','"DIP"','"DROP"','"DUP"','"EDIV"','"EMPTY_MAP"','"EMPTY_SET"','"EQ"','"EXEC"','"FAILWITH"','"GE"','"GET"','"GT"','"HASH_KEY"','"IF"','"IF_CONS"','"IF_LEFT"','"IF_NONE"','"INT"','"LAMBDA"','"LE"','"LEFT"','"LOOP"','"LSL"','"LSR"','"LT"','"MAP"','"MEM"','"MUL"','"NEG"','"NEQ"','"NIL"','"NONE"','"NOT"','"NOW"','"OR"','"PAIR"','"PUSH"','"RIGHT"','"SIZE"','"SOME"','"SOURCE"','"SENDER"','"SELF"','"STEPS_TO_QUOTA"','"SUB"','"SWAP"','"TRANSFER_TOKENS"','"SET_DELEGATE"','"UNIT"','"UPDATE"','"XOR"','"ITER"','"LOOP_LEFT"','"ADDRESS"','"CONTRACT"','"ISNAT"','"CAST"','"RENAME"','"bool"','"contract"','"int"','"key"','"key_hash"','"lambda"','"list"','"map"','"big_map"','"nat"','"option"','"or"','"pair"','"set"','"signature"','"string"','"bytes"','"mutez"','"timestamp"','"unit"','"operation"','"address"','"SLICE"','"DIG"','"DUG"','"EMPTY_BIG_MAP"','"APPLY"','"chain_id"','"CHAIN_ID"','"LEVEL"','"SELF_ADDRESS"','"never"','"NEVER"','"UNPAIR"','"VOTING_POWER"','"TOTAL_VOTING_POWER"','"KECCAK"','"SHA3"','"PAIRING_CHECK"','"bls12_381_g1"','"bls12_381_g2"','"bls12_381_fr"','"sapling_state"','"sapling_transaction"','"SAPLING_EMPTY_STATE"','"SAPLING_VERIFY_UPDATE"','"ticket"','"TICKET"','"READ_TICKET"','"SPLIT_TICKET"','"JOIN_TICKETS"','"GET_AND_UPDATE"','"chest"','"chest_key"','"OPEN_CHEST"','"VIEW"','"view"','"constant"','"SUB_MUTEZ"'];let c=[...t.DefaultMichelsonKeywords];t.setKeywordList=e=>{c=e};t.getCodeForKeyword=e=>c.indexOf(e);t.getKeywordForCode=e=>c[e];const l=u.compile({lbrace:"{",rbrace:"}",lbracket:"[",rbracket:"]",colon:":",comma:",",_:/[ \t]+/,quotedValue:/"(?:[^"\\]|\\.)*"/s}),p=e=>("00"+(0,t.getCodeForKeyword)(e).toString(16)).slice(-2),f=e=>("0000000"+e.toString(16)).slice(-8),h={Lexer:l,ParserRules:[{name:"main",symbols:["staticObject"],postprocess:s},{name:"main",symbols:["primAny"],postprocess:s},{name:"main",symbols:["anyArray"],postprocess:s},{name:"staticInt$ebnf$1",symbols:[]},{name:"staticInt$ebnf$1",symbols:["staticInt$ebnf$1",l.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticInt",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"int"'},"staticInt$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{const t=e[6].toString();return"00"+a.TezosMessageUtils.writeSignedInt(t.substring(1,t.length-1))}},{name:"staticString$ebnf$1",symbols:[]},{name:"staticString$ebnf$1",symbols:["staticString$ebnf$1",l.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticString",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"string"'},"staticString$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t=e[6].toString();t=t.substring(1,t.length-1),t=t.replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\\\/g,"\\");const r=f(t.length);return t=t.split("").map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join(""),"01"+r+t}},{name:"staticBytes$ebnf$1",symbols:[]},{name:"staticBytes$ebnf$1",symbols:["staticBytes$ebnf$1",l.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"staticBytes",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"bytes"'},"staticBytes$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t=e[6].toString();t=t.substring(1,t.length-1);return"0a"+f(t.length/2)+t}},{name:"staticObject",symbols:["staticInt"],postprocess:s},{name:"staticObject",symbols:["staticString"],postprocess:s},{name:"staticObject",symbols:["staticBytes"],postprocess:s},{name:"primBare$ebnf$1",symbols:[]},{name:"primBare$ebnf$1",symbols:["primBare$ebnf$1",l.has("_")?{type:"_"}:_],postprocess:e=>e[0].concat([e[1]])},{name:"primBare",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"prim"'},"primBare$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"03"+p(e[6].toString())},{name:"primArg$ebnf$1",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArg$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArg$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArg$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArg$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$1",symbols:["any","primArg$ebnf$3$subexpression$1$ebnf$1","primArg$ebnf$3$subexpression$1$ebnf$2"]},{name:"primArg$ebnf$3",symbols:["primArg$ebnf$3$subexpression$1"]},{name:"primArg$ebnf$3$subexpression$2$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArg$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$2$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArg$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArg$ebnf$3$subexpression$2",symbols:["any","primArg$ebnf$3$subexpression$2$ebnf$1","primArg$ebnf$3$subexpression$2$ebnf$2"]},{name:"primArg$ebnf$3",symbols:["primArg$ebnf$3","primArg$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArg",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"prim"'},"primArg$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("comma")?{type:"comma"}:comma,l.has("_")?{type:"_"}:_,{literal:'"args"'},"primArg$ebnf$2",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("_")?{type:"_"}:_,"primArg$ebnf$3",l.has("_")?{type:"_"}:_,l.has("rbracket")?{type:"rbracket"}:rbracket,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t="05";2==e[15].length?t="07":e[15].length>2&&(t="09");const r=p(e[6].toString());let n=e[15].map(e=>e[0]).join("");return"09"===t&&(n=("0000000"+(n.length/2).toString(16)).slice(-8)+n,n+="00000000"),t+r+n}},{name:"primAnn$ebnf$1",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primAnn$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primAnn$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$1",symbols:[l.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primAnn$ebnf$3$subexpression$1$ebnf$1","primAnn$ebnf$3$subexpression$1$ebnf$2"]},{name:"primAnn$ebnf$3",symbols:["primAnn$ebnf$3$subexpression$1"]},{name:"primAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primAnn$ebnf$3$subexpression$2",symbols:[l.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primAnn$ebnf$3$subexpression$2$ebnf$1","primAnn$ebnf$3$subexpression$2$ebnf$2"]},{name:"primAnn$ebnf$3",symbols:["primAnn$ebnf$3","primAnn$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primAnn",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"prim"'},"primAnn$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("comma")?{type:"comma"}:comma,l.has("_")?{type:"_"}:_,{literal:'"annots"'},"primAnn$ebnf$2",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("_")?{type:"_"}:_,"primAnn$ebnf$3",l.has("_")?{type:"_"}:_,l.has("rbracket")?{type:"rbracket"}:rbracket,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{const t=p(e[6].toString());let r=e[15].map(e=>{let t=e[0].toString();return t=t.substring(1,t.length-1),t}).join(" ");return r=r.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),r=f(r.length/2)+r,"04"+t+r}},{name:"primArgAnn$ebnf$1",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$3$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$1",symbols:["any","primArgAnn$ebnf$3$subexpression$1$ebnf$1","primArgAnn$ebnf$3$subexpression$1$ebnf$2"]},{name:"primArgAnn$ebnf$3",symbols:["primArgAnn$ebnf$3$subexpression$1"]},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$3$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$3$subexpression$2",symbols:["any","primArgAnn$ebnf$3$subexpression$2$ebnf$1","primArgAnn$ebnf$3$subexpression$2$ebnf$2"]},{name:"primArgAnn$ebnf$3",symbols:["primArgAnn$ebnf$3","primArgAnn$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArgAnn$ebnf$4",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$4",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$5$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$1",symbols:[l.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primArgAnn$ebnf$5$subexpression$1$ebnf$1","primArgAnn$ebnf$5$subexpression$1$ebnf$2"]},{name:"primArgAnn$ebnf$5",symbols:["primArgAnn$ebnf$5$subexpression$1"]},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"primArgAnn$ebnf$5$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"primArgAnn$ebnf$5$subexpression$2",symbols:[l.has("quotedValue")?{type:"quotedValue"}:quotedValue,"primArgAnn$ebnf$5$subexpression$2$ebnf$1","primArgAnn$ebnf$5$subexpression$2$ebnf$2"]},{name:"primArgAnn$ebnf$5",symbols:["primArgAnn$ebnf$5","primArgAnn$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"primArgAnn",symbols:[l.has("lbrace")?{type:"lbrace"}:lbrace,l.has("_")?{type:"_"}:_,{literal:'"prim"'},"primArgAnn$ebnf$1",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("quotedValue")?{type:"quotedValue"}:quotedValue,l.has("comma")?{type:"comma"}:comma,l.has("_")?{type:"_"}:_,{literal:'"args"'},"primArgAnn$ebnf$2",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("_")?{type:"_"}:_,"primArgAnn$ebnf$3",l.has("_")?{type:"_"}:_,l.has("rbracket")?{type:"rbracket"}:rbracket,l.has("comma")?{type:"comma"}:comma,l.has("_")?{type:"_"}:_,{literal:'"annots"'},"primArgAnn$ebnf$4",l.has("colon")?{type:"colon"}:colon,l.has("_")?{type:"_"}:_,l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("_")?{type:"_"}:_,"primArgAnn$ebnf$5",l.has("_")?{type:"_"}:_,l.has("rbracket")?{type:"rbracket"}:rbracket,l.has("_")?{type:"_"}:_,l.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>{let t="06";2==e[15].length?t="08":e[15].length>2&&(t="09");const r=p(e[6].toString());let n=e[15].map(e=>e[0]).join(""),o=e[26].map(e=>{let t=e[0].toString();return t=t.substring(1,t.length-1),t}).join(" ");return o=o.split("").map(e=>e.charCodeAt(0).toString(16)).join(""),o=f(o.length/2)+o,"09"===t&&(n=("0000000"+(n.length/2).toString(16)).slice(-8)+n),t+r+n+o}},{name:"primAny",symbols:["primBare"],postprocess:s},{name:"primAny",symbols:["primArg"],postprocess:s},{name:"primAny",symbols:["primAnn"],postprocess:s},{name:"primAny",symbols:["primArgAnn"],postprocess:s},{name:"any",symbols:["primAny"],postprocess:s},{name:"any",symbols:["staticObject"],postprocess:s},{name:"any",symbols:["anyArray"],postprocess:s},{name:"anyArray",symbols:[l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:function(e){return"0200000000"}},{name:"anyArray$ebnf$1$subexpression$1$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"anyArray$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$1$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"anyArray$ebnf$1$subexpression$1$ebnf$2",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$1",symbols:["any","anyArray$ebnf$1$subexpression$1$ebnf$1","anyArray$ebnf$1$subexpression$1$ebnf$2"]},{name:"anyArray$ebnf$1",symbols:["anyArray$ebnf$1$subexpression$1"]},{name:"anyArray$ebnf$1$subexpression$2$ebnf$1",symbols:[l.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"anyArray$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$2$ebnf$2",symbols:[l.has("_")?{type:"_"}:_],postprocess:s},{name:"anyArray$ebnf$1$subexpression$2$ebnf$2",symbols:[],postprocess:()=>null},{name:"anyArray$ebnf$1$subexpression$2",symbols:["any","anyArray$ebnf$1$subexpression$2$ebnf$1","anyArray$ebnf$1$subexpression$2$ebnf$2"]},{name:"anyArray$ebnf$1",symbols:["anyArray$ebnf$1","anyArray$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"anyArray",symbols:[l.has("lbracket")?{type:"lbracket"}:lbracket,l.has("_")?{type:"_"}:_,"anyArray$ebnf$1",l.has("_")?{type:"_"}:_,l.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>{const t=e[2].map(e=>e[0]).join("");return"02"+f(t.length/2)+t}}],ParserStart:"main"};t.default=h},function(e,t,r){"use strict";var n=r(61),o=r(90);e.exports=o((function(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},function(e,t,r){"use strict";var n=r(1),o=r(62),i=r(72),s=r(73),a=r(78);function u(e){a.call(this,"digest"),this._hash=e}n(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new o:"rmd160"===e||"ripemd160"===e?new i:new u(s(e))}},function(e,t,r){"use strict";var n=r(1),o=r(36),i=r(8).Buffer,s=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,o,i,s){return u(e+(t&r|~t&n)+o+i|0,s)+t|0}function l(e,t,r,n,o,i,s){return u(e+(t&n|r&~n)+o+i|0,s)+t|0}function p(e,t,r,n,o,i,s){return u(e+(t^r^n)+o+i|0,s)+t|0}function f(e,t,r,n,o,i,s){return u(e+(r^(t|~n))+o+i|0,s)+t|0}n(a,o),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,o=this._c,i=this._d;r=c(r,n,o,i,e[0],3614090360,7),i=c(i,r,n,o,e[1],3905402710,12),o=c(o,i,r,n,e[2],606105819,17),n=c(n,o,i,r,e[3],3250441966,22),r=c(r,n,o,i,e[4],4118548399,7),i=c(i,r,n,o,e[5],1200080426,12),o=c(o,i,r,n,e[6],2821735955,17),n=c(n,o,i,r,e[7],4249261313,22),r=c(r,n,o,i,e[8],1770035416,7),i=c(i,r,n,o,e[9],2336552879,12),o=c(o,i,r,n,e[10],4294925233,17),n=c(n,o,i,r,e[11],2304563134,22),r=c(r,n,o,i,e[12],1804603682,7),i=c(i,r,n,o,e[13],4254626195,12),o=c(o,i,r,n,e[14],2792965006,17),r=l(r,n=c(n,o,i,r,e[15],1236535329,22),o,i,e[1],4129170786,5),i=l(i,r,n,o,e[6],3225465664,9),o=l(o,i,r,n,e[11],643717713,14),n=l(n,o,i,r,e[0],3921069994,20),r=l(r,n,o,i,e[5],3593408605,5),i=l(i,r,n,o,e[10],38016083,9),o=l(o,i,r,n,e[15],3634488961,14),n=l(n,o,i,r,e[4],3889429448,20),r=l(r,n,o,i,e[9],568446438,5),i=l(i,r,n,o,e[14],3275163606,9),o=l(o,i,r,n,e[3],4107603335,14),n=l(n,o,i,r,e[8],1163531501,20),r=l(r,n,o,i,e[13],2850285829,5),i=l(i,r,n,o,e[2],4243563512,9),o=l(o,i,r,n,e[7],1735328473,14),r=p(r,n=l(n,o,i,r,e[12],2368359562,20),o,i,e[5],4294588738,4),i=p(i,r,n,o,e[8],2272392833,11),o=p(o,i,r,n,e[11],1839030562,16),n=p(n,o,i,r,e[14],4259657740,23),r=p(r,n,o,i,e[1],2763975236,4),i=p(i,r,n,o,e[4],1272893353,11),o=p(o,i,r,n,e[7],4139469664,16),n=p(n,o,i,r,e[10],3200236656,23),r=p(r,n,o,i,e[13],681279174,4),i=p(i,r,n,o,e[0],3936430074,11),o=p(o,i,r,n,e[3],3572445317,16),n=p(n,o,i,r,e[6],76029189,23),r=p(r,n,o,i,e[9],3654602809,4),i=p(i,r,n,o,e[12],3873151461,11),o=p(o,i,r,n,e[15],530742520,16),r=f(r,n=p(n,o,i,r,e[2],3299628645,23),o,i,e[0],4096336452,6),i=f(i,r,n,o,e[7],1126891415,10),o=f(o,i,r,n,e[14],2878612391,15),n=f(n,o,i,r,e[5],4237533241,21),r=f(r,n,o,i,e[12],1700485571,6),i=f(i,r,n,o,e[3],2399980690,10),o=f(o,i,r,n,e[10],4293915773,15),n=f(n,o,i,r,e[1],2240044497,21),r=f(r,n,o,i,e[8],1873313359,6),i=f(i,r,n,o,e[15],4264355552,10),o=f(o,i,r,n,e[6],2734768916,15),n=f(n,o,i,r,e[13],1309151649,21),r=f(r,n,o,i,e[4],4149444226,6),i=f(i,r,n,o,e[11],3174756917,10),o=f(o,i,r,n,e[2],718787259,15),n=f(n,o,i,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+o|0,this._d=this._d+i|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},function(e,t,r){(t=e.exports=r(37)).Stream=t,t.Readable=t,t.Writable=r(41),t.Duplex=r(16),t.Transform=r(43),t.PassThrough=r(70),t.finished=r(28),t.pipeline=r(71)},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var u=r(0).Buffer,c=r(66).inspect,l=c&&c.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t,r,n,o=u.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=o,n=s,u.prototype.copy.call(t,r,n),s+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return c(this,o(o({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t){},function(e,t,r){var n=r(0),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t){var n;function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(28),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),p=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function d(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[l]=null,e[s]=null,e[a]=null,t(h(r,!1)))}}function g(e){t.nextTick(d,e)}var b=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((o(n={get stream(){return this[f]},next:function(){var e=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[u]?n(e[u]):r(h(void 0,!0))}))}));var n,o=this[l];if(o)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(h(void 0,!0)):t[p](r,n)}),n)}}(o,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(h(i,!1));n=new Promise(this[p])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(h(void 0,!0))}))}))})),n),b);e.exports=function(e){var t,r=Object.create(m,(o(t={},f,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,p,{value:function(e,t){var n=r[f].read();n?(r[l]=null,r[s]=null,r[a]=null,e(h(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[l]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[s]=null,r[a]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[a]=null,n(h(void 0,!0))),r[c]=!0})),e.on("readable",g.bind(null,r)),r}}).call(this,r(10))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=o;var n=r(43);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(1)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var o=r(15).codes,i=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(28)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);a=!0,i()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function p(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=p(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var s=t.map((function(e,r){var i=r<t.length-1;return u(e,i,r>0,(function(e){n||(n=e),e&&s.forEach(c),i||(s.forEach(c),o(n))}))}));return t.reduce(l)}},function(e,t,r){"use strict";var n=r(0).Buffer,o=r(1),i=r(36),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(e,t){return e<<t|e>>>32-t}function g(e,t,r,n,o,i,s,a){return d(e+(t^r^n)+i+s|0,a)+o|0}function b(e,t,r,n,o,i,s,a){return d(e+(t&r|~t&n)+i+s|0,a)+o|0}function m(e,t,r,n,o,i,s,a){return d(e+((t|~r)^n)+i+s|0,a)+o|0}function y(e,t,r,n,o,i,s,a){return d(e+(t&n|r&~n)+i+s|0,a)+o|0}function v(e,t,r,n,o,i,s,a){return d(e+(t^(r|~n))+i+s|0,a)+o|0}o(h,i),h.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,o=0|this._c,i=0|this._d,h=0|this._e,_=0|this._a,P=0|this._b,$=0|this._c,A=0|this._d,S=0|this._e,T=0;T<80;T+=1){var w,E;T<16?(w=g(r,n,o,i,h,e[a[T]],p[0],c[T]),E=v(_,P,$,A,S,e[u[T]],f[0],l[T])):T<32?(w=b(r,n,o,i,h,e[a[T]],p[1],c[T]),E=y(_,P,$,A,S,e[u[T]],f[1],l[T])):T<48?(w=m(r,n,o,i,h,e[a[T]],p[2],c[T]),E=m(_,P,$,A,S,e[u[T]],f[2],l[T])):T<64?(w=y(r,n,o,i,h,e[a[T]],p[3],c[T]),E=b(_,P,$,A,S,e[u[T]],f[3],l[T])):(w=v(r,n,o,i,h,e[a[T]],p[4],c[T]),E=g(_,P,$,A,S,e[u[T]],f[4],l[T])),r=h,h=i,i=d(o,10),o=n,n=w,_=S,S=A,A=d($,10),$=P,P=E}var I=this._b+o+A|0;this._b=this._c+i+S|0,this._c=this._d+h+_|0,this._d=this._e+r+P|0,this._e=this._a+n+$|0,this._a=I},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=h},function(e,t,r){(t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r}).sha=r(74),t.sha1=r(75),t.sha224=r(76),t.sha256=r(44),t.sha384=r(77),t.sha512=r(45)},function(e,t,r){var n=r(1),o=r(17),i=r(8).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e){return e<<30|e>>>2}function l(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,a=0|this._d,u=0|this._e,p=0;p<16;++p)r[p]=e.readInt32BE(4*p);for(;p<80;++p)r[p]=r[p-3]^r[p-8]^r[p-14]^r[p-16];for(var f=0;f<80;++f){var h=~~(f/20),d=0|((t=n)<<5|t>>>27)+l(h,o,i,a)+u+r[f]+s[h];u=a,a=i,i=c(o),o=n,n=d}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(1),o=r(17),i=r(8).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function c(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function p(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,a=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=e.readInt32BE(4*f);for(;f<80;++f)r[f]=(t=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|t>>>31;for(var h=0;h<80;++h){var d=~~(h/20),g=c(n)+p(d,o,i,a)+u+r[h]+s[d]|0;u=a,a=i,i=l(o),o=n,n=g}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(1),o=r(44),i=r(17),s=r(8).Buffer,a=new Array(64);function u(){this.init(),this._w=a,i.call(this,64,56)}n(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u},function(e,t,r){var n=r(1),o=r(45),i=r(17),s=r(8).Buffer,a=new Array(160);function u(){this.init(),this._w=a,i.call(this,128,112)}n(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u},function(e,t,r){var n=r(8).Buffer,o=r(79).Transform,i=r(20).StringDecoder;function s(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(1)(s,o),s.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var o=this._update(e);return this.hashMode?this:(r&&(o=this._toString(o,r)),o)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=s},function(e,t,r){e.exports=o;var n=r(19).EventEmitter;function o(){n.call(this)}r(1)(o,n),o.Readable=r(29),o.Writable=r(86),o.Duplex=r(87),o.Transform=r(88),o.PassThrough=r(89),o.Stream=o,o.prototype.pipe=function(e,t){var r=this;function o(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",o),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",o),e.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},function(e,t){},function(e,t,r){"use strict";var n=r(30).Buffer,o=r(82);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);for(var t,r,o,i=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,o=a,t.copy(r,o),a+=s.data.length,s=s.next;return i},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(84),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(12))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,s,a,u=1,c={},l=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){i.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(o=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(s+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return c[u]=o,n(u),u++},f.clearImmediate=h}function h(e){delete c[e]}function d(e){if(l)setTimeout(d,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(12),r(10))},function(e,t,r){"use strict";e.exports=i;var n=r(49),o=Object.create(r(21));function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}o.inherits=r(1),o.inherits(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(31)},function(e,t,r){e.exports=r(14)},function(e,t,r){e.exports=r(29).Transform},function(e,t,r){e.exports=r(29).PassThrough},function(e,t,r){"use strict";var n=r(91),o=r(8).Buffer;e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),o=e(r);if(!(n[0]^o[0]|n[1]^o[1]|n[2]^o[2]|n[3]^o[3]))return r}return{encode:function(t){var r=e(t);return n.encode(o.concat([t,r],t.length+4))},decode:function(e){var r=t(n.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},function(e,t,r){var n=r(92);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(e,t,r){"use strict";var n=r(8).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=o}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function p(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,o=0,i=0;e[r]===u;)o++,r++;for(var s=(e.length-r)*c+1>>>0,l=new Uint8Array(s);e[r];){var p=t[e.charCodeAt(r)];if(255===p)return;for(var f=0,h=s-1;(0!==p||f<i)&&-1!==h;h--,f++)p+=a*l[h]>>>0,l[h]=p%256>>>0,p=p/256>>>0;if(0!==p)throw new Error("Non-zero carry");i=f,r++}for(var d=s-i;d!==s&&0===l[d];)d++;var g=n.allocUnsafe(o+(s-d));g.fill(0,0,o);for(var b=o;d!==s;)g[b++]=l[d++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,o=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var c=(s-i)*l+1>>>0,p=new Uint8Array(c);i!==s;){for(var f=t[i],h=0,d=c-1;(0!==f||h<o)&&-1!==d;d--,h++)f+=256*p[d]>>>0,p[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,i++}for(var g=c-o;g!==c&&0===p[g];)g++;for(var b=u.repeat(r);g<c;++g)b+=e.charAt(p[g]);return b},decodeUnsafe:p,decode:function(e){var t=p(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(51);function o(e,t,r){var n=e[t]+e[r],o=e[t+1]+e[r+1];n>=4294967296&&o++,e[t]=n,e[t+1]=o}function i(e,t,r,n){var o=e[t]+r;r<0&&(o+=4294967296);var i=e[t+1]+n;o>=4294967296&&i++,e[t]=o,e[t+1]=i}function s(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,r,n,s,a){var u=p[s],c=p[s+1],f=p[a],h=p[a+1];o(l,e,t),i(l,e,u,c);var d=l[n]^l[e],g=l[n+1]^l[e+1];l[n]=g,l[n+1]=d,o(l,r,n),d=l[t]^l[r],g=l[t+1]^l[r+1],l[t]=d>>>24^g<<8,l[t+1]=g>>>24^d<<8,o(l,e,t),i(l,e,f,h),d=l[n]^l[e],g=l[n+1]^l[e+1],l[n]=d>>>16^g<<16,l[n+1]=g>>>16^d<<16,o(l,r,n),d=l[t]^l[r],g=l[t+1]^l[r+1],l[t]=g>>>31^d<<1,l[t+1]=d>>>31^g<<1}var u=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),l=new Uint32Array(32),p=new Uint32Array(32);function f(e,t){var r=0;for(r=0;r<16;r++)l[r]=e.h[r],l[r+16]=u[r];for(l[24]=l[24]^e.t,l[25]=l[25]^e.t/4294967296,t&&(l[28]=~l[28],l[29]=~l[29]),r=0;r<32;r++)p[r]=s(e.b,4*r);for(r=0;r<12;r++)a(0,8,16,24,c[16*r+0],c[16*r+1]),a(2,10,18,26,c[16*r+2],c[16*r+3]),a(4,12,20,28,c[16*r+4],c[16*r+5]),a(6,14,22,30,c[16*r+6],c[16*r+7]),a(0,10,20,30,c[16*r+8],c[16*r+9]),a(2,12,22,24,c[16*r+10],c[16*r+11]),a(4,14,16,26,c[16*r+12],c[16*r+13]),a(6,8,18,28,c[16*r+14],c[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^l[r]^l[r+16]}function h(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},n=0;n<16;n++)r.h[n]=u[n];var o=t?t.length:0;return r.h[0]^=16842752^o<<8^e,t&&(d(r,t),r.c=128),r}function d(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,f(e,!1),e.c=0),e.b[e.c++]=t[r]}function g(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;f(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function b(e,t,r){r=r||64,e=n.normalizeInput(e);var o=h(r,t);return d(o,e),g(o)}e.exports={blake2b:b,blake2bHex:function(e,t,r){var o=b(e,t,r);return n.toHex(o)},blake2bInit:h,blake2bUpdate:d,blake2bFinal:g}},function(e,t,r){var n=r(51);function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function i(e,t,r,n,o,i){c[e]=c[e]+c[t]+o,c[n]=s(c[n]^c[e],16),c[r]=c[r]+c[n],c[t]=s(c[t]^c[r],12),c[e]=c[e]+c[t]+i,c[n]=s(c[n]^c[e],8),c[r]=c[r]+c[n],c[t]=s(c[t]^c[r],7)}function s(e,t){return e>>>t^e<<32-t}var a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),l=new Uint32Array(16);function p(e,t){var r=0;for(r=0;r<8;r++)c[r]=e.h[r],c[r+8]=a[r];for(c[12]^=e.t,c[13]^=e.t/4294967296,t&&(c[14]=~c[14]),r=0;r<16;r++)l[r]=o(e.b,4*r);for(r=0;r<10;r++)i(0,4,8,12,l[u[16*r+0]],l[u[16*r+1]]),i(1,5,9,13,l[u[16*r+2]],l[u[16*r+3]]),i(2,6,10,14,l[u[16*r+4]],l[u[16*r+5]]),i(3,7,11,15,l[u[16*r+6]],l[u[16*r+7]]),i(0,5,10,15,l[u[16*r+8]],l[u[16*r+9]]),i(1,6,11,12,l[u[16*r+10]],l[u[16*r+11]]),i(2,7,8,13,l[u[16*r+12]],l[u[16*r+13]]),i(3,4,9,14,l[u[16*r+14]],l[u[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=c[r]^c[r+8]}function f(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(a),b:new Uint32Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(h(n,t),n.c=64),n}function h(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,p(e,!1),e.c=0),e.b[e.c++]=t[r]}function d(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;p(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function g(e,t,r){r=r||32,e=n.normalizeInput(e);var o=f(r,t);return h(o,e),d(o)}e.exports={blake2s:g,blake2sHex:function(e,t,r){var o=g(e,t,r);return n.toHex(o)},blake2sInit:f,blake2sUpdate:h,blake2sFinal:d}},function(e,t,r){"use strict";function n(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const o=r(32),i=/SET_C[AD]+R/,s=/DII+P/,a=/DUU+P/,u=new RegExp(s),c=new RegExp(a),l=["ASSERT","ASSERT_EQ","ASSERT_NEQ","ASSERT_GT","ASSERT_LT","ASSERT_GE","ASSERT_LE","ASSERT_NONE","ASSERT_SOME","ASSERT_LEFT","ASSERT_RIGHT","ASSERT_CMPEQ","ASSERT_CMPNEQ","ASSERT_CMPGT","ASSERT_CMPLT","ASSERT_CMPGE","ASSERT_CMPLE"],p=["IFCMPEQ","IFCMPNEQ","IFCMPLT","IFCMPGT","IFCMPLE","IFCMPGE"],f=["CMPEQ","CMPNEQ","CMPLT","CMPGT","CMPLE","CMPGE"],h=["IFEQ","IFNEQ","IFLT","IFGT","IFLE","IFGE"],d=o.compile({annot:/[\@\%\:][a-z_A-Z0-9]+/,lparen:"(",rparen:")",lbrace:"{",rbrace:"}",ws:/[ \t]+/,semicolon:";",bytes:/0x[0-9a-fA-F]+/,number:/-?[0-9]+(?!x)/,parameter:["parameter","Parameter"],storage:["Storage","storage"],code:["Code","code"],comparableType:["int","nat","string","bytes","mutez","bool","key_hash","timestamp","chain_id","never"],constantType:["key","unit","signature","operation","address","bls12_381_fr","bls12_381_g1","bls12_381_g2","chest","chest_key"],singleArgType:["option","list","set","contract","ticket"],doubleArgType:["pair","or","lambda","map","big_map"],baseInstruction:["ABS","ADD","ADDRESS","AMOUNT","AND","BALANCE","BLAKE2B","CAR","CAST","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CONTRACT","DIP","EDIV","EMPTY_SET","EQ","EXEC","FAIL","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","IF_RIGHT","IMPLICIT_ACCOUNT","INT","ISNAT","ITER","LAMBDA","LE","LEFT","LOOP","LOOP_LEFT","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PACK","PAIR","REDUCE","RENAME","RIGHT","SELF","SENDER","SET_DELEGATE","SHA256","SHA512","SIZE","SLICE","SOME","SOURCE","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","UNIT","UNPACK","UPDATE","XOR","UNPAIR","UNPAPAIR","IF_SOME","IFCMPEQ","IFCMPNEQ","IFCMPLT","IFCMPGT","IFCMPLE","IFCMPGE","CMPEQ","CMPNEQ","CMPLT","CMPGT","CMPLE","CMPGE","IFEQ","NEQ","IFLT","IFGT","IFLE","IFGE","EMPTY_BIG_MAP","APPLY","CHAIN_ID","KECCAK","SHA3","PAIRING_CHECK","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","GET_AND_UPDATE","NEVER","VOTING_POWER","TOTAL_VOTING_POWER","TICKET","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","SELF_ADDRESS","LEVEL","OPEN_CHEST","VIEW","SUB_MUTEZ"],macroCADR:/C[AD]+R/,macroDIP:s,macroDUP:a,macroSETCADR:i,macroASSERTlist:l,constantData:["Unit","True","False","None","instruction"],singleArgData:["Left","Right","Some"],doubleArgData:["Pair"],elt:"Elt",word:/[a-zA-Z_0-9]+/,string:/"(?:[^"\\]|\\.)*"/s}),g=e=>new RegExp("^C(A|D)(A|D)+R$").test(e),b=e=>f.includes(e),m=e=>c.test(e),y=e=>l.includes(e),v=e=>"FAIL"===e,_=e=>p.includes(e)||h.includes(e)||"IF_SOME"===e,P=(e,t,r,n)=>{const o=n?`, "annots": [${n}]`:"";switch(e){case"IFCMPEQ":return`[{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPGE":return`[{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPGT":return`[{"prim":"COMPARE"},{"prim":"GT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPLE":return`[{"prim":"COMPARE"},{"prim":"LE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPLT":return`[{"prim":"COMPARE"},{"prim":"LT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFCMPNEQ":return`[{"prim":"COMPARE"},{"prim":"NEQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFEQ":return`[{"prim":"EQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFGE":return`[{"prim":"GE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFGT":return`[{"prim":"GT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFLE":return`[{"prim":"LE"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFLT":return`[{"prim":"LT"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IFNEQ":return`[{"prim":"NEQ"},{"prim":"IF","args":[ [${t}] , [${r}]]${o}}]`;case"IF_SOME":return`[{"prim":"IF_NONE","args":[ [${r}], [${t}]]${o}}]`;default:throw new Error("Could not process "+e)}},$=e=>u.test(e),A=(e,t,r)=>{let n="";if(u.test(e)){const o=e.length-2;for(let e=0;e<o;e++)n+='[{ "prim": "DIP", "args": [ ';n=`${n} [ ${t} ] ]`,r&&(n=`${n}, "annots": [${r}]`),n+=" }]";for(let e=0;e<o-1;e++)n+=" ] }]";return n}throw new Error("Unexpected parameter for DIP processing: "+e)},S=e=>"UNPAIR"==e||"UNPAPAIR"==e,T=e=>i.test(e),w=e=>{if(0===e.length)return"";const t=e.charAt(0);if(1===e.length){if("A"===t)return'[{"prim": "CDR","annots":["@%%"]}, {"prim": "SWAP"}, {"prim": "PAIR","annots":["%","%@"]}]';if("D"===t)return'[{"prim": "CAR","annots":["@%%"]}, {"prim": "PAIR","annots":["%@","%"]}]'}return"A"===t?`[{"prim": "DUP"}, {"prim": "DIP", "args": [[{"prim": "CAR","annots":["@%%"]}, ${w(e.slice(1))}]]}, {"prim": "CDR","annots":["@%%"]}, {"prim": "SWAP"}, {"prim": "PAIR","annots":["%@","%@"]}]`:"D"===t?`[{"prim": "DUP"}, {"prim": "DIP", "args": [[{"prim": "CDR","annots":["@%%"]}, ${w(e.slice(1))}]]}, {"prim": "CAR","annots":["@%%"]}, {"prim": "PAIR","annots":["%@","%@"]}]`:void 0},E=e=>!!y(e)||(!!b(e)||(!!$(e)||(!!m(e)||(!!v(e)||(!!_(e)||(!!g(e)||(!!S(e)||(!!T(e)||void 0)))))))),I=(e,t)=>g(e)?((e,t)=>{var r=e.slice(1,-1).split("").map(e=>"A"===e?'{ "prim": "CAR" }':'{ "prim": "CDR" }');if(null!=t){const n=e.slice(-2,-1);"A"===n?r[r.length-1]=`{ "prim": "CAR", "annots": [${t}] }`:"D"===n&&(r[r.length-1]=`{ "prim": "CDR", "annots": [${t}] }`)}return`[${r.join(", ")}]`})(e,t):y(e)?((e,t)=>{const r=t?`, "annots": [${t}]`:"";switch(e){case"ASSERT":return`[{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPEQ":return`[[{"prim":"COMPARE"},{"prim":"EQ"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPGE":return`[[{"prim":"COMPARE"},{"prim":"GE"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPGT":return`[[{"prim":"COMPARE"},{"prim":"GT"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPLE":return`[[{"prim":"COMPARE"},{"prim":"LE"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPLT":return`[[{"prim":"COMPARE"},{"prim":"LT"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_CMPNEQ":return`[[{"prim":"COMPARE"},{"prim":"NEQ"}],{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_EQ":return`[{"prim":"EQ"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]]`;case"ASSERT_GE":return`[{"prim":"GE"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_GT":return`[{"prim":"GT"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_LE":return`[{"prim":"LE"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_LT":return`[{"prim":"LT"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_NEQ":return`[{"prim":"NEQ"},{"prim":"IF","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"${r}}]]]}]`;case"ASSERT_NONE":return'[{"prim":"IF_NONE","args":[[],[[{"prim":"UNIT"},{"prim":"FAILWITH"}]]]}]';case"ASSERT_SOME":return'[{"prim":"IF_NONE","args":[[[{"prim":"UNIT"},{"prim":"FAILWITH"}]],[]]}]';case"ASSERT_LEFT":case"ASSERT_RIGHT":return"";default:throw new Error("Could not process "+e)}})(e,t):b(e)?((e,t)=>{var r=e.substring(3),n=C([""+r]);return null!=t&&(n=`{ "prim": "${r}", "annots": [${t}] }`),`[${C(["COMPARE"])}, ${n}]`})(e,t):$(e)?A(e,t):m(e)?((e,t)=>{let r="";if(c.test(e)){const n=e.length-3;for(let e=0;e<n;e++)r+='[{ "prim": "DIP", "args": [ ';r+=null==t?'[{ "prim": "DUP" }]':`[{ "prim": "DUP", "annots": [${t}] }]`;for(let e=0;e<n;e++)r+=' ] },{"prim":"SWAP"}]';return r}throw new Error("")})(e,t):v(e)?((e,t)=>null==t?'[ { "prim": "UNIT" }, { "prim": "FAILWITH" } ]':`[ { "prim": "UNIT" }, { "prim": "FAILWITH", "annots": [${t}] } ]`)(0,t):_(e)?P(e,t):S(e)?((e,t)=>"UNPAIR"==e?null==t?'[ [ { "prim": "DUP" }, { "prim": "CAR" }, { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ] ]':1==t.length?`[ [ { "prim": "DUP" }, { "prim": "CAR", "annots": [${t}] }, { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ]  } ] ]`:2==t.length?`[ [ { "prim": "DUP" }, { "prim": "CAR", "annots": [${t[0]}] }, { "prim": "DIP", "args": [ [ { "prim": "CDR", "annots": [${t[1]}] } ] ]  } ] ]`:"":"UNPAPAIR"==e?null==t?'[ [ { "prim": "DUP" },\n                            { "prim": "CAR" },\n                            { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ],\n                            {"prim":"DIP","args":[[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"DIP","args":[[{"prim":"CDR"}]]}]]]}]':`[ [ { "prim": "DUP" },\n                            { "prim": "CAR" },\n                            { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ],\n                            {"prim":"DIP","args":[[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"DIP","args":[[{"prim":"CDR"}]],"annots": [${t}]}]]]}]`:void 0)(e,t):T(e)?((e,t)=>w(e.slice(5,-1)))(e):void 0,D=e=>`{ "int": "${e[0]}" }`,R=e=>`{ "string": ${e[0]} }`,C=e=>{const t=e[0].toString();if(1==e.length)return E(t)?I(t,null):`{ "prim": "${e[0]}" }`;{const r=e[1].map(e=>`"${e[1]}"`);return E(t)?[I(t,r)]:`{ "prim": "${e[0]}", "annots": [${r}] }`}},O=e=>`{ "prim": "${e[0]}", "args": [ ${e[2]} ] }`,U=e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "annots": [${t}]  }`},N=e=>{const t=""+e[0].toString(),r=e[1].map(e=>`"${e[1]}"`);return $(t)?A(t,e[2],r):`{ "prim": "${e[0]}", "args": [ ${e[3]} ], "annots": [${r}] }`},M=e=>`{ "prim": "${e[2]}", "args": [ ${e[4+(7===e.length?0:2)]} ] }`,x=e=>7===e.length?`{ "prim": "${e[0]}", "args": [ ${e[2]}, [] ] }`:`{ "prim": "${e[0]}", "args": [ ${e[2]}, ${e[4]} ] }`,k=e=>`{ "prim": "${e[2]}", "args": [ ${e[4]}, ${e[6]} ] }`,F=e=>Array.isArray(e)&&Array.isArray(e[0])?e[0]:e,z=e=>""+e[2].map(e=>e[0]).map(e=>F(e)),B=e=>`[ ${e[2].map(e=>e[0]).map(e=>F(e))} ]`,L=e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "${e[0]}", "args": [ ${e[4]}, ${e[6]} ], "annots": [${t}]  }`},j=e=>{if(7==e.length){const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ { "int": "${e[5]}" } ], "annots": [${t}] }`}return`{ "prim": "${e[2]}", "args": [ { "int": "${e[4]}" } ] }`},W=e=>`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" } ] }`,G={Lexer:d,ParserRules:[{name:"main",symbols:["instruction"],postprocess:n},{name:"main",symbols:["data"],postprocess:n},{name:"main",symbols:["type"],postprocess:n},{name:"main",symbols:["parameter"],postprocess:n},{name:"main",symbols:["storage"],postprocess:n},{name:"main",symbols:["code"],postprocess:n},{name:"main",symbols:["script"],postprocess:n},{name:"main",symbols:["parameterValue"],postprocess:n},{name:"main",symbols:["storageValue"],postprocess:n},{name:"main",symbols:["typeData"],postprocess:n},{name:"script",symbols:["parameter","_","storage","_","code"],postprocess:e=>`[ ${e[0]}, ${e[2]}, { "prim": "code", "args": [ [ ${e[4]} ] ] } ]`},{name:"parameterValue",symbols:[d.has("parameter")?{type:"parameter"}:parameter,"_","typeData","_","semicolons"],postprocess:O},{name:"storageValue",symbols:[d.has("storage")?{type:"storage"}:storage,"_","typeData","_","semicolons"],postprocess:O},{name:"parameter",symbols:[d.has("parameter")?{type:"parameter"}:parameter,"_","type","_","semicolons"],postprocess:O},{name:"storage",symbols:[d.has("storage")?{type:"storage"}:storage,"_","type","_","semicolons"],postprocess:O},{name:"code",symbols:[d.has("code")?{type:"code"}:code,"_","subInstruction","_","semicolons","_"],postprocess:e=>e[2]},{name:"code",symbols:[d.has("code")?{type:"code"}:code,"_",{literal:"{};"}],postprocess:e=>"code {}"},{name:"type",symbols:[d.has("comparableType")?{type:"comparableType"}:comparableType],postprocess:C},{name:"type",symbols:[d.has("constantType")?{type:"constantType"}:constantType],postprocess:C},{name:"type",symbols:[d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","type"],postprocess:O},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_",d.has("lparen")?{type:"lparen"}:lparen,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen,"_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"type",symbols:[d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","type","_","type"],postprocess:x},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","type","_","type","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:k},{name:"type$ebnf$1$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$1",symbols:["type$ebnf$1$subexpression$1"]},{name:"type$ebnf$1$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$1",symbols:["type$ebnf$1","type$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("comparableType")?{type:"comparableType"}:comparableType,"type$ebnf$1"],postprocess:C},{name:"type$ebnf$2$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$2",symbols:["type$ebnf$2$subexpression$1"]},{name:"type$ebnf$2$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$2",symbols:["type$ebnf$2","type$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("constantType")?{type:"constantType"}:constantType,"type$ebnf$2"],postprocess:C},{name:"type$ebnf$3$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$3",symbols:["type$ebnf$3$subexpression$1"]},{name:"type$ebnf$3$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$3",symbols:["type$ebnf$3","type$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("comparableType")?{type:"comparableType"}:comparableType,"type$ebnf$3","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:U},{name:"type$ebnf$4$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$4",symbols:["type$ebnf$4$subexpression$1"]},{name:"type$ebnf$4$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$4",symbols:["type$ebnf$4","type$ebnf$4$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("constantType")?{type:"constantType"}:constantType,"type$ebnf$4","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:U},{name:"type$ebnf$5$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$5",symbols:["type$ebnf$5$subexpression$1"]},{name:"type$ebnf$5$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$5",symbols:["type$ebnf$5","type$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"type$ebnf$5","_","type",d.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ ${e[5]} ], "annots": [${t}]  }`}},{name:"type$ebnf$6$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$6",symbols:["type$ebnf$6$subexpression$1"]},{name:"type$ebnf$6$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$6",symbols:["type$ebnf$6","type$ebnf$6$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"type$ebnf$6","_","type","_","type",d.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>{const t=e[3].map(e=>`"${e[1]}"`);return`{ "prim": "${e[2]}", "args": [ ${e[5]}, ${e[7]} ], "annots": [${t}]  }`}},{name:"type$ebnf$7$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$7",symbols:["type$ebnf$7$subexpression$1"]},{name:"type$ebnf$7$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$7",symbols:["type$ebnf$7","type$ebnf$7$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_state"},"type$ebnf$7","_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:j},{name:"type$ebnf$8$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$8",symbols:["type$ebnf$8$subexpression$1"]},{name:"type$ebnf$8$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"type$ebnf$8",symbols:["type$ebnf$8","type$ebnf$8$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_transaction"},"type$ebnf$8","_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:j},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_state"},"_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:j},{name:"type",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",{literal:"sapling_transaction"},"_",d.has("number")?{type:"number"}:number,d.has("rparen")?{type:"rparen"}:rparen],postprocess:j},{name:"typeData",symbols:[d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","typeData"],postprocess:O},{name:"typeData",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("singleArgType")?{type:"singleArgType"}:singleArgType,"_","typeData","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:M},{name:"typeData",symbols:[d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","typeData","_","typeData"],postprocess:x},{name:"typeData",symbols:[d.has("lparen")?{type:"lparen"}:lparen,"_",d.has("doubleArgType")?{type:"doubleArgType"}:doubleArgType,"_","typeData","_","typeData","_",d.has("rparen")?{type:"rparen"}:rparen],postprocess:k},{name:"typeData",symbols:["subTypeData"],postprocess:n},{name:"typeData",symbols:["subTypeElt"],postprocess:n},{name:"typeData",symbols:[d.has("number")?{type:"number"}:number],postprocess:D},{name:"typeData",symbols:[d.has("string")?{type:"string"}:string],postprocess:R},{name:"typeData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>[]},{name:"data",symbols:[d.has("constantData")?{type:"constantData"}:constantData],postprocess:C},{name:"data",symbols:[d.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_","data"],postprocess:O},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_",d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:x},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_","data"],postprocess:x},{name:"data",symbols:[d.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","data","_","subInstruction"],postprocess:x},{name:"data",symbols:["subData"],postprocess:n},{name:"data",symbols:["subElt"],postprocess:n},{name:"data",symbols:[d.has("string")?{type:"string"}:string],postprocess:R},{name:"data",symbols:[d.has("bytes")?{type:"bytes"}:bytes],postprocess:e=>`{ "bytes": "${e[0].toString().slice(2)}" }`},{name:"data",symbols:[d.has("number")?{type:"number"}:number],postprocess:D},{name:"subData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subData$ebnf$1$subexpression$1",symbols:["data","_"]},{name:"subData$ebnf$1",symbols:["subData$ebnf$1$subexpression$1"]},{name:"subData$ebnf$1$subexpression$2",symbols:["data","_"]},{name:"subData$ebnf$1",symbols:["subData$ebnf$1","subData$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subData",symbols:[{literal:"("},"_","subData$ebnf$1",{literal:")"}],postprocess:z},{name:"subData$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subData$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subData$ebnf$2$subexpression$1",symbols:["data","_","subData$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subData$ebnf$2",symbols:["subData$ebnf$2$subexpression$1"]},{name:"subData$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subData$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subData$ebnf$2$subexpression$2",symbols:["data","_","subData$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subData$ebnf$2",symbols:["subData$ebnf$2","subData$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subData",symbols:[{literal:"{"},"_","subData$ebnf$2",{literal:"}"}],postprocess:B},{name:"subElt",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subElt$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subElt$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subElt$ebnf$1$subexpression$1",symbols:["elt","subElt$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subElt$ebnf$1",symbols:["subElt$ebnf$1$subexpression$1"]},{name:"subElt$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subElt$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subElt$ebnf$1$subexpression$2",symbols:["elt","subElt$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subElt$ebnf$1",symbols:["subElt$ebnf$1","subElt$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subElt",symbols:[{literal:"{"},"_","subElt$ebnf$1",{literal:"}"}],postprocess:B},{name:"elt",symbols:[d.has("elt")?{type:"elt"}:elt,"_","data","_","data"],postprocess:x},{name:"subTypeData",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subTypeData$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$1$subexpression$1",symbols:["data","subTypeData$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subTypeData$ebnf$1",symbols:["subTypeData$ebnf$1$subexpression$1"]},{name:"subTypeData$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$1$subexpression$2",symbols:["data","subTypeData$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subTypeData$ebnf$1",symbols:["subTypeData$ebnf$1","subTypeData$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeData",symbols:[{literal:"{"},"_","subTypeData$ebnf$1",{literal:"}"}],postprocess:z},{name:"subTypeData$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$2$subexpression$1",symbols:["data","subTypeData$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subTypeData$ebnf$2",symbols:["subTypeData$ebnf$2$subexpression$1"]},{name:"subTypeData$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeData$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeData$ebnf$2$subexpression$2",symbols:["data","subTypeData$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subTypeData$ebnf$2",symbols:["subTypeData$ebnf$2","subTypeData$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeData",symbols:[{literal:"("},"_","subTypeData$ebnf$2",{literal:")"}],postprocess:z},{name:"subTypeElt",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>"[]"},{name:"subTypeElt$ebnf$1$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$1$subexpression$1",symbols:["typeElt","subTypeElt$ebnf$1$subexpression$1$ebnf$1","_"]},{name:"subTypeElt$ebnf$1",symbols:["subTypeElt$ebnf$1$subexpression$1"]},{name:"subTypeElt$ebnf$1$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$1$subexpression$2",symbols:["typeElt","subTypeElt$ebnf$1$subexpression$2$ebnf$1","_"]},{name:"subTypeElt$ebnf$1",symbols:["subTypeElt$ebnf$1","subTypeElt$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeElt",symbols:[{literal:"[{"},"_","subTypeElt$ebnf$1",{literal:"}]"}],postprocess:z},{name:"subTypeElt$ebnf$2$subexpression$1$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$2$subexpression$1",symbols:["typeElt","_","subTypeElt$ebnf$2$subexpression$1$ebnf$1","_"]},{name:"subTypeElt$ebnf$2",symbols:["subTypeElt$ebnf$2$subexpression$1"]},{name:"subTypeElt$ebnf$2$subexpression$2$ebnf$1",symbols:[{literal:";"}],postprocess:n},{name:"subTypeElt$ebnf$2$subexpression$2$ebnf$1",symbols:[],postprocess:()=>null},{name:"subTypeElt$ebnf$2$subexpression$2",symbols:["typeElt","_","subTypeElt$ebnf$2$subexpression$2$ebnf$1","_"]},{name:"subTypeElt$ebnf$2",symbols:["subTypeElt$ebnf$2","subTypeElt$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subTypeElt",symbols:[{literal:"[{"},"_","subTypeElt$ebnf$2",{literal:"}]"}],postprocess:z},{name:"typeElt",symbols:[d.has("elt")?{type:"elt"}:elt,"_","typeData","_","typeData"],postprocess:x},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>""},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","instruction","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>e[2]},{name:"subInstruction$ebnf$1$subexpression$1",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$1",symbols:["subInstruction$ebnf$1$subexpression$1"]},{name:"subInstruction$ebnf$1$subexpression$2",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$1",symbols:["subInstruction$ebnf$1","subInstruction$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","subInstruction$ebnf$1","instruction","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>e[2].map(e=>e[0]).concat(e[3]).map(e=>F(e))},{name:"subInstruction$ebnf$2$subexpression$1",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$2",symbols:["subInstruction$ebnf$2$subexpression$1"]},{name:"subInstruction$ebnf$2$subexpression$2",symbols:["instruction","_",d.has("semicolon")?{type:"semicolon"}:semicolon,"_"]},{name:"subInstruction$ebnf$2",symbols:["subInstruction$ebnf$2","subInstruction$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"subInstruction",symbols:[d.has("lbrace")?{type:"lbrace"}:lbrace,"_","subInstruction$ebnf$2",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:z},{name:"instructions",symbols:[d.has("baseInstruction")?{type:"baseInstruction"}:baseInstruction]},{name:"instructions",symbols:[d.has("macroCADR")?{type:"macroCADR"}:macroCADR]},{name:"instructions",symbols:[d.has("macroDIP")?{type:"macroDIP"}:macroDIP]},{name:"instructions",symbols:[d.has("macroDUP")?{type:"macroDUP"}:macroDUP]},{name:"instructions",symbols:[d.has("macroSETCADR")?{type:"macroSETCADR"}:macroSETCADR]},{name:"instructions",symbols:[d.has("macroASSERTlist")?{type:"macroASSERTlist"}:macroASSERTlist]},{name:"instruction",symbols:["instructions"],postprocess:C},{name:"instruction",symbols:["subInstruction"],postprocess:n},{name:"instruction$ebnf$1$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$1",symbols:["instruction$ebnf$1$subexpression$1"]},{name:"instruction$ebnf$1$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$1",symbols:["instruction$ebnf$1","instruction$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$1","_"],postprocess:C},{name:"instruction",symbols:["instructions","_","subInstruction"],postprocess:e=>{const t=""+e[0].toString();return $(t)?A(t,e[2]):`{ "prim": "${e[0]}", "args": [ [ ${e[2]} ] ] }`}},{name:"instruction$ebnf$2$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$2",symbols:["instruction$ebnf$2$subexpression$1"]},{name:"instruction$ebnf$2$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$2",symbols:["instruction$ebnf$2","instruction$ebnf$2$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$2","_","subInstruction"],postprocess:N},{name:"instruction",symbols:["instructions","_","type"],postprocess:O},{name:"instruction$ebnf$3$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$3",symbols:["instruction$ebnf$3$subexpression$1"]},{name:"instruction$ebnf$3$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$3",symbols:["instruction$ebnf$3","instruction$ebnf$3$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$3","_","type"],postprocess:N},{name:"instruction",symbols:["instructions","_","data"],postprocess:O},{name:"instruction$ebnf$4$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$4",symbols:["instruction$ebnf$4$subexpression$1"]},{name:"instruction$ebnf$4$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$4",symbols:["instruction$ebnf$4","instruction$ebnf$4$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$4","_","data"],postprocess:N},{name:"instruction",symbols:["instructions","_","type","_","type","_","subInstruction"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ ${e[2]}, ${e[4]}, [${e[6]}] ] }`},{name:"instruction$ebnf$5$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$5",symbols:["instruction$ebnf$5$subexpression$1"]},{name:"instruction$ebnf$5$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$5",symbols:["instruction$ebnf$5","instruction$ebnf$5$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$5","_","type","_","type","_","subInstruction"],postprocess:e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "${e[0]}", "args": [ ${e[3]}, ${e[5]}, ${e[7]} ], "annots": [${t}] }`}},{name:"instruction",symbols:["instructions","_","subInstruction","_","subInstruction"],postprocess:e=>{const t=""+e[0].toString();return _(t)?P(t,e[2],e[4]):`{ "prim": "${e[0]}", "args": [ [${e[2]}], [${e[4]}] ] }`}},{name:"instruction$ebnf$6$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$6",symbols:["instruction$ebnf$6$subexpression$1"]},{name:"instruction$ebnf$6$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$6",symbols:["instruction$ebnf$6","instruction$ebnf$6$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$6","_","subInstruction","_","subInstruction"],postprocess:L},{name:"instruction",symbols:["instructions","_","type","_","type"],postprocess:x},{name:"instruction$ebnf$7$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$7",symbols:["instruction$ebnf$7$subexpression$1"]},{name:"instruction$ebnf$7$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$7",symbols:["instruction$ebnf$7","instruction$ebnf$7$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:["instructions","instruction$ebnf$7","_","type","_","type"],postprocess:L},{name:"instruction",symbols:[{literal:"PUSH"},"_","type","_","data"],postprocess:x},{name:"instruction",symbols:[{literal:"PUSH"},"_","type","_",d.has("lbrace")?{type:"lbrace"}:lbrace,d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>`{ "prim": "${e[0]}", "args": [${e[2]}, []] }`},{name:"instruction$ebnf$8$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$8",symbols:["instruction$ebnf$8$subexpression$1"]},{name:"instruction$ebnf$8$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$8",symbols:["instruction$ebnf$8","instruction$ebnf$8$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"PUSH"},"instruction$ebnf$8","_","type","_","data"],postprocess:e=>{const t=e[1].map(e=>`"${e[1]}"`);return`{ "prim": "PUSH", "args": [ ${e[3]}, ${e[5]} ], "annots": [${t}]  }`}},{name:"instruction$ebnf$9",symbols:[/[0-9]/]},{name:"instruction$ebnf$9",symbols:["instruction$ebnf$9",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DIP"},"_","instruction$ebnf$9","_","subInstruction"],postprocess:e=>e.length>4?`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" }, [ ${e[4]} ] ] }`:`{ "prim": "${e[0]}", "args": [ ${e[2]} ] }`},{name:"instruction$ebnf$10",symbols:[/[0-9]/]},{name:"instruction$ebnf$10",symbols:["instruction$ebnf$10",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUP"},"_","instruction$ebnf$10"],postprocess:W},{name:"instruction",symbols:[{literal:"DUP"}],postprocess:C},{name:"instruction$ebnf$11$subexpression$1",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$11",symbols:["instruction$ebnf$11$subexpression$1"]},{name:"instruction$ebnf$11$subexpression$2",symbols:["_",d.has("annot")?{type:"annot"}:annot]},{name:"instruction$ebnf$11",symbols:["instruction$ebnf$11","instruction$ebnf$11$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUP"},"instruction$ebnf$11","_"],postprocess:C},{name:"instruction$ebnf$12",symbols:[/[0-9]/]},{name:"instruction$ebnf$12",symbols:["instruction$ebnf$12",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DIG"},"_","instruction$ebnf$12"],postprocess:W},{name:"instruction$ebnf$13",symbols:[/[0-9]/]},{name:"instruction$ebnf$13",symbols:["instruction$ebnf$13",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DUG"},"_","instruction$ebnf$13"],postprocess:W},{name:"instruction$ebnf$14",symbols:[/[0-9]/]},{name:"instruction$ebnf$14",symbols:["instruction$ebnf$14",/[0-9]/],postprocess:e=>e[0].concat([e[1]])},{name:"instruction",symbols:[{literal:"DROP"},"_","instruction$ebnf$14"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ { "int": "${e[2]}" } ] }`},{name:"instruction",symbols:[{literal:"DROP"}],postprocess:C},{name:"instruction",symbols:[{literal:"CREATE_CONTRACT"},"_",d.has("lbrace")?{type:"lbrace"}:lbrace,"_","parameter","_","storage","_","code","_",d.has("rbrace")?{type:"rbrace"}:rbrace],postprocess:e=>`{ "prim": "CREATE_CONTRACT", "args": [ [ ${e[4]}, ${e[6]}, { "prim": "code" , "args": [ [ ${e[8]} ] ] } ] ] }`},{name:"instruction",symbols:[{literal:"EMPTY_MAP"},"_","type","_","type"],postprocess:x},{name:"instruction",symbols:[{literal:"EMPTY_MAP"},"_",d.has("lparen")?{type:"lparen"}:lparen,"_","type","_",d.has("rparen")?{type:"rparen"}:rparen,"_","type"],postprocess:e=>`{ "prim": "${e[0]}", "args": [ ${e[4]}, ${e[8]} ] }`},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:e=>e[0].concat([e[1]])},{name:"_",symbols:["_$ebnf$1"]},{name:"semicolons$ebnf$1",symbols:[/[;]/],postprocess:n},{name:"semicolons$ebnf$1",symbols:[],postprocess:()=>null},{name:"semicolons",symbols:["semicolons$ebnf$1"]}],ParserStart:"main"};t.default=G},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(32).compile({wspace:/[ \t]+/,lparen:"(",rparen:")",annot:/:[^ );]+|%[^ );]+/,parameter:"parameter",or:"or",pair:"pair",data:["bytes","int","nat","bool","string","timestamp","signature","key","key_hash","mutez","address","unit","operation","chain_id"],singleArgData:["option","list","contract","set"],doubleArgData:["lambda","map","big_map"],semicolon:";"}),o=e=>{let t=void 0,r=void 0;if(e.length>=3){const n=e[2].toString();"%"===n.charAt(0)?r=a(n):t=u(n)}if(5===e.length){const n=e[4].toString();n.startsWith("%")&&void 0===r&&(r=a(n)),n.startsWith(":")&&void 0===t&&(t=u(n))}return[{name:r,parameters:[{name:t||r,type:e[0].toString()}],structure:"$PARAM",generateInvocationString(...e){if(this.parameters.length!==e.length)throw new Error(`Incorrect number of parameters provided; expected ${this.parameters.length}, got ${e.length}`);let t=this.structure;for(let r=0;r<this.parameters.length;r++){let n=e[r];if("unit"===this.parameters[r].type&&(n="Unit"),this.parameters[r].type.startsWith("list")){if(!Array.isArray(n))throw new Error(JSON.stringify(this.parameters[r])+" requires an array value");n=`{${n.join("; ")}}`}this.parameters[r].optional&&e[r]?n="Some "+n:this.parameters[r].optional&&!e[r]&&(n="None"),t=t.replace("$PARAM",n)}return t},generateInvocationPair(...e){let t=this.generateInvocationString(...e);for(;t.startsWith("(Left ")||t.startsWith("(Right ");)t.startsWith("(Left ")&&(t=t.slice(6,-1)),t.startsWith("(Right ")&&(t=t.slice(7,-1));return{entrypoint:this.name,parameters:t}},generateSampleInvocation(){const e=this.parameters.map(e=>{switch(e.type){case"string":return'"Tacos"';case"int":return-1;case"nat":return 99;case"address":return'"KT1EGbAxguaWQFkV3Egb2Z1r933MWuEYyrJS"';case"key_hash":return'"tz1SQnJaocpquTztY3zMgydTPoQBBQrDGonJ"';case"timestamp":return`"${(new Date).toISOString()}"`;case"mutez":return 5e5;case"unit":return"Unit";case"bytes":case"bool":case"signature":case"key":case"operation":case"chain_id":default:return e.type}});return this.generateInvocationString(...e)}}]},i=(...e)=>{const t=e.find(e=>e.startsWith("%"));return t?a(t):void 0},s=(...e)=>{const t=e.find(e=>e.startsWith(":"));return t?u(t):void 0},a=e=>{if(!e.startsWith("%"))throw new Error(e+" must start with '%'");return e.replace(/^%_Liq_entry_/,"").replace("%","")},u=e=>{if(!e.startsWith(":"))throw new Error(e+" must start with ':'");return e.replace(":","")},c={Lexer:n,ParserRules:[{name:"entry",symbols:[n.has("parameter")?{type:"parameter"}:parameter,"__","parameters","_",n.has("semicolon")?{type:"semicolon"}:semicolon],postprocess:e=>e[2]},{name:"parameters",symbols:[n.has("lparen")?{type:"lparen"}:lparen,"_","parameters","_",n.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>e[2]},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{e[2],e[4];const t=e[6],r=e[8],n=[];for(const e of t){const t={name:e.name,parameters:e.parameters,structure:"(Left "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(t)}for(const e of r){const t={name:e.name,parameters:e.parameters,structure:"(Right "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(t)}return n}},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=[];for(const e of r){const r={name:`${t}.${e.name}`,parameters:e.parameters,structure:"(Left "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(r)}for(const e of n){const r={name:`${t}.${e.name}`,parameters:e.parameters,structure:"(Right "+e.structure+")",generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(r)}return o}},{name:"parameters",symbols:[n.has("or")?{type:"or"}:or,"_","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=[];for(const e of t)1===e.parameters.length&&e.parameters[0].name===e.name&&(e.parameters[0].name=void 0),n.push(Object.assign(Object.assign({},e),{structure:`(Left ${e.structure})`}));for(const e of r)1===e.parameters.length&&e.parameters[0].name===e.name&&(e.parameters[0].name=void 0),n.push(Object.assign(Object.assign({},e),{structure:`(Right ${e.structure})`}));return n}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=e[8],i=[];for(const e of n)for(const n of o){const o={name:s(t.toString(),r.toString()),parameters:e.parameters.concat(n.parameters),structure:`(Pair ${e.structure} ${n.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};i.push(o)}return i}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=e[6],o=[];for(const e of r)for(const r of n){const n={name:s(t.toString())||i(t.toString())||void 0,parameters:e.parameters.concat(r.parameters),structure:`(Pair ${e.structure} ${r.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};o.push(n)}return o}},{name:"parameters",symbols:[n.has("pair")?{type:"pair"}:pair,"__","parameters","__","parameters"],postprocess:e=>{const t=e[2],r=e[4],n=[];for(const e of t)for(const t of r){const r={name:void 0,parameters:e.parameters.concat(t.parameters),structure:`(Pair ${e.structure} ${t.structure})`,generateInvocationString:e.generateInvocationString,generateInvocationPair:e.generateInvocationPair,generateSampleInvocation:e.generateSampleInvocation};n.push(r)}return n}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4].toString(),o=e[6];return o[0].name=i(r,n),o[0].parameters[0].constituentType=o[0].parameters[0].type,"option"===t&&(o[0].parameters[0].optional=!0),o[0].parameters[0].type=`${t} (${o[0].parameters[0].type})`,o[0].structure=`(${o[0].structure})`,o}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4];return n[0].name=i(r),n[0].parameters[0].constituentType=n[0].parameters[0].type,"option"===t&&(n[0].parameters[0].optional=!0),n[0].parameters[0].type=`${t} (${n[0].parameters[0].type})`,n[0].structure=`(${n[0].structure})`,n}},{name:"parameters",symbols:[n.has("singleArgData")?{type:"singleArgData"}:singleArgData,"_","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2];return r[0].parameters[0].constituentType=r[0].parameters[0].type,"option"===t&&(r[0].parameters[0].optional=!0),r[0].parameters[0].type=`${t} (${r[0].parameters[0].type})`,r[0].structure=`(${r[0].structure})`,r}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4].toString(),o=e[6],s=e[8];return o[0].name=i(r,n),o[0].parameters[0].type=`${t} (${o[0].parameters[0].type}) (${s[0].parameters[0].type})`,o[0].structure=`(${o[0].structure})`,o}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_",n.has("annot")?{type:"annot"}:annot,"__","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2].toString(),n=e[4],o=e[6];return n[0].name=i(r),n[0].parameters[0].type=`${t} (${n[0].parameters[0].type}) (${o[0].parameters[0].type})`,n[0].structure=`(${n[0].structure})`,n}},{name:"parameters",symbols:[n.has("doubleArgData")?{type:"doubleArgData"}:doubleArgData,"_","parameters","__","parameters"],postprocess:e=>{const t=e[0].toString(),r=e[2],n=e[4];return r[0].parameters[0].type=`${t} (${r[0].parameters[0].type}) (${n[0].parameters[0].type})`,r[0].structure=`(${r[0].structure})`,r}},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data,"__",n.has("annot")?{type:"annot"}:annot],postprocess:o},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data,"__",n.has("annot")?{type:"annot"}:annot,"__",n.has("annot")?{type:"annot"}:annot],postprocess:o},{name:"parameters",symbols:[n.has("data")?{type:"data"}:data],postprocess:o},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:e=>e[0].concat([e[1]])},{name:"_",symbols:["_$ebnf$1"]},{name:"__",symbols:[/[\s]/]}],ParserStart:"entry"};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TezosResponseErrorKind=t.TezosResponseError=t.TezosRequestError=void 0;const n=r(26);class o extends n.ServiceRequestError{constructor(e,t,r,n){super(e,t,r,null),this.requestBody=n}toString(){return`TezosRequestError for ${this.serverURL} with ${this.httpStatus} and ${this.httpMessage}`}}t.TezosRequestError=o;class i extends n.ServiceResponseError{constructor(e,t,r,n,o,i){super(e,t,r,n,o),this.kind=i}}t.TezosResponseError=i,function(e){e.TEXT="Text",e.JSONTYPE1="JSONType1",e.JSONTYPE2="JSONType2"}(t.TezosResponseErrorKind||(t.TezosResponseErrorKind={}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TezosOperationQueue=void 0;const i=r(7),s=r(3),a=r(6),u=o(r(13)).default.log;class c{constructor(e,t,r,n){this.triggerTimestamp=0,this.server=e,this.keyStore=r,this.signer=t,this.delay=n,this.operations=[]}static createQueue(e,t,r,n=i.TezosConstants.DefaultBatchDelay){return new c(e,t,r,n)}addOperations(...e){0===this.operations.length&&(this.triggerTimestamp=Date.now(),setTimeout(()=>{this.sendOperations()},1e3*this.delay)),e.forEach(e=>this.operations.push(e))}getStatus(){return this.operations.length}sendOperations(){return n(this,void 0,void 0,(function*(){let e=(yield s.TezosNodeReader.getCounterForAccount(this.server,this.keyStore.publicKeyHash))+1,t=[];const r=this.operations.length;for(let n=0;n<r;n++){let r=this.operations.shift();r.counter&&(r.counter=""+e++),t.push(r)}this.operations.length>0&&(this.triggerTimestamp=Date.now(),setTimeout(()=>{this.sendOperations()},1e3*this.delay));try{yield a.TezosNodeWriter.sendOperation(this.server,t,this.signer)}catch(e){u.error("Error sending queued operations: "+e)}}))}}t.TezosOperationQueue=c},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BabylonDelegationHelper=void 0;const a=r(5),u=i(r(2)),c=r(7),l=r(3),p=r(6),f=r(9);!function(e){function t(e,t,r,n,o,i,s){let a=`[ { "prim": "DROP" },\n            { "prim": "NIL", "args": [ { "prim": "operation" } ] },\n            { "prim": "PUSH", "args": [ { "prim": "key_hash" }, { "string": "${s}" } ] },\n            { "prim": "IMPLICIT_ACCOUNT" },\n            { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "${i}" } ] },\n            { "prim": "UNIT" },\n            { "prim": "TRANSFER_TOKENS" },\n            { "prim": "CONS" } ]`;return p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,c.TezosConstants.P005ManagerContractWithdrawalStorageLimit,c.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",a,u.TezosParameterFormat.Micheline)}e.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return f.TezosContractUtils.verifyDestination(e,t,"d99cb8b4c7e40166f59c0f3c30724225")}))},e.verifyScript=function(e){return f.TezosContractUtils.verifyScript(e,"a585489ffaee60d07077059539d5bfc8")},e.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{administrator:(0,a.JSONPath)({path:"$.string",json:r})[0]}}))},e.setDelegate=function(e,t,r,n,o,i){if(n.startsWith("KT1")){const s=`[{ "prim": "DROP" }, { "prim": "NIL", "args": [{ "prim": "operation" }] }, { "prim": "PUSH", "args": [{ "prim": "key_hash" }, { "string": "${o}" } ] }, { "prim": "SOME" }, { "prim": "SET_DELEGATE" }, { "prim": "CONS" } ]`;return p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,i,0,c.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",s,u.TezosParameterFormat.Micheline)}return p.TezosNodeWriter.sendDelegationOperation(e,t,r,o,i)},e.unSetDelegate=function(e,t,r,n,o){if(n.startsWith("KT1")){const i='[{ "prim": "DROP" }, { "prim": "NIL", "args": [{ "prim": "operation" }] }, { "prim": "NONE", "args": [{ "prim": "key_hash" }] }, { "prim": "SET_DELEGATE" }, { "prim": "CONS" } ]';return p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,0,c.TezosConstants.P005ManagerContractWithdrawalGasLimit,"do",i,u.TezosParameterFormat.Micheline)}return p.TezosNodeWriter.sendUndelegationOperation(e,t,r,o)},e.withdrawDelegatedFunds=function(e,r,n,o,i,s){return t(e,r,n,o,i,s,n.publicKeyHash)},e.sendDelegatedFunds=t,e.depositDelegatedFunds=function(e,t,r,n,o,i){return p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,i,o,0,c.TezosConstants.P005ManagerContractDepositGasLimit,void 0,void 0)},e.deployManagerContract=function(e,t,r,n,o,i,s=!1){const a=`{ "string": "${r.publicKeyHash}" }`;return p.TezosNodeWriter.sendContractOriginationOperation(e,t,r,i,n,o,600,2e4,'[ { "prim": "parameter",\n        "args":\n          [ { "prim": "or",\n              "args":\n                [ { "prim": "lambda",\n                    "args":\n                      [ { "prim": "unit" }, { "prim": "list", "args": [ { "prim": "operation" } ] } ], "annots": [ "%do" ] },\n                  { "prim": "unit", "annots": [ "%default" ] } ] } ] },\n      { "prim": "storage", "args": [ { "prim": "key_hash" } ] },\n      { "prim": "code",\n        "args":\n          [ [ [ [ { "prim": "DUP" }, { "prim": "CAR" },\n                  { "prim": "DIP", "args": [ [ { "prim": "CDR" } ] ] } ] ],\n              { "prim": "IF_LEFT",\n                "args":\n                  [ [ { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] },\n                      { "prim": "AMOUNT" },\n                      [ [ { "prim": "COMPARE" }, { "prim": "EQ" } ],\n                        { "prim": "IF", "args": [ [], [ [ { "prim": "UNIT" }, { "prim": "FAILWITH" } ] ] ] } ],\n                      [ { "prim": "DIP", "args": [ [ { "prim": "DUP" } ] ] },\n                        { "prim": "SWAP" } ],\n                      { "prim": "IMPLICIT_ACCOUNT" },\n                      { "prim": "ADDRESS" },\n                      { "prim": "SENDER" },\n                      [ [ { "prim": "COMPARE" }, { "prim": "EQ" } ],\n                        { "prim": "IF", "args": [ [], [ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ] ] } ],\n                      { "prim": "UNIT" }, { "prim": "EXEC" },\n                      { "prim": "PAIR" } ],\n                    [ { "prim": "DROP" },\n                      { "prim": "NIL", "args": [ { "prim": "operation" } ] },\n                      { "prim": "PAIR" } ] ] } ] ] } ]',a,u.TezosParameterFormat.Micheline,c.TezosConstants.HeadBranchOffset,s)}}(t.BabylonDelegationHelper||(t.BabylonDelegationHelper={}))},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CryptonomicNameServiceHelper=void 0;const a=r(5),u=i(r(2)),c=r(4),l=r(3),p=r(6),f=r(9),h=r(2);!function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return f.TezosContractUtils.verifyDestination(e,t,"c020219e31ee3b462ed93c33124f117f")}))},t.commitName=function(t,r,n,o,i,a,l,d,g){return s(this,void 0,void 0,(function*(){const s=`(Pair "${i}" (Pair ${a} 0x${c.TezosMessageUtils.writeAddress(n.publicKeyHash)}))`,b=c.TezosMessageUtils.writePackedData(s,"record",h.TezosParameterFormat.Michelson),m="0x"+c.TezosMessageUtils.simpleHash(e.from(b,"hex"),32).toString("hex");if(!d||!g){const e=yield p.TezosNodeWriter.testContractInvocationOperation(t,"main",n,o,0,l,6e3,5e5,"commit",m,u.TezosParameterFormat.Michelson);d||(d=Number(e.storageCost)||0),g||(g=Number(e.gas)+300)}const y=yield p.TezosNodeWriter.sendContractInvocationOperation(t,r,n,o,0,l,d,g,"commit",m,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(y.operationGroupID)}))},t.registerName=function(e,t,r,n,o,i,a,c,l,h,d){return s(this,void 0,void 0,(function*(){const s=`(Pair ${a} (Pair "${o}" ${i}))`;if(!h||!d){const t=yield p.TezosNodeWriter.testContractInvocationOperation(e,"main",r,n,c,l,6e3,5e5,"registerName",s,u.TezosParameterFormat.Michelson);h||(h=Number(t.storageCost)||0),d||(d=Number(t.gas)+300)}const g=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,c,l,h,d,"registerName",s,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.updateRegistrationPeriod=function(e,t,r,n,o,i,a,c,l,h){return s(this,void 0,void 0,(function*(){const s=`(Pair "${o}" ${i})`;if(!l||!h){const t=yield p.TezosNodeWriter.testContractInvocationOperation(e,"main",r,n,a,c,1e3,1e5,"updateRegistrationPeriod",s,u.TezosParameterFormat.Michelson);l||(l=Number(t.storageCost)||0),h||(h=Number(t.gas)+300)}const d=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,a,c,l,h,"updateRegistrationPeriod",s,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.setPrimaryName=function(e,t,r,n,o,i,a,c){return s(this,void 0,void 0,(function*(){const s=`"${o}"`;if(!a||!c){const t=yield p.TezosNodeWriter.testContractInvocationOperation(e,"main",r,n,0,i,1e3,1e5,"setPrimaryName",s,u.TezosParameterFormat.Michelson);a||(a=Number(t.storageCost)||0),c||(c=Number(t.gas)+300)}const l=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,i,a,c,"deleteName",s,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.deleteName=function(e,t,r,n,o,i,a,c){return s(this,void 0,void 0,(function*(){const s=`"${o}"`;if(!a||!c){const t=yield p.TezosNodeWriter.testContractInvocationOperation(e,"main",r,n,0,i,1e3,1e5,"deleteName",s,u.TezosParameterFormat.Michelson);a||(a=Number(t.storageCost)||0),c||(c=Number(t.gas)+300)}const l=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,i,a,c,"deleteName",s,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.getNameForAddress=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(n,"address"),"hex"));try{const e=yield l.TezosNodeReader.getValueForBigMapKey(t,r,o);return(0,a.JSONPath)({path:"$.string",json:e})[0]}catch(e){}return""}))},t.getNameInfo=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(n,"string"),"hex")),i=yield l.TezosNodeReader.getValueForBigMapKey(t,r,o);return{name:(0,a.JSONPath)({path:"$.args[0].args[1].string",json:i})[0],modified:Boolean((0,a.JSONPath)({path:"$.args[0].args[0].prim",json:i})[0]),owner:(0,a.JSONPath)({path:"$.args[1].args[0].string",json:i})[0],registeredAt:new Date((0,a.JSONPath)({path:"$.args[1].args[1].args[0].string",json:i})[0]),registrationPeriod:(0,a.JSONPath)({path:"$.args[1].args[1].args[1].int",json:i})[0]}}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{addressMap:Number((0,a.JSONPath)({path:"$.args[0].args[0].args[0].int",json:r})[0]),commitmentMap:Number((0,a.JSONPath)({path:"$.args[0].args[0].args[1].int",json:r})[0]),manager:(0,a.JSONPath)({path:"$.args[0].args[1].args[0].string",json:r})[0],interval:Number((0,a.JSONPath)({path:"$.args[0].args[1].args[1].int",json:r})[0]),maxCommitTime:Number((0,a.JSONPath)({path:"$.args[1].args[0].args[0].int",json:r})[0]),maxDuration:Number((0,a.JSONPath)({path:"$.args[1].args[0].args[1].int",json:r})[0]),minCommitTime:Number((0,a.JSONPath)({path:"$.args[1].args[1].args[0].int",json:r})[0]),nameMap:Number((0,a.JSONPath)({path:"$.args[1].args[1].args[1].args[0].int",json:r})[0]),intervalFee:Number((0,a.JSONPath)({path:"$.args[1].args[1].args[1].args[1].int",json:r})[0])}}))}}(t.CryptonomicNameServiceHelper||(t.CryptonomicNameServiceHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DexterPoolHelper=void 0;const u=a(r(50)),c=r(5),l=i(r(2)),p=r(3),f=r(6),h=r(9),d=r(4);!function(t){function r(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return{balanceMap:Number((0,c.JSONPath)({path:"$.args[0].int",json:r})[0]),administrator:(0,c.JSONPath)({path:"$.args[2].args[0].string",json:r})[0],token:(0,c.JSONPath)({path:"$.args[2].args[1].string",json:r})[0],tokenBalance:Number((0,c.JSONPath)({path:"$.args[3].int",json:r})[0]),xtzBalance:Number((0,c.JSONPath)({path:"$.args[4].int",json:r})[0]),selfIsUpdatingTokenPool:(0,c.JSONPath)({path:"$.args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),freeze_baker:(0,c.JSONPath)({path:"$.args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),lqt_total:Number((0,c.JSONPath)({path:"$.args[1].args[2].int",json:r})[0])}}))}function n(e,t,r){return(0,u.default)(e).multiply((0,u.default)(t)).divide((0,u.default)(r)).toJSNumber()}t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return h.TezosContractUtils.verifyDestination(e,t,"a72954311c48dcc28279590d82870611")}))},t.verifyScript=function(e){return h.TezosContractUtils.verifyScript(e,"yyy")},t.getSimpleStorage=r,t.getAccountBalance=function(t,r,n){return s(this,void 0,void 0,(function*(){try{const o=d.TezosMessageUtils.encodeBigMapKey(e.from(d.TezosMessageUtils.writePackedData(n,"address"),"hex")),i=yield p.TezosNodeReader.getValueForBigMapKey(t,r,o);if(void 0===i)throw new Error(`Map ${r} does not contain a record for ${n}`);const s=(0,c.JSONPath)({path:"$.args[0].int",json:i});return Number(s[0])}catch(e){return 0}}))},t.getAccountPoolShare=function(t,n,o){return s(this,void 0,void 0,(function*(){try{const i=yield r(t,n),s=d.TezosMessageUtils.encodeBigMapKey(e.from(d.TezosMessageUtils.writePackedData(o,"address"),"hex")),a=yield p.TezosNodeReader.getValueForBigMapKey(t,i.balanceMap,s);if(void 0===a)throw new Error(`Map ${i.balanceMap} does not contain a record for ${o}`);const l=(0,u.default)((0,c.JSONPath)({path:"$.args[0].int",json:a})[0]),f=(0,u.default)(i.lqt_total),h=(0,u.default)(i.tokenBalance),g=(0,u.default)(i.xtzBalance);return{token:h.multiply(l).divide(f).toJSNumber(),xtz:g.multiply(l).divide(f).toJSNumber()}}catch(e){return{token:0,xtz:0}}}))},t.getAccountAllowance=function(t,r,n,o){return s(this,void 0,void 0,(function*(){const i=d.TezosMessageUtils.encodeBigMapKey(e.from(d.TezosMessageUtils.writePackedData(n,"address"),"hex")),s=yield p.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${n}/${o}`);let a=new Map;return(0,c.JSONPath)({path:"$.args[1][*].args",json:s}).forEach(e=>a[e[0].string]=Number(e[1].int)),a[o]||0}))},t.addLiquidity=function(e,t,r,n,o,i,a,u,c){return s(this,void 0,void 0,(function*(){const s=`(Pair (Pair "${r.publicKeyHash}" ${i}) (Pair ${u} "${c.toISOString()}"))`,p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,a,o,5e3,5e5,"addLiquidity",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.removeLiquidity=function(e,t,r,n,o,i,a,u,c){return s(this,void 0,void 0,(function*(){const s=`(Pair (Pair "${r.publicKeyHash}" (Pair "${r.publicKeyHash}" ${i})) (Pair ${a} (Pair ${u} "${c.toISOString()}")))`,p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,5e3,5e5,"removeLiquidity",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.xtzToToken=function(e,t,r,n,o,i,a,u){return s(this,void 0,void 0,(function*(){const s=`(Pair "${r.publicKeyHash}" (Pair ${a} "${u.toISOString()}"))`,c=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,i,o,5e3,5e5,"xtzToToken",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.tokenToXtz=function(e,t,r,n,o,i,a,u){return s(this,void 0,void 0,(function*(){const s=`(Pair (Pair "${r.publicKeyHash}" "${r.publicKeyHash}") (Pair ${a} (Pair ${i} "${u.toISOString()}")))`,c=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,5e3,5e5,"tokenToXtz",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.tokenToToken=function(e,t,r,n,o,i,a,u,c){return s(this,void 0,void 0,(function*(){const s=`(Pair (Pair "${i}" (Pair ${u} "${r.publicKeyHash}")) (Pair "${r.publicKeyHash}" (Pair ${a} "${c.toISOString()}")))`,p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,5e3,1e6,"tokenToToken",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.approve=function(e,t,r,n,o,i,a,u){return s(this,void 0,void 0,(function*(){const s=`(Pair "${i}" (Pair ${a} ${u}))`,c=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,5e3,5e5,"approve",s,l.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.previewTransactions=function(){return s(this,void 0,void 0,(function*(){}))},t.calcTokenLiquidityRequirement=n,t.getTokenExchangeRate=function(e,t,r,n=6){const o=(0,u.default)(e).multiply((0,u.default)(t)).multiply((0,u.default)(997)),i=(0,u.default)(r).multiply((0,u.default)(1e3)).add((0,u.default)(e).multiply((0,u.default)(997))),s=o.divide(i),a=s.divmod((0,u.default)(e)),c=a.remainder.multiply((0,u.default)(10**n)).divide((0,u.default)(e));return{tokenAmount:s.toJSNumber(),rate:parseFloat(`${a.quotient.toJSNumber()}.${c.toJSNumber()}`)}},t.getXTZExchangeRate=function(e,t,r,n=6){const o=(0,u.default)(e).multiply((0,u.default)(r)).multiply((0,u.default)(997)),i=(0,u.default)(t).multiply((0,u.default)(1e3)).add((0,u.default)(e).multiply((0,u.default)(997))),s=o.divide(i),a=s.divmod((0,u.default)(e)),c=a.remainder.multiply((0,u.default)(10**n)).divide((0,u.default)(e));return{xtzAmount:s.toJSNumber(),rate:parseFloat(`${a.quotient.toJSNumber()}.${c.toJSNumber()}`)}},t.estimateLiquidityAmount=function(e,t,r){return(0,u.default)(e).multiply((0,u.default)(t)).divide((0,u.default)(r)).toJSNumber()},t.estimateShareCost=function(e,t,r){const o=(0,u.default)(e).divide((0,u.default)(99)).toJSNumber();return{xtzCost:o,tokenCost:n(o,t,e)}}}(t.DexterPoolHelper||(t.DexterPoolHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HicNFTHelper=void 0;const o=r(5),i=r(104),s=r(3),a=r(24),u=r(27),c=r(23),l=r(2),p=r(4);!function(t){function r(e,t,r){return n(this,void 0,void 0,(function*(){let o=u.ConseilQueryBuilder.blankQuery();o=u.ConseilQueryBuilder.addFields(o,"key","value","operation_group_id"),o=u.ConseilQueryBuilder.addPredicate(o,"big_map_id",a.ConseilOperator.EQ,[e]),o=u.ConseilQueryBuilder.addPredicate(o,"key",a.ConseilOperator.STARTSWITH,["Pair 0x"+p.TezosMessageUtils.writeAddress(t)]),o=u.ConseilQueryBuilder.addPredicate(o,"value",a.ConseilOperator.EQ,[0],!0),o=u.ConseilQueryBuilder.setLimit(o,1e4);const s=yield c.TezosConseilClient.getTezosEntityData(r,r.network,"big_map_contents",o),l=function(e,t){const r=[],n=e.length;let o=0;for(;o<n;)r.push(e.slice(o,o+=t));return r}(s.map(e=>e.operation_group_id),30).map(e=>function(e){let t=u.ConseilQueryBuilder.blankQuery();return t=u.ConseilQueryBuilder.addFields(t,"timestamp","amount","operation_group_hash","parameters_entrypoints","parameters"),t=u.ConseilQueryBuilder.addPredicate(t,"kind",a.ConseilOperator.EQ,["transaction"]),t=u.ConseilQueryBuilder.addPredicate(t,"status",a.ConseilOperator.EQ,["applied"]),t=u.ConseilQueryBuilder.addPredicate(t,"internal",a.ConseilOperator.EQ,["false"]),t=u.ConseilQueryBuilder.addPredicate(t,"operation_group_hash",e.length>1?a.ConseilOperator.IN:a.ConseilOperator.EQ,e),t=u.ConseilQueryBuilder.setLimit(t,e.length),t}(e)),f={};yield Promise.all(l.map(e=>n(this,void 0,void 0,(function*(){return yield c.TezosConseilClient.getTezosEntityData(r,r.network,"operations",e).then(e=>e.map(e=>{let t=0;const r=e.parameters_entrypoints;"collect"===r?t=Number(e.parameters.toString().replace(/^Pair ([0-9]+) [0-9]+/,"$1")):"transfer"===r&&(t=Number(e.parameters.toString().replace(/[{] Pair \"[1-9A-HJ-NP-Za-km-z]{36}\" [{] Pair \"[1-9A-HJ-NP-Za-km-z]{36}\" [(]Pair [0-9]+ [0-9]+[)] [}] [}]/,"$1"))),f[e.operation_group_hash]={price:new i.BigNumber(e.amount),amount:t,timestamp:e.timestamp,action:r}}))}))));return s.map(e=>{let t=0,r=new Date,n="";try{const o=f[e.operation_group_id];t=o.price.dividedToIntegerBy(o.amount).toNumber(),r=new Date(o.timestamp),n="collect"===o.action?"Purchased":"Received"}catch(e){}return{piece:e.key.toString().replace(/.* ([0-9]{1,}$)/,"$1"),amount:Number(e.value),price:isNaN(t)?0:t,receivedOn:r,action:n}}).sort((e,t)=>t.receivedOn.getTime()-e.receivedOn.getTime())}))}t.objktsAddress="KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",t.hDaoAddress="KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW",t.getStorage=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield s.TezosNodeReader.getContractStorage(e,t);return{administrator:(0,o.JSONPath)({path:"$.args[0].args[0].string",json:r})[0],tokens:Number((0,o.JSONPath)({path:"$.args[0].args[1].int",json:r})[0]),ledger:Number((0,o.JSONPath)({path:"$.args[0].args[2].int",json:r})[0]),metadata:Number((0,o.JSONPath)({path:"$.args[1].args[0].int",json:r})[0]),operators:Number((0,o.JSONPath)({path:"$.args[1].args[1].int",json:r})[0]),paused:(0,o.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),tokenMetadata:Number((0,o.JSONPath)({path:"$.args[3].int",json:r})[0])}}))},t.getCollection=r,t.getCollectionSize=function(e,t,o){return n(this,void 0,void 0,(function*(){return(yield r(e,t,o)).reduce((e,t)=>e+t.amount,0)}))},t.getBalance=function(t,r,a){return n(this,void 0,void 0,(function*(){const n=p.TezosMessageUtils.encodeBigMapKey(e.from(p.TezosMessageUtils.writePackedData(`(Pair 0x${p.TezosMessageUtils.writeAddress(a)} 0)`,"",l.TezosParameterFormat.Michelson),"hex"));let u=0;try{const e=yield s.TezosNodeReader.getValueForBigMapKey(t,r,n);u=new i.BigNumber((0,o.JSONPath)({path:"$.int",json:e})[0]).toNumber()}catch(e){}return u}))},t.getTokenInfo=function(e,t=515){return n(this,void 0,void 0,(function*(){let r=u.ConseilQueryBuilder.blankQuery();r=u.ConseilQueryBuilder.addFields(r,"value"),r=u.ConseilQueryBuilder.addPredicate(r,"big_map_id",a.ConseilOperator.EQ,[t]),r=u.ConseilQueryBuilder.setLimit(r,2e4);const n=yield c.TezosConseilClient.getTezosEntityData(e,e.network,"big_map_contents",r);let o=0,s=new i.BigNumber(0);return n.forEach(e=>{try{const t=new i.BigNumber(e.value);t.isGreaterThan(0)&&(s=s.plus(t)),o++}catch(e){}}),{holders:o,totalBalance:s.toNumber()}}))},t.getNFTObjectDetails=function(t,r){return n(this,void 0,void 0,(function*(){const n=p.TezosMessageUtils.encodeBigMapKey(e.from(p.TezosMessageUtils.writePackedData(r,"int"),"hex")),i=yield s.TezosNodeReader.getValueForBigMapKey(t,514,n),a=(0,o.JSONPath)({path:"$.args[1][0].args[1].bytes",json:i})[0],u=e.from(a,"hex").toString().slice(7),c=yield fetch("https://cloudflare-ipfs.com/ipfs/"+u,{cache:"no-store"}),l=yield c.json();return{name:l.name,description:l.description,creators:l.creators.map(e=>e.trim()).map(e=>`${e.slice(0,6)}...${e.slice(e.length-6,e.length)}`).join(", "),artifactUrl:"https://cloudflare-ipfs.com/ipfs/"+l.formats[0].uri.toString().slice(7),artifactType:l.formats[0].mimeType.toString()}}))}}(t.HicNFTHelper||(t.HicNFTHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){var n;!function(o){"use strict";var i,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",p=1e14,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e9;function d(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function b(e,t){var r,n,o=e.c,i=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=o.length)<(c=i.length)?u:c,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function m(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(c+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return d(e.e/14)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(i=function e(t){var r,n,o,i,P,$,A,S,T,w=B.prototype={constructor:B,toString:null,valueOf:null},E=new B(1),I=20,D=4,R=-7,C=21,O=-1e7,U=1e7,N=!1,M=1,x=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function B(e,t){var r,i,a,c,p,f,h,d,g=this;if(!(g instanceof B))return new B(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>U?g.c=g.e=null:e.e<O?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,p=e;p>=10;p/=10,c++);return void(c>U?g.c=g.e=null:(g.e=c,g.c=[e]))}d=String(e)}else{if(!s.test(d=String(e)))return o(g,d,f);g.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(c=d.indexOf("."))>-1&&(d=d.replace(".","")),(p=d.search(/e/i))>0?(c<0&&(c=p),c+=+d.slice(p+1),d=d.substring(0,p)):c<0&&(c=d.length)}else{if(m(t,2,F.length,"Base"),10==t&&z)return G(g=new B(e),I+g.e+1,D);if(d=String(e),f="number"==typeof e){if(0*e!=0)return o(g,d,f,t);if(g.s=1/e<0?(d=d.slice(1),-1):1,B.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else g.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=F.slice(0,t),c=p=0,h=d.length;p<h;p++)if(r.indexOf(i=d.charAt(p))<0){if("."==i){if(p>c){c=h;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,p=-1,c=0;continue}return o(g,String(e),f,t)}f=!1,(c=(d=n(d,t,10,g.s)).indexOf("."))>-1?d=d.replace(".",""):c=d.length}for(p=0;48===d.charCodeAt(p);p++);for(h=d.length;48===d.charCodeAt(--h););if(d=d.slice(p,++h)){if(h-=p,f&&B.DEBUG&&h>15&&(e>9007199254740991||e!==u(e)))throw Error(l+g.s*e);if((c=c-p-1)>U)g.c=g.e=null;else if(c<O)g.c=[g.e=0];else{if(g.e=c,g.c=[],p=(c+1)%14,c<0&&(p+=14),p<h){for(p&&g.c.push(+d.slice(0,p)),h-=14;p<h;)g.c.push(+d.slice(p,p+=14));p=14-(d=d.slice(p)).length}else p-=h;for(;p--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}function L(e,t,r,n){var o,i,s,a,u;if(null==r?r=D:m(r,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)u=g(e.c),u=1==n||2==n&&(s<=R||s>=C)?v(u,s):_(u,s,"0");else if(i=(e=G(new B(e),t,r)).e,a=(u=g(e.c)).length,1==n||2==n&&(t<=i||i<=R)){for(;a<t;u+="0",a++);u=v(u,i)}else if(t-=s,u=_(u,i,"0"),i+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=i-a)>0)for(i+1==a&&(u+=".");t--;u+="0");return e.s<0&&o?"-"+u:u}function j(e,t){for(var r,n=1,o=new B(e[0]);n<e.length;n++){if(!(r=new B(e[n])).s){o=r;break}t.call(o,r)&&(o=r)}return o}function W(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+14*r-1)>U?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=t),e}function G(e,t,r,n){var o,i,s,c,l,h,d,g=e.c,b=f;if(g){e:{for(o=1,c=g[0];c>=10;c/=10,o++);if((i=t-o)<0)i+=14,s=t,d=(l=g[h=0])/b[o-s-1]%10|0;else if((h=a((i+1)/14))>=g.length){if(!n)break e;for(;g.length<=h;g.push(0));l=d=0,o=1,s=(i%=14)-14+1}else{for(l=c=g[h],o=1;c>=10;c/=10,o++);d=(s=(i%=14)-14+o)<0?0:l/b[o-s-1]%10|0}if(n=n||t<0||null!=g[h+1]||(s<0?l:l%b[o-s-1]),n=r<4?(d||n)&&(0==r||r==(e.s<0?3:2)):d>5||5==d&&(4==r||n||6==r&&(i>0?s>0?l/b[o-s]:0:g[h-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=b[(14-t%14)%14],e.e=-t||0):g[0]=e.e=0,e;if(0==i?(g.length=h,c=1,h--):(g.length=h+1,c=b[14-i],g[h]=s>0?u(l/b[o-s]%b[s])*c:0),n)for(;;){if(0==h){for(i=1,s=g[0];s>=10;s/=10,i++);for(s=g[0]+=c,c=1;s>=10;s/=10,c++);i!=c&&(e.e++,g[0]==p&&(g[0]=1));break}if(g[h]+=c,g[h]!=p)break;g[h--]=0,c=1}for(i=g.length;0===g[--i];g.pop());}e.e>U?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function H(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=R||r>=C?v(t,r):_(t,r,"0"),e.s<0?"-"+t:t)}return B.clone=e,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(r=e[t],0,h,t),I=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(r=e[t],0,8,t),D=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(m(r[0],-h,0,t),m(r[1],0,h,t),R=r[0],C=r[1]):(m(r,-h,h,t),R=-(C=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)m(r[0],-h,-1,t),m(r[1],1,h,t),O=r[0],U=r[1];else{if(m(r,-h,h,t),!r)throw Error(c+t+" cannot be zero: "+r);O=-(U=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(c+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!r,Error(c+"crypto unavailable");N=r}else N=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(r=e[t],0,9,t),M=r),e.hasOwnProperty(t="POW_PRECISION")&&(m(r=e[t],0,h,t),x=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(c+t+" not an object: "+r);k=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+t+" invalid: "+r);z="0123456789"==r.slice(0,10),F=r}}return{DECIMAL_PLACES:I,ROUNDING_MODE:D,EXPONENTIAL_AT:[R,C],RANGE:[O,U],CRYPTO:N,MODULO_MODE:M,POW_PRECISION:x,FORMAT:k,ALPHABET:F}},B.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!B.DEBUG)return!0;var t,r,n=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-h&&o<=h&&o===u(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=p||r!==u(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(c+"Invalid BigNumber: "+e)},B.maximum=B.max=function(){return j(arguments,w.lt)},B.minimum=B.min=function(){return j(arguments,w.gt)},B.random=(i=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,l=0,p=[],d=new B(E);if(null==e?e=I:m(e,0,h),o=a(e/14),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(s=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(p.push(s%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw N=!1,Error(c+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(s=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(p.push(s%1e14),l+=7);l=o/7}if(!N)for(;l<o;)(s=i())<9e15&&(p[l++]=s%1e14);for(e%=14,(o=p[--l])&&e&&(s=f[14-e],p[l]=u(o/s)*s);0===p[l];p.pop(),l--);if(l<0)p=[n=0];else{for(n=-1;0===p[0];p.splice(0,1),n-=14);for(l=1,s=p[0];s>=10;s/=10,l++);l<14&&(n-=14-l)}return d.e=n,d.c=p,d}),B.sum=function(){for(var e=1,t=arguments,r=new B(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){function e(e,t,r,n){for(var o,i,s=[0],a=0,u=e.length;a<u;){for(i=s.length;i--;s[i]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/r|0,s[o]%=r)}return s.reverse()}return function(t,n,o,i,s){var a,u,c,l,p,f,h,d,b=t.indexOf("."),m=I,y=D;for(b>=0&&(l=x,x=0,t=t.replace(".",""),f=(d=new B(n)).pow(t.length-b),x=l,d.c=e(_(g(f.c),f.e,"0"),10,o,"0123456789"),d.e=d.c.length),c=l=(h=e(t,n,o,s?(a=F,"0123456789"):(a="0123456789",F))).length;0==h[--l];h.pop());if(!h[0])return a.charAt(0);if(b<0?--c:(f.c=h,f.e=c,f.s=i,h=(f=r(f,d,m,y,o)).c,p=f.r,c=f.e),b=h[u=c+m+1],l=o/2,p=p||u<0||null!=h[u+1],p=y<4?(null!=b||p)&&(0==y||y==(f.s<0?3:2)):b>l||b==l&&(4==y||p||6==y&&1&h[u-1]||y==(f.s<0?8:7)),u<1||!h[0])t=p?_(a.charAt(1),-m,a.charAt(0)):a.charAt(0);else{if(h.length=u,p)for(--o;++h[--u]>o;)h[u]=0,u||(++c,h=[1].concat(h));for(l=h.length;!h[--l];);for(b=0,t="";b<=l;t+=a.charAt(h[b++]));t=_(t,c,a.charAt(0))}return t}}(),r=function(){function e(e,t,r){var n,o,i,s,a=0,u=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();u--;)a=((o=c*(i=e[u]%1e7)+(n=l*i+(s=e[u]/1e7|0)*c)%1e7*1e7+a)/r|0)+(n/1e7|0)+l*s,e[u]=o%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,i,s,a){var c,l,f,h,g,b,m,y,v,_,P,$,A,S,T,w,E,I=n.s==o.s?1:-1,D=n.c,R=o.c;if(!(D&&D[0]&&R&&R[0]))return new B(n.s&&o.s&&(D?!R||D[0]!=R[0]:R)?D&&0==D[0]||!R?0*I:I/0:NaN);for(v=(y=new B(I)).c=[],I=i+(l=n.e-o.e)+1,a||(a=p,l=d(n.e/14)-d(o.e/14),I=I/14|0),f=0;R[f]==(D[f]||0);f++);if(R[f]>(D[f]||0)&&l--,I<0)v.push(1),h=!0;else{for(S=D.length,w=R.length,f=0,I+=2,(g=u(a/(R[0]+1)))>1&&(R=e(R,g,a),D=e(D,g,a),w=R.length,S=D.length),A=w,P=(_=D.slice(0,w)).length;P<w;_[P++]=0);E=R.slice(),E=[0].concat(E),T=R[0],R[1]>=a/2&&T++;do{if(g=0,(c=t(R,_,w,P))<0){if($=_[0],w!=P&&($=$*a+(_[1]||0)),(g=u($/T))>1)for(g>=a&&(g=a-1),m=(b=e(R,g,a)).length,P=_.length;1==t(b,_,m,P);)g--,r(b,w<m?E:R,m,a),m=b.length,c=1;else 0==g&&(c=g=1),m=(b=R.slice()).length;if(m<P&&(b=[0].concat(b)),r(_,b,P,a),P=_.length,-1==c)for(;t(R,_,w,P)<1;)g++,r(_,w<P?E:R,P,a),P=_.length}else 0===c&&(g++,_=[0]);v[f++]=g,_[0]?_[P++]=D[A]||0:(_=[D[A]],P=1)}while((A++<S||null!=_[0])&&I--);h=null!=_[0],v[0]||v.splice(0,1)}if(a==p){for(f=1,I=v[0];I>=10;I/=10,f++);G(y,i+(y.e=f+14*l-1)+1,s,h)}else y.e=l,y.r=+h;return y}}(),P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,A=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,r,n){var o,i=r?t:t.replace(T,"");if(S.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(P,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,i=i.replace($,"$1").replace(A,"0.$1")),t!=i))return new B(i,o);if(B.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},w.absoluteValue=w.abs=function(){var e=new B(this);return e.s<0&&(e.s=1),e},w.comparedTo=function(e,t){return b(this,new B(e,t))},w.decimalPlaces=w.dp=function(e,t){var r,n,o,i=this;if(null!=e)return m(e,0,h),null==t?t=D:m(t,0,8),G(new B(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=14*((o=r.length-1)-d(this.e/14)),o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},w.dividedBy=w.div=function(e,t){return r(this,new B(e,t),I,D)},w.dividedToIntegerBy=w.idiv=function(e,t){return r(this,new B(e,t),0,1)},w.exponentiatedBy=w.pow=function(e,t){var r,n,o,i,s,l,p,f,h=this;if((e=new B(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+H(e));if(null!=t&&(t=new B(t)),s=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return f=new B(Math.pow(+H(h),s?2-y(e):+H(e))),t?f.mod(t):f;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new B(NaN);(n=!l&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return i=h.s<0&&y(e)?-0:0,h.e>-1&&(i=1/i),new B(l?1/i:i);x&&(i=a(x/14+2))}for(s?(r=new B(.5),l&&(e.s=1),p=y(e)):p=(o=Math.abs(+H(e)))%2,f=new B(E);;){if(p){if(!(f=f.times(h)).c)break;i?f.c.length>i&&(f.c.length=i):n&&(f=f.mod(t))}if(o){if(0===(o=u(o/2)))break;p=o%2}else if(G(e=e.times(r),e.e+1,1),e.e>14)p=y(e);else{if(0===(o=+H(e)))break;p=o%2}h=h.times(h),i?h.c&&h.c.length>i&&(h.c.length=i):n&&(h=h.mod(t))}return n?f:(l&&(f=E.div(f)),t?f.mod(t):i?G(f,x,D,void 0):f)},w.integerValue=function(e){var t=new B(this);return null==e?e=D:m(e,0,8),G(t,t.e+1,e)},w.isEqualTo=w.eq=function(e,t){return 0===b(this,new B(e,t))},w.isFinite=function(){return!!this.c},w.isGreaterThan=w.gt=function(e,t){return b(this,new B(e,t))>0},w.isGreaterThanOrEqualTo=w.gte=function(e,t){return 1===(t=b(this,new B(e,t)))||0===t},w.isInteger=function(){return!!this.c&&d(this.e/14)>this.c.length-2},w.isLessThan=w.lt=function(e,t){return b(this,new B(e,t))<0},w.isLessThanOrEqualTo=w.lte=function(e,t){return-1===(t=b(this,new B(e,t)))||0===t},w.isNaN=function(){return!this.s},w.isNegative=function(){return this.s<0},w.isPositive=function(){return this.s>0},w.isZero=function(){return!!this.c&&0==this.c[0]},w.minus=function(e,t){var r,n,o,i,s=this,a=s.s;if(t=(e=new B(e,t)).s,!a||!t)return new B(NaN);if(a!=t)return e.s=-t,s.plus(e);var u=s.e/14,c=e.e/14,l=s.c,f=e.c;if(!u||!c){if(!l||!f)return l?(e.s=-t,e):new B(f?s:NaN);if(!l[0]||!f[0])return f[0]?(e.s=-t,e):new B(l[0]?s:3==D?-0:0)}if(u=d(u),c=d(c),l=l.slice(),a=u-c){for((i=a<0)?(a=-a,o=l):(c=u,o=f),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(n=(i=(a=l.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(l[t]!=f[t]){i=l[t]<f[t];break}if(i&&(o=l,l=f,f=o,e.s=-e.s),(t=(n=f.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=p-1;n>a;){if(l[--n]<f[n]){for(r=n;r&&!l[--r];l[r]=t);--l[r],l[n]+=p}l[n]-=f[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?W(e,l,c):(e.s=3==D?-1:1,e.c=[e.e=0],e)},w.modulo=w.mod=function(e,t){var n,o,i=this;return e=new B(e,t),!i.c||!e.s||e.c&&!e.c[0]?new B(NaN):!e.c||i.c&&!i.c[0]?new B(i):(9==M?(o=e.s,e.s=1,n=r(i,e,0,3),e.s=o,n.s*=o):n=r(i,e,0,M),(e=i.minus(n.times(e))).c[0]||1!=M||(e.s=i.s),e)},w.multipliedBy=w.times=function(e,t){var r,n,o,i,s,a,u,c,l,f,h,g,b,m,y=this,v=y.c,_=(e=new B(e,t)).c;if(!(v&&_&&v[0]&&_[0]))return!y.s||!e.s||v&&!v[0]&&!_||_&&!_[0]&&!v?e.c=e.e=e.s=null:(e.s*=y.s,v&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=d(y.e/14)+d(e.e/14),e.s*=y.s,(u=v.length)<(f=_.length)&&(b=v,v=_,_=b,o=u,u=f,f=o),o=u+f,b=[];o--;b.push(0));for(m=p,1e7,o=f;--o>=0;){for(r=0,h=_[o]%1e7,g=_[o]/1e7|0,i=o+(s=u);i>o;)r=((c=h*(c=v[--s]%1e7)+(a=g*c+(l=v[s]/1e7|0)*h)%1e7*1e7+b[i]+r)/m|0)+(a/1e7|0)+g*l,b[i--]=c%m;b[i]=r}return r?++n:b.splice(0,1),W(e,b,n)},w.negated=function(){var e=new B(this);return e.s=-e.s||null,e},w.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new B(e,t)).s,!o||!t)return new B(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/14,s=e.e/14,a=n.c,u=e.c;if(!i||!s){if(!a||!u)return new B(o/0);if(!a[0]||!u[0])return u[0]?e:new B(a[0]?n:0*o)}if(i=d(i),s=d(s),a=a.slice(),o=i-s){for(o>0?(s=i,r=u):(o=-o,r=a),r.reverse();o--;r.push(0));r.reverse()}for((o=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=o),o=0;t;)o=(a[--t]=a[t]+u[t]+o)/p|0,a[t]=p===a[t]?0:a[t]%p;return o&&(a=[o].concat(a),++s),W(e,a,s)},w.precision=w.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return m(e,1,h),null==t?t=D:m(t,0,8),G(new B(i),e,t);if(!(r=i.c))return null;if(n=14*(o=r.length-1)+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},w.shiftedBy=function(e){return m(e,-9007199254740991,9007199254740991),this.times("1e"+e)},w.squareRoot=w.sqrt=function(){var e,t,n,o,i,s=this,a=s.c,u=s.s,c=s.e,l=I+4,p=new B("0.5");if(1!==u||!a||!a[0])return new B(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+H(s)))||u==1/0?(((t=g(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=d((c+1)/2)-(c<0||c%2),n=new B(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new B(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(i=n,n=p.times(i.plus(r(s,i,l,1))),g(i.c).slice(0,u)===(t=g(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(n,n.e+I+2,1),e=!n.times(n).eq(s));break}if(!o&&(G(i,i.e+I+2,0),i.times(i).eq(s))){n=i;break}l+=4,u+=4,o=1}return G(n,n.e+I+1,D,e)},w.toExponential=function(e,t){return null!=e&&(m(e,0,h),e++),L(this,e,t,1)},w.toFixed=function(e,t){return null!=e&&(m(e,0,h),e=e+this.e+1),L(this,e,t)},w.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=k;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",p=s[0],f=s[1],h=o.s<0,d=h?p.slice(1):p,g=d.length;if(u&&(i=a,a=u,u=i,g-=i),a>0&&g>0){for(i=g%a||a,p=d.substr(0,i);i<g;i+=a)p+=l+d.substr(i,a);u>0&&(p+=l+d.slice(i)),h&&(p="-"+p)}n=f?p+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):p}return(r.prefix||"")+n+(r.suffix||"")},w.toFraction=function(e){var t,n,o,i,s,a,u,l,p,h,d,b,m=this,y=m.c;if(null!=e&&(!(u=new B(e)).isInteger()&&(u.c||1!==u.s)||u.lt(E)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+H(u));if(!y)return new B(m);for(t=new B(E),p=n=new B(E),o=l=new B(E),b=g(y),s=t.e=b.length-m.e-1,t.c[0]=f[(a=s%14)<0?14+a:a],e=!e||u.comparedTo(t)>0?s>0?t:p:u,a=U,U=1/0,u=new B(b),l.c[0]=0;h=r(u,t,0,1),1!=(i=n.plus(h.times(o))).comparedTo(e);)n=o,o=i,p=l.plus(h.times(i=p)),l=i,t=u.minus(h.times(i=t)),u=i;return i=r(e.minus(n),o,0,1),l=l.plus(i.times(p)),n=n.plus(i.times(o)),l.s=p.s=m.s,d=r(p,o,s*=2,D).minus(m).abs().comparedTo(r(l,n,s,D).minus(m).abs())<1?[p,o]:[l,n],U=a,d},w.toNumber=function(){return+H(this)},w.toPrecision=function(e,t){return null!=e&&m(e,1,h),L(this,e,t,2)},w.toString=function(e){var t,r=this,o=r.s,i=r.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=R||i>=C?v(g(r.c),i):_(g(r.c),i,"0"):10===e&&z?t=_(g((r=G(new B(r),I+i+1,D)).c),r.e,"0"):(m(e,2,F.length,"Base"),t=n(_(g(r.c),i,"0"),10,e,o,!0)),o<0&&r.c[0]&&(t="-"+t)),t},w.valueOf=w.toJSON=function(){return H(this)},w._isBigNumber=!0,null!=t&&B.set(t),B}()).default=i.BigNumber=i,void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KolibriTokenHelper=void 0;const a=r(5),u=i(r(2)),c=r(7),l=r(4),p=r(3),f=r(6),h=r(9);!function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return h.TezosContractUtils.verifyDestination(e,t,"0e3e137841a959521324b4ce20ca2df7")}))},t.verifyScript=function(e){return h.TezosContractUtils.verifyScript(e,"b77ada691b1d630622bea243696c84d7")},t.getAccountBalance=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(n,"address"),"hex")),i=yield p.TezosNodeReader.getValueForBigMapKey(t,r,o);if(void 0===i)throw new Error(`Map ${r} does not contain a record for ${n}`);const s=(0,a.JSONPath)({path:"$.args[1].int",json:i});return Number(s[0])}))},t.getAccountAllowance=function(t,r,n,o){return s(this,void 0,void 0,(function*(){const i=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(o,"address"),"hex")),s=yield p.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${o}/${n}`);let u=new Map;return(0,a.JSONPath)({path:"$.args[1][*].args",json:s}).forEach(e=>u[e[0].string]=Number(e[1].int)),u[n]}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return{mapid:Number((0,a.JSONPath)({path:"$.args[0].args[0].args[1].int",json:r})[0]),supply:Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0]),administrator:(0,a.JSONPath)({path:"$.args[0].args[0].args[0].string",json:r})[0],paused:(0,a.JSONPath)({path:"$.args[1].args[1].prim",json:r})[0].toString().toLowerCase().startsWith("t")}}))},t.getTokenSupply=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0])}))},t.getAdministrator=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return(0,a.JSONPath)({path:"$.args[1].string",json:r})[0]}))},t.getPaused=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return(0,a.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,n,o,i,a,l,p,d){return s(this,void 0,void 0,(function*(){const s=`(Left (Left (Left (Pair "${i}" (Pair "${a}" ${l})))))`,g=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,d,p,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.approveBalance=function(e,t,r,n,o,i,a,l,p){return s(this,void 0,void 0,(function*(){const s=`(Left (Left (Right (Pair "${i}" ${a}))))`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.activateLedger=function(e,t,r,n,o,i,a){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,a,i,"","(Right (Left (Left False)))",u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.deactivateLedger=function(e,t,r,n,o,i,a){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,a,i,"","(Right (Left (Left True)))",u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.setAdministrator=function(e,t,r,n,o,i,a,l){return s(this,void 0,void 0,(function*(){const s=`(Right (Left (Right "${o}")))`,p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,i,l,a,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.mint=function(e,t,r,n,o,i,a,l=15e4,p=5e3){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Left (Pair "${i}" ${a})))))`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.burn=function(e,t,r,n,o,i,a,l,p){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Right (Pair "${i}" ${a})))))`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))}}(t.KolibriTokenHelper||(t.KolibriTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MurbardMultisigHelper=void 0;const a=i(r(22)),u=r(5),c=r(11),l=r(3),p=r(6),f=i(r(2));!function(t){t.verifyDestination=function(t,r){return s(this,void 0,void 0,(function*(){const n=yield l.TezosNodeReader.getAccountForBlock(t,"head",r);if(!n.script)throw new Error("No code found at "+r);const o=e.from(a.blake2s(JSON.stringify(n.script.code),null,16)).toString("hex");if("914629850cfdad7b54a8c5a661d10bd0"!==o)throw new Error(`Contract does not match the expected code hash: ${o}, '914629850cfdad7b54a8c5a661d10bd0'`);return!0}))},t.verifyScript=function(t){const r=e.from(a.blake2s(c.TezosLanguageUtil.preProcessMichelsonScript(t).join("\n"),null,16)).toString("hex");if("ffcad1e376a6c8915780fe6676aceec6"!==r)throw new Error(`Contract does not match the expected code hash: ${r}, 'ffcad1e376a6c8915780fe6676aceec6'`);return!0},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{counter:Number((0,u.JSONPath)({path:"$.args[0].int",json:r})[0]),threshold:Number((0,u.JSONPath)({path:"$.args[1].args[0].int",json:r})[0]),keys:(0,u.JSONPath)({path:"$.args[1].args[1]..string",json:r})}}))},t.deployContract=function(e,t,r,n,o,i,a,u,c){return s(this,void 0,void 0,(function*(){if(u>c.length)throw new Error("Number of keys provided is lower than the threshold");const s=`(Pair ${a} (Pair ${u} { "${c.join('" ; "')}" } ) )`,l=yield p.TezosNodeWriter.sendContractOriginationOperation(e,t,r,i,n,o,5e3,12e4,"parameter (pair (pair :payload (nat %counter) (or :action (pair :transfer (mutez %amount) (contract %dest unit)) (or (option %delegate key_hash) (pair %change_keys (nat %threshold) (list %keys key))))) (list %sigs (option signature)));\n        storage (pair (nat %stored_counter) (pair (nat %threshold) (list %keys key)));\n        code\n          {\n            UNPAIR ; SWAP ; DUP ; DIP { SWAP } ;\n            DIP\n              {\n                UNPAIR ;\n                DUP ; SELF ; ADDRESS ; CHAIN_ID ; PAIR ; PAIR ;\n                PACK ;\n                DIP { UNPAIR @counter ; DIP { SWAP } } ; SWAP\n              } ;\n            UNPAIR @stored_counter; DIP { SWAP };\n            ASSERT_CMPEQ ;\n            DIP { SWAP } ; UNPAIR @threshold @keys;\n            DIP\n              {\n                PUSH @valid nat 0; SWAP ;\n                ITER\n                  {\n                    DIP { SWAP } ; SWAP ;\n                    IF_CONS\n                      {\n                        IF_SOME\n                          { SWAP ;\n                            DIP\n                              {\n                                SWAP ; DIIP { DUUP } ;\n                                CHECK_SIGNATURE ; ASSERT ;\n                                PUSH nat 1 ; ADD @valid } }\n                          { SWAP ; DROP }\n                      }\n                      {\n                        FAIL\n                      } ;\n                    SWAP\n                  }\n              } ;\n            ASSERT_CMPLE ;\n            DROP ; DROP ;\n            DIP { UNPAIR ; PUSH nat 1 ; ADD @new_counter ; PAIR} ;\n            NIL operation ; SWAP ;\n            IF_LEFT\n              {\n                UNPAIR ; UNIT ; TRANSFER_TOKENS ; CONS }\n              { IF_LEFT {\n                          SET_DELEGATE ; CONS }\n                        {\n                          DIP { SWAP ; CAR } ; SWAP ; PAIR ; SWAP }} ;\n            PAIR }",s,f.TezosParameterFormat.Michelson);return l.operationGroupID.replace(/\"/g,"").replace(/\n/,"")}))}}(t.MurbardMultisigHelper||(t.MurbardMultisigHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TCFBakerRegistryHelper=void 0;const a=i(r(22)),u=r(5),c=r(4),l=r(3);!function(t){t.verifyDestination=function(t,r){return s(this,void 0,void 0,(function*(){const n=yield l.TezosNodeReader.getAccountForBlock(t,"head",r);if(!n.script)throw new Error("No code found at "+r);if("1527ddf08bdf582dce0b28c051044897"!==e.from(a.blake2s(n.script.toString(),null,16)).toString("hex"))throw new Error(`Contract at ${r} does not match the expected code hash`);return!0}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{mapid:parseInt((0,u.JSONPath)({path:"$.args[0].int",json:r})[0]),owner:(0,u.JSONPath)({path:"$.args[1].args[0].string",json:r})[0],signupFee:parseInt((0,u.JSONPath)({path:"$.args[1].args[1].args[0].int",json:r})[0]),updateFee:parseInt((0,u.JSONPath)({path:"$.args[1].args[1].args[1].int",json:r})[0])}}))},t.updateRegistration=function(e,t,r,n,o,i,a){return s(this,void 0,void 0,(function*(){}))},t.queryRegistration=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(n,"key_hash"),"hex")),i=yield l.TezosNodeReader.getValueForBigMapKey(t,r,o);if(!i)return;const s=new TextDecoder,a=Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[0].args[1].int",json:i})[0]);return{name:s.decode(e.from((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[0].args[0].args[0].bytes",json:i})[0],"hex")),isAcceptingDelegation:Boolean((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[0].args[0].args[1].prim",json:i})[0]),externalDataURL:s.decode(e.from((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[0].args[1].bytes",json:i})[0],"hex")),split:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[0].args[0].int",json:i})[0])/1e4,paymentAccounts:(0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[0].args[1]..string",json:i}),minimumDelegation:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[0].args[0].int",json:i})[0]),isGreedy:Boolean((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[0].args[1].prim",json:i})[0]),payoutDelay:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[0].int",json:i})[0]),payoutFrequency:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[1].args[0].int",json:i})[0]),minimumPayout:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[0].args[1].args[1].args[1].int",json:i})[0]),isCheap:Boolean((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[0].args[0].prim",json:i})[0]),paymentConfig:{payForOwnBlocks:Boolean(1&a),payForEndorsements:Boolean(2&a),payGainedFees:Boolean(4&a),payForAccusationGains:Boolean(8&a),subtractLostDepositsWhenAccused:Boolean(16&a),subtractLostRewardsWhenAccused:Boolean(32&a),subtractLostFeesWhenAccused:Boolean(64&a),payForRevelation:Boolean(128&a),subtractLostRewardsWhenMissRevelation:Boolean(256&a),subtractLostFeesWhenMissRevelation:Boolean(512&a),compensateMissedBlocks:!Boolean(1024&a),payForStolenBlocks:Boolean(2048&a),compensateMissedEndorsements:!Boolean(4096&a),compensateLowPriorityEndorsementLoss:!Boolean(8192&a)},overdelegationThreshold:Number((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[1].args[0].int",json:i})[0]),subtractRewardsFromUninvitedDelegation:Boolean((0,u.JSONPath)({path:"$.args[0].args[0].args[0].args[1].args[1].args[1].args[1].args[1].prim",json:i})[0]),recordManager:(0,u.JSONPath)({path:"$.args[0].args[1].args[0].string",json:i})[0],timestamp:new Date((0,u.JSONPath)({path:"$.args[1].string",json:i})[0])}}))}}(t.TCFBakerRegistryHelper||(t.TCFBakerRegistryHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tzip7ReferenceTokenHelper=void 0;const a=r(5),u=i(r(2)),c=r(7),l=r(4),p=r(3),f=r(6),h=r(9);!function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return h.TezosContractUtils.verifyDestination(e,t,"0e3e137841a959521324b4ce20ca2df7")}))},t.verifyScript=function(e){return h.TezosContractUtils.verifyScript(e,"b77ada691b1d630622bea243696c84d7")},t.deployContract=function(e,t,r,n,o,i=!0,a=0,l=15e4,p=5e3){return s(this,void 0,void 0,(function*(){const s=`Pair {} (Pair "${o}" (Pair ${i?"True":"False"} ${a}))`,d=yield f.TezosNodeWriter.sendContractOriginationOperation(e,t,r,0,void 0,n,p,l,'parameter (or (or (or (pair %transfer (address :from) (pair (address :to) (nat :value))) (pair %approve (address :spender) (nat :value))) (or (pair %getAllowance (pair (address :owner) (address :spender)) (contract nat)) (or (pair %getBalance (address :owner) (contract nat)) (pair %getTotalSupply unit (contract nat))))) (or (or (bool %setPause) (address %setAdministrator)) (or (pair %getAdministrator unit (contract address)) (or (pair %mint (address :to) (nat :value)) (pair %burn (address :from) (nat :value))))));\n        storage (pair (big_map %ledger (address :user) (pair (nat :balance) (map :approvals (address :spender) (nat :value)))) (pair (address %admin) (pair (bool %paused) (nat %totalSupply))));\n        code { CAST (pair (or (or (or (pair address (pair address nat)) (pair address nat)) (or (pair (pair address address) (contract nat)) (or (pair address (contract nat)) (pair unit (contract nat))))) (or (or bool address) (or (pair unit (contract address)) (or (pair address nat) (pair address nat))))) (pair (big_map address (pair nat (map address nat))) (pair address (pair bool nat)))); DUP; CAR; DIP { CDR }; IF_LEFT { IF_LEFT { IF_LEFT { DIP { DUP; CDR; CDR; CAR; IF { UNIT; PUSH string "TokenOperationsArePaused"; PAIR; FAILWITH } {  } }; DUP; DUP; CDR; CAR; DIP { CAR }; COMPARE; EQ; IF { DROP } { DUP; CAR; SENDER; COMPARE; EQ; IF {  } { DUP; DIP { DUP; DIP { DIP { DUP }; CAR; SENDER; PAIR; DUP; DIP { CDR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CAR; GET; IF_NONE { PUSH nat 0 } {  } }; DUP; CAR; DIP { SENDER; DIP { DUP; CDR; CDR; DIP { DIP { DUP }; SWAP }; SWAP; SUB; ISNAT; IF_NONE { DIP { DUP }; SWAP; DIP { DUP }; SWAP; CDR; CDR; PAIR; PUSH string "NotEnoughAllowance"; PAIR; FAILWITH } {  } }; PAIR }; PAIR; DIP { DROP; DROP }; DIP { DUP }; SWAP; DIP { DUP; CAR }; SWAP; DIP { CAR }; GET; IF_NONE { PUSH nat 0; DIP { EMPTY_MAP (address) nat }; PAIR; EMPTY_MAP (address) nat } { DUP; CDR }; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; DUP; INT; EQ; IF { DROP; NONE nat } { SOME }; DIP { DIP { DIP { DUP }; SWAP }; SWAP }; SWAP; CDR; CAR; UPDATE; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; CAR; DIP { SOME }; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CDR; CAR; DIP { CAR }; GET; IF_NONE { DUP; CDR; CDR; INT; EQ; IF { NONE (pair nat (map address nat)) } { DUP; CDR; CDR; DIP { EMPTY_MAP (address) nat }; PAIR; SOME } } { DIP { DUP }; SWAP; CDR; CDR; DIP { DUP; CAR }; ADD; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SOME }; SWAP; DUP; DIP { CDR; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; CDR; INT; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { CDR; CDR; PUSH nat 0; SWAP; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DUP; CAR; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; SWAP; SUB; ISNAT; IF_NONE { CAR; DIP { DUP }; SWAP; CDR; CDR; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP }; SWAP; DIP { DUP; CAR; INT; EQ; IF { DUP; CDR; SIZE; INT; EQ; IF { DROP; NONE (pair nat (map address nat)) } { SOME } } { SOME }; SWAP; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; CDR; NEG; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP }; NIL operation; PAIR } { SENDER; PAIR; DIP { DUP; CDR; CDR; CAR; IF { UNIT; PUSH string "TokenOperationsArePaused"; PAIR; FAILWITH } {  } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; DUP; DIP { CAR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CDR; CAR; GET; IF_NONE { PUSH nat 0 } {  }; DUP; INT; EQ; IF { DROP } { DIP { DUP }; SWAP; CDR; CDR; INT; EQ; IF { DROP } { PUSH string "UnsafeAllowanceChange"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP; CAR }; SWAP; DIP { CAR }; GET; IF_NONE { PUSH nat 0; DIP { EMPTY_MAP (address) nat }; PAIR; EMPTY_MAP (address) nat } { DUP; CDR }; DIP { DIP { DUP }; SWAP }; SWAP; CDR; CDR; DUP; INT; EQ; IF { DROP; NONE nat } { SOME }; DIP { DIP { DIP { DUP }; SWAP }; SWAP }; SWAP; CDR; CAR; UPDATE; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; CAR; DIP { SOME }; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; NIL operation; PAIR } } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; DUP; CAR; DIP { CDR }; DUP; DIP { CAR; DIP { CAR }; GET; IF_NONE { EMPTY_MAP (address) nat } { CDR } }; CDR; GET; IF_NONE { PUSH nat 0 } {  }; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; DUP; CAR; DIP { CDR }; DIP { CAR }; GET; IF_NONE { PUSH nat 0 } { CAR }; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; CDR; CDR; CDR; CDR; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } } } } { IF_LEFT { IF_LEFT { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; NIL operation; PAIR } { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP; CDR }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; NIL operation; PAIR } } { IF_LEFT { DUP; CAR; DIP { CDR }; DIP { DIP { DUP }; SWAP }; PAIR; CDR; CDR; CAR; DIP { AMOUNT }; TRANSFER_TOKENS; NIL operation; SWAP; CONS; PAIR } { IF_LEFT { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { DUP; CDR; INT; EQ; IF { NONE (pair nat (map address nat)) } { DUP; CDR; DIP { EMPTY_MAP (address) nat }; PAIR; SOME } } { DIP { DUP }; SWAP; CDR; DIP { DUP; CAR }; ADD; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; SOME }; SWAP; DUP; DIP { CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; INT; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP; NIL operation; PAIR } { DIP { DUP; CDR; CAR; SENDER; COMPARE; EQ; IF {  } { UNIT; PUSH string "SenderIsNotAdmin"; PAIR; FAILWITH } }; DIP { DUP }; SWAP; DIP { DUP }; SWAP; CAR; DIP { CAR }; GET; IF_NONE { CDR; PUSH nat 0; SWAP; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DUP; CAR; DIP { DIP { DUP }; SWAP }; SWAP; CDR; SWAP; SUB; ISNAT; IF_NONE { CAR; DIP { DUP }; SWAP; CDR; PAIR; PUSH string "NotEnoughBalance"; PAIR; FAILWITH } {  }; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR; DIP { DUP }; SWAP; DIP { DUP; CAR; INT; EQ; IF { DUP; CDR; SIZE; INT; EQ; IF { DROP; NONE (pair nat (map address nat)) } { SOME } } { SOME }; SWAP; CAR; DIP { DIP { DUP; CAR } }; UPDATE; DIP { DUP; DIP { CDR }; CAR }; DIP { DROP }; PAIR }; DUP; DIP { CDR; NEG; DIP { DUP; CDR; CDR; CDR }; ADD; ISNAT; IF_NONE { PUSH string "Internal: Negative total supply"; FAILWITH } {  }; DIP { DUP; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR; SWAP; PAIR; DIP { DUP; DIP { CAR }; CDR }; DIP { DROP }; SWAP; PAIR }; DROP; NIL operation; PAIR } } } } };',s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.getAccountBalance=function(t,r,n,o="$.args[0].int"){return s(this,void 0,void 0,(function*(){const i=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(n,"address"),"hex")),s=yield p.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${n}`);const u=(0,a.JSONPath)({path:o,json:s});return Number(u[0])}))},t.getAccountAllowance=function(t,r,n,o){return s(this,void 0,void 0,(function*(){const i=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(o,"address"),"hex")),s=yield p.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${o}/${n}`);let u=new Map;return(0,a.JSONPath)({path:"$.args[1][*].args",json:s}).forEach(e=>u[e[0].string]=Number(e[1].int)),u[n]}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return{mapid:Number((0,a.JSONPath)({path:"$.args[0].int",json:r})[0]),supply:Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0]),administrator:(0,a.JSONPath)({path:"$.args[1].string",json:r})[0],paused:(0,a.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}}))},t.getTokenSupply=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0])}))},t.getAdministrator=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return(0,a.JSONPath)({path:"$.args[1].string",json:r})[0]}))},t.getPaused=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return(0,a.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,n,o,i,a,l,p,d){return s(this,void 0,void 0,(function*(){const s=`(Pair "${i}" (Pair "${a}" ${l}))`,g=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,d,p,"transfer",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.ApproveBalanceOperation=function(e,t,r,n,o,i,s=8e5,a){const c=`(Pair "${t}" ${e})`;return f.TezosNodeWriter.constructContractInvocationOperation(o,r,n,0,i,a,s,"approve",c,u.TezosParameterFormat.Michelson)},t.approveBalance=function(e,t,r,n,o,i,a,l,p){return s(this,void 0,void 0,(function*(){const s=`(Pair "${i}" ${a})`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"approve",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.activateLedger=function(e,t,r,n,o,i,a){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,a,i,"","(Right (Left (Left False)))",u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.deactivateLedger=function(e,t,r,n,o,i,a){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,a,i,"","(Right (Left (Left True)))",u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.setAdministrator=function(e,t,r,n,o,i,a,l){return s(this,void 0,void 0,(function*(){const s=`(Right (Left (Right "${o}")))`,p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,i,l,a,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.mint=function(e,t,r,n,o,i,a,l=15e4,p=5e3){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Left (Pair "${i}" ${a})))))`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))},t.burn=function(e,t,r,n,o,i,a,l,p){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Right (Pair "${i}" ${a})))))`,d=yield f.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,u.TezosParameterFormat.Michelson,c.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(d.operationGroupID)}))}}(t.Tzip7ReferenceTokenHelper||(t.Tzip7ReferenceTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ChainlinkTokenHelper=void 0;const a=r(5),u=i(r(2)),c=r(4),l=r(3),p=r(6),f=r(9);!function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return f.TezosContractUtils.verifyDestination(e,t,"cdf4fb6303d606686694d80bd485b6a1")}))},t.verifyScript=function(e){return f.TezosContractUtils.verifyScript(e,"000")},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{administrator:(0,a.JSONPath)({path:"$.args[0].args[0].string",json:r})[0],tokens:Number((0,a.JSONPath)({path:"$.args[0].args[1].args[0].int",json:r})[0]),balanceMap:Number((0,a.JSONPath)({path:"$.args[0].args[1].args[1].int",json:r})[0]),operatorMap:Number((0,a.JSONPath)({path:"$.args[1].args[0].args[1].int",json:r})[0]),paused:(0,a.JSONPath)({path:"$.args[1].args[1].args[0].prim",json:r})[0].toString().toLowerCase().startsWith("t"),metadataMap:Number((0,a.JSONPath)({path:"$.args[1].args[1].args[1].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r,n=0){return s(this,void 0,void 0,(function*(){const o=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(n,"nat"),"hex")),i=yield l.TezosNodeReader.getValueForBigMapKey(t,r,o);if(void 0===i)throw new Error(`Map ${r} does not contain a record for token ${n}`);return{tokenid:Number((0,a.JSONPath)({path:"$.args[0].int",json:i})[0]),symbol:(0,a.JSONPath)({path:"$.args[1].args[0].string",json:i})[0],name:(0,a.JSONPath)({path:"$.args[1].args[1].args[0].string",json:i})[0],scale:Number((0,a.JSONPath)({path:"$.args[1].args[1].args[1].args[0].int",json:i})[0])}}))},t.transfer=function(e,t,r,n,o,i,a,c=2e5,l=1e3){return s(this,void 0,void 0,(function*(){const s=`{ Pair "${i}" { ${a.map(e=>`(Pair "${e.address}" (Pair ${e.tokenid}  ${e.balance}))`).join(" ; ")} } }`,h=yield p.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,l,c,"transfer",s,u.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(h.operationGroupID)}))},t.getAccountBalance=function(t,r,n){return s(this,void 0,void 0,(function*(){const o="0x"+c.TezosMessageUtils.writeAddress(n),i=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(""+o,"",u.TezosParameterFormat.Michelson),"hex")),s=yield l.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${n}`);const p=(0,a.JSONPath)({path:"$.int",json:s});return Number(p[0])}))}}(t.ChainlinkTokenHelper||(t.ChainlinkTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiAssetTokenHelper=t.TransferPairMichelson=t.TokenTransactionMichelson=void 0;const a=r(5),u=r(7),c=i(r(2)),l=r(4),p=r(3),f=r(6),h=r(9);function d(e){return`Pair "${e.destination}" (Pair ${e.token_id} ${e.amount})`}function g(e){return`{ ${e.map(e=>{const t=e.txs.map(e=>d(e)).join("; ");return`Pair "${e.source}" { ${t} }`}).join("; ")} }`}t.TokenTransactionMichelson=d,t.TransferPairMichelson=g,function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return h.TezosContractUtils.verifyDestination(e,t,"cdf4fb6303d606686694d80bd485b6a1")}))},t.verifyScript=function(e){return h.TezosContractUtils.verifyScript(e,"000")},t.deployContract=function(t,r,n,o,i,a,u=!0,l=8e5,p=2e4){return s(this,void 0,void 0,(function*(){const s=u?"True":"False",d=`(Pair (Pair (Pair "${i}" 0) (Pair {} {Elt "" 0x${e.from(a,"utf-8").toString("hex")}})) (Pair (Pair {} ${s}) (Pair {} {})))`,g=yield f.TezosNodeWriter.sendContractOriginationOperation(t,r,n,0,void 0,o,p,l,'parameter (or (or (pair %balance_of (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))))) (or (pair %mint (pair (address %address) (nat %amount)) (pair (map %metadata string bytes) (nat %token_id))) (address %set_administrator))) (or (or (pair %set_metadata (string %k) (bytes %v)) (bool %set_pause)) (or (list %transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) (list %update_operators (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))))))); \n        storage (pair (pair (pair (address %administrator) (nat %all_tokens)) (pair (big_map %ledger (pair address nat) nat) (big_map %metadata string bytes))) (pair (pair (big_map %operators (pair (address %owner) (pair (address %operator) (nat %token_id))) unit) (bool %paused)) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes))) (big_map %total_supply nat nat)))); \n        code { CAST (pair (or (or (pair (list (pair address nat)) (contract (list (pair (pair address nat) nat)))) (or (pair (pair address nat) (pair (map string bytes) nat)) address)) (or (or (pair string bytes) bool) (or (list (pair address (list (pair address (pair nat nat))))) (list (or (pair address (pair address nat)) (pair address (pair address nat))))))) (pair (pair (pair address nat) (pair (big_map (pair address nat) nat) (big_map string bytes))) (pair (pair (big_map (pair address (pair address nat)) unit) bool) (pair (big_map nat (pair nat (map string bytes))) (big_map nat nat))))); UNPAIR; IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; CAR; MAP { DUP 3; GET 5; SWAP; DUP; DUG 2; CDR; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP 3; CAR; GET 3; SWAP; DUP; CDR; SWAP; DUP; DUG 3; CAR; PAIR; MEM; IF { DUP 3; CAR; GET 3; SWAP; DUP; CDR; SWAP; DUP; DUG 3; CAR; PAIR; GET; IF_SOME { } { PUSH int 430; FAILWITH; }; SWAP; PAIR; } { PUSH nat 0; SWAP; PAIR; }; }; NIL operation; DIG 2; CDR; PUSH mutez 0; DIG 3; TRANSFER_TOKENS; CONS; } { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; DUP; GET 4; DUP 3; CAR; CAR; CDR; COMPARE; EQ; IF {} { PUSH string "Token-IDs should be consecutive"; FAILWITH; }; SWAP; DUP; DUG 2; UNPAIR; UNPAIR; CAR; DIG 4; CAR; CAR; CDR; DUP; PUSH nat 1; DUP 7; GET 4; ADD; DUP; DUG 2; COMPARE; LE; IF { DROP; } { SWAP; DROP; }; SWAP; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 3; SWAP; DUP; GET 4; SWAP; DUP; DUG 3; CAR; CAR; PAIR; MEM; IF { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DIG 5; DUP; GET 4; SWAP; DUP; DUG 7; CAR; CAR; PAIR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 541; FAILWITH; }; DUP 7; CAR; CDR; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; } { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; CAR; CDR; SOME; DIG 5; DUP; GET 4; SWAP; DUP; DUG 7; CAR; CAR; PAIR; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; }; SWAP; DUP; DUG 2; GET 5; SWAP; DUP; DUG 2; GET 4; MEM; IF { DROP; } { SWAP; DUP; GET 5; DIG 2; DUP; GET 3; SWAP; DUP; DUG 4; GET 4; PAIR; SOME; DUP 4; GET 4; UPDATE; UPDATE 5; DUP; GET 6; DUP 3; CAR; CDR; SOME; DIG 3; GET 4; UPDATE; UPDATE 6; }; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; CDR; DIG 3; PAIR; PAIR; PAIR; }; NIL operation; }; } { IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; DUP 5; CDR; SOME; DIG 5; CAR; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; SWAP; UNPAIR; CAR; DIG 3; SWAP; PAIR; PAIR; SWAP; PAIR; }; } { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; ITER { DUP; CDR; ITER { DUP 4; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { SENDER; DUP 3; CAR; COMPARE; EQ; }; IF { PUSH bool True; } { DUP 4; GET 3; CAR; SWAP; DUP; DUG 2; GET 3; SENDER; DUP 5; CAR; PAIR 3; MEM; }; IF {} { PUSH string "FA2_NOT_OPERATOR"; FAILWITH; }; DUP 4; GET 5; SWAP; DUP; DUG 2; GET 3; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; LT; IF { DUP; GET 4; DUP 5; CAR; GET 3; DUP 3; GET 3; DUP 5; CAR; PAIR; GET; IF_SOME { } { PUSH int 408; FAILWITH; }; COMPARE; GE; IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH; }; DUP 4; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; GET 3; DUP 8; CAR; PAIR; DUP; DUG 2; GET; IF_SOME { DROP; } { PUSH int 412; FAILWITH; }; DUP 6; GET 4; DIG 9; CAR; GET 3; DUP 8; GET 3; DUP 10; CAR; PAIR; GET; IF_SOME { } { PUSH int 412; FAILWITH; }; SUB; ISNAT; IF_SOME {} { PUSH int 412; FAILWITH; }; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUP; DUG 4; CAR; GET 3; SWAP; DUP; GET 3; SWAP; DUP; DUG 3; CAR; PAIR; MEM; IF { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DIG 5; DUP; GET 3; SWAP; DUP; DUG 7; CAR; PAIR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 415; FAILWITH; }; DIG 6; GET 4; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; } { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; GET 4; SOME; DIG 5; DUP; GET 3; SWAP; CAR; PAIR; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; }; } { DROP; }; }; DROP; }; DROP; } { DUP; ITER { IF_LEFT { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; PUSH (option unit) (Some Unit); DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; } { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; NONE unit; DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; }; }; DROP; }; }; NIL operation; }; PAIR; };',d,c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield p.TezosNodeReader.getContractStorage(e,t);return{administrator:(0,a.JSONPath)({path:"$.args[0].args[0].string",json:r})[0],tokens:Number((0,a.JSONPath)({path:"$.args[0].args[1].int",json:r})[0]),ledger:Number((0,a.JSONPath)({path:"$.args[0].args[2].int",json:r})[0]),metadata:Number((0,a.JSONPath)({path:"$.args[0].args[2].int",json:r})[0]),paused:(0,a.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),operators:Number((0,a.JSONPath)({path:"$.args[1].args[0].int",json:r})[0]),tokenMetadata:Number((0,a.JSONPath)({path:"$.args[2].int",json:r})[0]),totalSupply:Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r,n=0){return s(this,void 0,void 0,(function*(){const o=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(n,"nat"),"hex")),i=yield p.TezosNodeReader.getValueForBigMapKey(t,r,o);if(void 0===i)throw new Error(`Map ${r} does not contain a record for token ${n}`);const s={tokenid:Number((0,a.JSONPath)({path:"$.args[0].int",json:i})[0]),metadata:{}};return i.args[1].forEach(t=>{s.metadata[t.args[0].string]=e.from(t.args[1].bytes,"hex").toString()}),s}))},t.activate=function(e,t,r,n,o,i=8e5,a=2e4){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,a,i,"set_pause","False",c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.deactivate=function(e,t,r,n,o,i=8e5,a=2e4){return s(this,void 0,void 0,(function*(){const s=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,a,i,"set_pause","True",c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.changeAdministrator=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){const s=`"${i}"`,l=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"set_administrator",s,c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.mint=function(t,r,n,o,i,a,u,l,p,d=8e5,g=2e4){return s(this,void 0,void 0,(function*(){const s=Object.keys(l).sort();let b="";for(let t of s)""!==b&&(b+="; "),b+=`Elt "${t}" 0x${e.from(l[t],"utf-8").toString("hex")}`;const m=`(Pair (Pair "${a}" ${u}) (Pair {${b}} ${p}))`,y=yield f.TezosNodeWriter.sendContractInvocationOperation(t,n,o,r,0,i,g,d,"mint",m,c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(y.operationGroupID)}))},t.transfer=function(e,t,r,n,o,i,a=8e5,l=2e4){return s(this,void 0,void 0,(function*(){const s=g(i),p=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,l,a,"transfer",s,c.TezosParameterFormat.Michelson,u.TezosConstants.HeadBranchOffset,!0);return h.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.AddOperatorsOperation=function(e,t,r,n,o,i=8e5,s=2e4){let a="{";return o.forEach(e=>{"{"!==a&&(a+="; "),a+=`Left (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),a+="}",f.TezosNodeWriter.constructContractInvocationOperation(r,t,e,0,n,s,i,"update_operators",a,c.TezosParameterFormat.Michelson)},t.addOperators=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){let s="{";i.forEach(e=>{"{"!==s&&(s+="; "),s+=`Left (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),s+="}";const l=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"update_operators",s,c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.RemoveOperatorsOperation=function(e,t,r,n,o,i=8e5,s=2e4){let a="{";return o.forEach(e=>{"{"!==a&&(a+="; "),a+=`Right (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),a+="}",f.TezosNodeWriter.constructContractInvocationOperation(r,t,e,0,n,s,i,"update_operators",a,c.TezosParameterFormat.Michelson)},t.removeOperators=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){let s="{";i.forEach(e=>{"{"!==s&&(s+="; "),s+=`Right (Pair "${e.owner}" (Pair "${e.operator}" ${e.tokenid}))`}),s+="}";const l=yield f.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"update_operators",s,c.TezosParameterFormat.Michelson);return h.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.getAccountBalance=function(t,r,n,o,i="$.int"){return s(this,void 0,void 0,(function*(){const s="0x"+l.TezosMessageUtils.writeAddress(n),u=l.TezosMessageUtils.encodeBigMapKey(e.from(l.TezosMessageUtils.writePackedData(`(Pair ${s} ${o})`,"",c.TezosParameterFormat.Michelson),"hex")),f=yield p.TezosNodeReader.getValueForBigMapKey(t,r,u);if(void 0===f)throw new Error(`Map ${r} does not contain a record for ${n}/${o}`);const h=(0,a.JSONPath)({path:i,json:f});return Number(h[0])}))}}(t.MultiAssetTokenHelper||(t.MultiAssetTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SingleAssetTokenHelper=void 0;const a=r(5),u=r(4),c=r(3),l=r(6),p=i(r(2)),f=r(9),h=r(7);!function(t){t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return f.TezosContractUtils.verifyDestination(e,t,"17aab0975df6139f4ff29be76a67f348")}))},t.verifyScript=function(e){return f.TezosContractUtils.verifyScript(e,"000")},t.deployContract=function(t,r,n,o,i,a,u=!0,c=8e5,h=2e4){return s(this,void 0,void 0,(function*(){const s=u?"True":"False",d=`(Pair (Pair (Pair "${i}" 0) (Pair {} {Elt ""  0x${e.from(a,"utf-8").toString("hex")}})) (Pair (Pair {} ${s}) (Pair {} {})))`,g=yield l.TezosNodeWriter.sendContractOriginationOperation(t,r,n,0,void 0,o,h,c,'parameter (or (or (pair %balance_of (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))))) (or (pair %mint (pair (address %address) (nat %amount)) (pair (map %metadata string bytes) (nat %token_id))) (address %set_administrator))) (or (or (pair %set_metadata (string %k) (bytes %v)) (bool %set_pause)) (or (list %transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) (list %update_operators (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))))))); \n        storage (pair (pair (pair (address %administrator) (nat %all_tokens)) (pair (big_map %ledger address nat) (big_map %metadata string bytes))) (pair (pair (big_map %operators (pair (address %owner) (pair (address %operator) (nat %token_id))) unit) (bool %paused)) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes))) (big_map %total_supply nat nat)))); \n        code { CAST (pair (or (or (pair (list (pair address nat)) (contract (list (pair (pair address nat) nat)))) (or (pair (pair address nat) (pair (map string bytes) nat)) address)) (or (or (pair string bytes) bool) (or (list (pair address (list (pair address (pair nat nat))))) (list (or (pair address (pair address nat)) (pair address (pair address nat))))))) (pair (pair (pair address nat) (pair (big_map address nat) (big_map string bytes))) (pair (pair (big_map (pair address (pair address nat)) unit) bool) (pair (big_map nat (pair nat (map string bytes))) (big_map nat nat))))); UNPAIR; IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; CAR; MAP { DUP 3; GET 5; SWAP; DUP; DUG 2; CDR; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP 3; CAR; GET 3; SWAP; DUP; DUG 2; CAR; MEM; IF { DUP 3; CAR; GET 3; SWAP; DUP; DUG 2; CAR; GET; IF_SOME { } { PUSH int 430; FAILWITH; }; SWAP; PAIR; } { PUSH nat 0; SWAP; PAIR; }; }; NIL operation; DIG 2; CDR; PUSH mutez 0; DIG 3; TRANSFER_TOKENS; CONS; } { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; EQ; IF {} { PUSH string "single-asset: token-id <> 0"; FAILWITH; }; DUP; GET 4; DUP 3; CAR; CAR; CDR; COMPARE; EQ; IF {} { PUSH string "Token-IDs should be consecutive"; FAILWITH; }; SWAP; DUP; DUG 2; UNPAIR; UNPAIR; CAR; DIG 4; CAR; CAR; CDR; DUP; PUSH nat 1; DUP 7; GET 4; ADD; DUP; DUG 2; COMPARE; LE; IF { DROP; } { SWAP; DROP; }; SWAP; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 3; SWAP; DUP; DUG 2; CAR; CAR; MEM; IF { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; CAR; CAR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 541; FAILWITH; }; DUP 7; CAR; CDR; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; } { SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; CAR; CDR; SOME; DUP 6; CAR; CAR; UPDATE; PAIR; SWAP; PAIR; PAIR; SWAP; }; SWAP; DUP; DUG 2; GET 5; SWAP; DUP; DUG 2; GET 4; MEM; IF { DROP; } { SWAP; DUP; GET 5; DIG 2; DUP; GET 3; SWAP; DUP; DUG 4; GET 4; PAIR; SOME; DUP 4; GET 4; UPDATE; UPDATE 5; DUP; GET 6; DUP 3; CAR; CDR; SOME; DIG 3; GET 4; UPDATE; UPDATE 6; }; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; CDR; DIG 3; PAIR; PAIR; PAIR; }; NIL operation; }; } { IF_LEFT { IF_LEFT { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; DUP 5; CDR; SOME; DIG 5; CAR; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; } { SWAP; DUP; DUG 2; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF {} { PUSH string "FA2_NOT_ADMIN"; FAILWITH; }; SWAP; UNPAIR; SWAP; UNPAIR; CAR; DIG 3; SWAP; PAIR; PAIR; SWAP; PAIR; }; } { IF_LEFT { SWAP; DUP; DUG 2; GET 3; CDR; IF { PUSH string "FA2_PAUSED"; FAILWITH; } {}; DUP; ITER { DUP; CDR; ITER { DUP; GET 3; PUSH nat 0; COMPARE; EQ; IF {} { PUSH string "single-asset: token-id <> 0"; FAILWITH; }; DUP 4; CAR; CAR; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { SENDER; DUP 3; CAR; COMPARE; EQ; }; IF { PUSH bool True; } { DUP 4; GET 3; CAR; SWAP; DUP; DUG 2; GET 3; SENDER; DUP 5; CAR; PAIR 3; MEM; }; IF {} { PUSH string "FA2_NOT_OPERATOR"; FAILWITH; }; DUP 4; GET 5; SWAP; DUP; DUG 2; GET 3; MEM; IF {} { PUSH string "FA2_TOKEN_UNDEFINED"; FAILWITH; }; DUP; GET 4; PUSH nat 0; COMPARE; LT; IF { DUP; GET 4; DUP 5; CAR; GET 3; DUP 4; CAR; GET; IF_SOME { } { PUSH int 408; FAILWITH; }; COMPARE; GE; IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE"; FAILWITH; }; DUP 4; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 7; CAR; DUP; DUG 2; GET; IF_SOME { DROP; } { PUSH int 412; FAILWITH; }; DUP 6; GET 4; DIG 9; CAR; GET 3; DUP 9; CAR; GET; IF_SOME { } { PUSH int 412; FAILWITH; }; SUB; ISNAT; IF_SOME {} { PUSH int 412; FAILWITH; }; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUP; DUG 4; CAR; GET 3; SWAP; DUP; DUG 2; CAR; MEM; IF { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP; DUP 6; CAR; DUP; DUG 2; GET; IF_SOME {} { PUSH int 415; FAILWITH; }; DIG 6; GET 4; ADD; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; } { DIG 3; UNPAIR; UNPAIR; SWAP; UNPAIR; DUP 5; GET 4; SOME; DIG 5; CAR; UPDATE; PAIR; SWAP; PAIR; PAIR; DUG 2; }; } { DROP; }; }; DROP; }; DROP; } { DUP; ITER { IF_LEFT { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; PUSH (option unit) (Some Unit); DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; } { DUP; CAR; SENDER; COMPARE; EQ; IF { PUSH bool True; } { DUP 3; CAR; CAR; CAR; SENDER; COMPARE; EQ; }; IF {} { PUSH string "FA2_NOT_ADMIN_OR_OPERATOR"; FAILWITH; }; DIG 2; UNPAIR; SWAP; UNPAIR; UNPAIR; NONE unit; DIG 5; DUP; GET 4; SWAP; DUP; GET 3; SWAP; CAR; PAIR 3; UPDATE; PAIR; PAIR; SWAP; PAIR; SWAP; }; }; DROP; }; }; NIL operation; }; PAIR; };',d,p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield c.TezosNodeReader.getContractStorage(e,t);return{administrator:(0,a.JSONPath)({path:"$.args[0].args[0].args[0].string",json:r})[0],tokens:Number((0,a.JSONPath)({path:"$.args[0].args[0].args[1].int",json:r})[0]),ledger:Number((0,a.JSONPath)({path:"$.args[0].args[1].int",json:r})[0]),metadata:Number((0,a.JSONPath)({path:"$.args[0].args[2].int",json:r})[0]),paused:(0,a.JSONPath)({path:"$.args[1].args[1].prim",json:r})[0].toString().toLowerCase().startsWith("t"),operators:Number((0,a.JSONPath)({path:"$.args[1].args[0].int",json:r})[0]),tokenMetadata:Number((0,a.JSONPath)({path:"$.args[2].int",json:r})[0]),totalSupply:Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0])}}))},t.getTokenDefinition=function(t,r){return s(this,void 0,void 0,(function*(){const n=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(0,"nat"),"hex")),o=yield c.TezosNodeReader.getValueForBigMapKey(t,r,n);if(void 0===o)throw new Error(`Map ${r} does not contain a record for token 0`);const i={tokenid:Number((0,a.JSONPath)({path:"$.args[0].int",json:o})[0]),metadata:{}};return o.args[1].forEach(t=>{i.metadata[t.args[0].string]=e.from(t.args[1].bytes,"hex").toString()}),i}))},t.activate=function(e,t,r,n,o,i=8e5,a=2e4){return s(this,void 0,void 0,(function*(){const s=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,a,i,"set_pause","False",p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.deactivate=function(e,t,r,n,o,i=8e5,a=2e4){return s(this,void 0,void 0,(function*(){const s=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,a,i,"set_pause","True",p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.changeAdministrator=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){const s=`"${i}"`,c=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"set_administrator",s,p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.mint=function(t,r,n,o,i,a,u,c,h=8e5,d=2e4){return s(this,void 0,void 0,(function*(){const s=Object.keys(c).sort();let g="";for(let t of s)""!==g&&(g+="; "),g+=`Elt "${t}" 0x${e.from(c[t],"utf-8").toString("hex")}`;const b=`(Pair (Pair "${a}" ${u}) (Pair {${g}} 1))`,m=yield l.TezosNodeWriter.sendContractInvocationOperation(t,n,o,r,0,i,d,h,"mint",b,p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(m.operationGroupID)}))},t.transfer=function(e,t,r,n,o,i,a,c=8e5,d=2e4){return s(this,void 0,void 0,(function*(){const s=`{ Pair 0x${u.TezosMessageUtils.writeAddress(i)} { ${a.map(e=>"( Pair 0x"+u.TezosMessageUtils.writeAddress(e.address)+" ( Pair 0 "+e.amount+" ) )").join(" ; ")} } }`,g=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,d,c,"transfer",s,p.TezosParameterFormat.Michelson,h.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.addOperators=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){let s="{";i.forEach(e=>{"{"!==s&&(s+="; "),s+=`Left (Pair "${e.owner}" (Pair "${e.operator}" 0))`}),s+="}";const c=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"update_operators",s,p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.removeOperators=function(e,t,r,n,o,i,a=8e5,u=2e4){return s(this,void 0,void 0,(function*(){let s="{";i.forEach(e=>{"{"!==s&&(s+="; "),s+=`Right (Pair "${e.owner}" (Pair "${e.operator}" 0))`}),s+="}";const c=yield l.TezosNodeWriter.sendContractInvocationOperation(e,r,n,t,0,o,u,a,"update_operators",s,p.TezosParameterFormat.Michelson);return f.TezosContractUtils.clearRPCOperationGroupHash(c.operationGroupID)}))},t.getAccountBalance=function(t,r,n,o="$.int"){return s(this,void 0,void 0,(function*(){const i=u.TezosMessageUtils.encodeBigMapKey(e.from(u.TezosMessageUtils.writePackedData(n,"address"),"hex")),s=yield c.TezosNodeReader.getValueForBigMapKey(t,r,i);if(void 0===s)throw new Error(`Map ${r} does not contain a record for ${n}`);return Number((0,a.JSONPath)({path:o,json:s})[0])}))}}(t.SingleAssetTokenHelper||(t.SingleAssetTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TzbtcTokenHelper=void 0;const a=r(5),u=r(7),c=i(r(2)),l=r(11),p=r(4),f=r(3),h=r(6),d=r(9);!function(t){function r(t,r,n){return s(this,void 0,void 0,(function*(){const o=e.from(p.TezosMessageUtils.writePackedData(n,"",c.TezosParameterFormat.Michelson),"hex"),i=p.TezosMessageUtils.writePackedData(o,"bytes"),s=p.TezosMessageUtils.encodeBigMapKey(e.from(i,"hex")),u=yield f.TezosNodeReader.getValueForBigMapKey(t,r,s);if(void 0===u)throw new Error(`Could not get data from map ${r} for '${n}'`);const h=(0,a.JSONPath)({path:"$.bytes",json:u})[0];return JSON.parse(l.TezosLanguageUtil.hexToMicheline(h.slice(2)).code)}))}t.verifyDestination=function(e,t){return s(this,void 0,void 0,(function*(){return d.TezosContractUtils.verifyDestination(e,t,"187c967006ca95a648c770fdd76947ef")}))},t.verifyScript=function(e){return d.TezosContractUtils.verifyScript(e,"ffcad1e376a6c8915780fe6676aceec6")},t.getAccountBalance=function(e,t,n){return s(this,void 0,void 0,(function*(){const o=yield r(e,t,`(Pair "ledger" 0x${p.TezosMessageUtils.writeAddress(n)})`);return Number((0,a.JSONPath)({path:"$.args[0].int",json:o})[0])}))},t.getOperatorList=function(e,t){return s(this,void 0,void 0,(function*(){const n=yield r(e,t,'"operators"');let o=[];for(const e of n)o.push(p.TezosMessageUtils.readAddress(e.bytes));return o}))},t.getTokenMetadata=function(e,t=31){return s(this,void 0,void 0,(function*(){return yield r(e,t,'"tokenMetadata"')}))},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield f.TezosNodeReader.getContractStorage(e,t);return{mapid:Number((0,a.JSONPath)({path:"$.args[0].int",json:r})[0]),scale:8}}))},t.getTokenSupply=function(e,t=31){return s(this,void 0,void 0,(function*(){const n=yield r(e,t,'"totalSupply"');return Number((0,a.JSONPath)({path:"$.int",json:n})[0])}))},t.getPaused=function(e,t=31){return s(this,void 0,void 0,(function*(){const n=yield r(e,t,'"paused"');return(0,a.JSONPath)({path:"$.prim",json:n})[0].toLowerCase().startsWith("t")}))},t.transferBalance=function(e,t,r,n,o,i,a,l,p=25e4,f=1e3){return s(this,void 0,void 0,(function*(){const s=`(Pair "${i}" (Pair "${a}" ${l}))`,g=yield h.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,f,p,"transfer",s,c.TezosParameterFormat.Michelson,u.TezosConstants.HeadBranchOffset,!0);return d.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.approveBalance=function(e,t,r,n,o,i,a,l=25e4,p=1e3){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Right (Left (Right (Right (Right (Pair "${i}" ${a})))))))))`,f=yield h.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,p,l,"",s,c.TezosParameterFormat.Michelson,u.TezosConstants.HeadBranchOffset,!0);return d.TezosContractUtils.clearRPCOperationGroupHash(f.operationGroupID)}))},t.mintBalance=function(e,t,r,n,o,i,a,u=25e4,l=1e3){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Right (Right (Left (Left (Left (Pair "${i}" ${a})))))))))`,p=yield h.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,l,u,"",s,c.TezosParameterFormat.Michelson);return d.TezosContractUtils.clearRPCOperationGroupHash(p.operationGroupID)}))},t.addOperator=function(e,t,r,n,o,i,a=25e4,u=1e3){return s(this,void 0,void 0,(function*(){const s=`(Right (Right (Right (Right (Right (Left (Right (Left "${i}" ))))))))`,l=yield h.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,u,a,"",s,c.TezosParameterFormat.Michelson);return d.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))}}(t.TzbtcTokenHelper||(t.TzbtcTokenHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";(function(e){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedTezosHelper=void 0;const a=r(5),u=i(r(2)),c=r(4),l=r(3),p=r(6),f=r(9),h=r(23),d=r(7),g=r(2),b="d48b45bd77d2300026fe617c5ba7670e",m="5e3c30607da21a0fc30f7be61afb15c7",y="7b9b5b7e7f0283ff6388eb783e23c452",v="",_="",P="";!function(t){t.verifyDestination=function(e,t,r,n){return s(this,void 0,void 0,(function*(){const o=yield f.TezosContractUtils.verifyDestination(e,t,b),i=yield f.TezosContractUtils.verifyDestination(e,r,m),s=yield f.TezosContractUtils.verifyDestination(e,n,y);return o&&i&&s}))},t.verifyScript=function(e,t,r){const n=f.TezosContractUtils.verifyScript(e,v),o=f.TezosContractUtils.verifyScript(t,_),i=f.TezosContractUtils.verifyScript(r,P);return n&&o&&i},t.getSimpleStorage=function(e,t){return s(this,void 0,void 0,(function*(){const r=yield l.TezosNodeReader.getContractStorage(e,t);return{balanceMap:Number((0,a.JSONPath)({path:"$.args[1].args[1].int",json:r})[0]),approvalsMap:Number((0,a.JSONPath)({path:"$.args[1].args[0].args[1].int",json:r})[0]),supply:Number((0,a.JSONPath)({path:"$.args[3].int",json:r})[0]),administrator:(0,a.JSONPath)({path:"$.args[1].args[0].args[0].string",json:r})[0],paused:(0,a.JSONPath)({path:"$.args[2].prim",json:r})[0].toString().toLowerCase().startsWith("t"),pauseGuardian:(0,a.JSONPath)({path:"$.args[1].args[2].string",json:r})[0],outcomeMap:Number((0,a.JSONPath)({path:"$.args[0].args[0].args[1].int",json:r})[0]),swapMap:Number((0,a.JSONPath)({path:"$.args[0].args[1].int",json:r})[0])}}))},t.getAccountBalance=function(t,r,n){return s(this,void 0,void 0,(function*(){const o=c.TezosMessageUtils.encodeBigMapKey(e.from(c.TezosMessageUtils.writePackedData(n,"address"),"hex")),i=yield l.TezosNodeReader.getValueForBigMapKey(t,r,o);if(void 0===i)return 0;const s=(0,a.JSONPath)({path:"$.int",json:i});return Number(s)}))},t.transferBalance=function(e,t,r,n,o,i,a,c,l=51300,h=70){return s(this,void 0,void 0,(function*(){const s=`Pair "${i}" (Pair "${a}" ${c})`,g=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,h,l,"transfer",s,u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(g.operationGroupID)}))},t.depositToOven=function(e,t,r,n,o,i,a=15e4,c=10){return s(this,void 0,void 0,(function*(){const s=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,i,o,c,a,"","Unit",u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))},t.withdrawFromOven=function(e,t,r,n,o,i,a=121e3,c=0){return s(this,void 0,void 0,(function*(){const s=""+i,l=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,n,0,o,c,a,"withdraw",s,u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.listOvens=function(e,t,r,n){return s(this,void 0,void 0,(function*(){const o=yield h.TezosConseilClient.getBigMapData(e,t);if(void 0===o)throw new Error("Could not fetch map data!");const{maps:i}=o;let s=void 0;for(let e=0;e<i.length;e++)if(i[e].definition.index===n){s=i[e];break}if(void 0===s)throw new Error("Could not find specified map ID!");const{content:a}=s;return a.map(e=>({key:c.TezosMessageUtils.readAddress(e.key.replace(/\"/g,"").replace(/\n/,"").replace("0x","")),value:c.TezosMessageUtils.readAddress(e.value.replace(/\"/g,"").replace(/\n/,"").replace("0x",""))})).filter(e=>r===e.value).map(e=>e.key)}))},t.deployOven=function(e,t,r,n,o,i,a=115e3,l=1100){return s(this,void 0,void 0,(function*(){const s=void 0!==i?`Some "${i}"`:"None",h='Pair "createOven" 0x'+c.TezosMessageUtils.writePackedData(`Pair ${s} "${r.publicKeyHash}"`,"pair (option key_hash) address",g.TezosParameterFormat.Michelson),b=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,n,l,a,"runEntrypointLambda",h,u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0),m=f.TezosContractUtils.clearRPCOperationGroupHash(b.operationGroupID);return{operationHash:m,ovenAddress:c.TezosMessageUtils.calculateContractAddress(m,0)}}))},t.setOvenBaker=function(e,t,r,n,o,i,a=23500,c=0){return s(this,void 0,void 0,(function*(){const s=`Some "${i}"`,l=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,n,c,a,"setDelegate",s,u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(l.operationGroupID)}))},t.clearOvenBaker=function(e,t,r,n,o,i=23500,a=0){return s(this,void 0,void 0,(function*(){const s=yield p.TezosNodeWriter.sendContractInvocationOperation(e,t,r,o,0,n,a,i,"setDelegate","None",u.TezosParameterFormat.Michelson,d.TezosConstants.HeadBranchOffset,!0);return f.TezosContractUtils.clearRPCOperationGroupHash(s.operationGroupID)}))}}(t.WrappedTezosHelper||(t.WrappedTezosHelper={}))}).call(this,r(0).Buffer)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConseilMetadataClient=void 0;const i=r(34),s=o(r(18)),a=o(r(13)).default.log,u=s.default.fetch;!function(e){function t(e,t){return n(this,void 0,void 0,(function*(){return u(`${e.url}/v2/metadata/${t}`,{method:"GET",headers:{apiKey:e.apiKey}}).then(r=>{if(!r.ok)throw new i.ConseilRequestError(r.status,r.statusText,`${e.url}/v2/metadata/${t}`,null);return r}).then(r=>r.json().catch(r=>{a.error(`ConseilMetadataClient.executeMetadataQuery parsing failed for ${e.url}/v2/metadata/${t} with ${r}`)}))}))}e.executeMetadataQuery=t,e.getPlatforms=function(e){return n(this,void 0,void 0,(function*(){return t(e,"platforms")}))},e.getNetworks=function(e,r){return n(this,void 0,void 0,(function*(){return t(e,r+"/networks")}))},e.getEntities=function(e,r,o){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/entities`)}))},e.getAttributes=function(e,r,o,i){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${i}/attributes`)}))},e.getAttributeValues=function(e,r,o,i,s){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${i}/${s}`)}))},e.getAttributeValuesForPrefix=function(e,r,o,i,s,a){return n(this,void 0,void 0,(function*(){return t(e,`${r}/${o}/${i}/${s}/${encodeURIComponent(a)}`)}))}}(t.ConseilMetadataClient||(t.ConseilMetadataClient={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttrbuteKeyType=t.AttrbuteDataType=void 0,function(e){e.STRING="String",e.INT="Int",e.DECIMAL="Decimal",e.BOOLEAN="Boolean",e.ACCOUNT_ADDRESS="AccountAddress",e.HASH="Hash",e.DATETIME="DateTime",e.CURRENCY="Currency"}(t.AttrbuteDataType||(t.AttrbuteDataType={})),function(e){e.PRIMARYKEY="PrimaryKey",e.UNIQUEKEY="UniqueKey",e.NONKEY="NonKey"}(t.AttrbuteKeyType||(t.AttrbuteKeyType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BallotVote=void 0,function(e){e[e.Yay=0]="Yay",e[e.Nay=1]="Nay",e[e.Pass=2]="Pass"}(t.BallotVote||(t.BallotVote={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}])}));